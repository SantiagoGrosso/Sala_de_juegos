import{A as GE,B as Cr,C as At,a as B,b as Re,c as _N,d as bN,e as Bf,f as _,g as LE,h as Oc,i as VE,j as UE,k as jE,l as $f,m as BE,n as la,o as qf,p as Fc,q as $E,r as qE,s as zf,t as Pe,u as gi,v as Dn,w as Lc,x as da,y as zE,z as HE}from"./chunk-AKQBW75U.js";var hC=_N((jn,Om)=>{"use strict";(function(t,e){typeof jn=="object"&&typeof Om<"u"?Om.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self,t.Sweetalert2=e())})(jn,function(){"use strict";function t(p,l,d){if(typeof p=="function"?p===l:p.has(l))return arguments.length<3?l:d;throw new TypeError("Private element is not present on this object")}function e(p,l,d){return l=T(l),x(p,o()?Reflect.construct(l,d||[],T(p).constructor):l.apply(p,d))}function n(p,l){return p.get(t(p,l))}function r(p,l,d){return p.set(t(p,l),d),d}function i(p,l,d){if(o())return Reflect.construct.apply(null,arguments);var f=[null];f.push.apply(f,l);var y=new(p.bind.apply(p,f));return d&&b(y,d.prototype),y}function o(){try{var p=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o=function(){return!!p})()}function s(p,l){var d=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(d!=null){var f,y,C,O,ie=[],ae=!0,Fe=!1;try{if(C=(d=d.call(p)).next,l===0){if(Object(d)!==d)return;ae=!1}else for(;!(ae=(f=C.call(d)).done)&&(ie.push(f.value),ie.length!==l);ae=!0);}catch(ca){Fe=!0,y=ca}finally{try{if(!ae&&d.return!=null&&(O=d.return(),Object(O)!==O))return}finally{if(Fe)throw y}}return ie}}function a(p,l){if(typeof p!="object"||!p)return p;var d=p[Symbol.toPrimitive];if(d!==void 0){var f=d.call(p,l||"default");if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(p)}function u(p){var l=a(p,"string");return typeof l=="symbol"?l:l+""}function c(p){"@babel/helpers - typeof";return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},c(p)}function h(p,l){if(!(p instanceof l))throw new TypeError("Cannot call a class as a function")}function g(p,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(p,u(f.key),f)}}function m(p,l,d){return l&&g(p.prototype,l),d&&g(p,d),Object.defineProperty(p,"prototype",{writable:!1}),p}function v(p,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(l&&l.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),l&&b(p,l)}function T(p){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)},T(p)}function b(p,l){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,y){return f.__proto__=y,f},b(p,l)}function I(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function x(p,l){if(l&&(typeof l=="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I(p)}function U(p,l){for(;!Object.prototype.hasOwnProperty.call(p,l)&&(p=T(p),p!==null););return p}function M(){return typeof Reflect<"u"&&Reflect.get?M=Reflect.get.bind():M=function(l,d,f){var y=U(l,d);if(y){var C=Object.getOwnPropertyDescriptor(y,d);return C.get?C.get.call(arguments.length<3?l:f):C.value}},M.apply(this,arguments)}function V(p,l){return ge(p)||s(p,l)||po(p,l)||VM()}function W(p){return K(p)||ht(p)||po(p)||LM()}function K(p){if(Array.isArray(p))return _r(p)}function ge(p){if(Array.isArray(p))return p}function ht(p){if(typeof Symbol<"u"&&p[Symbol.iterator]!=null||p["@@iterator"]!=null)return Array.from(p)}function po(p,l){if(p){if(typeof p=="string")return _r(p,l);var d=Object.prototype.toString.call(p).slice(8,-1);if(d==="Object"&&p.constructor&&(d=p.constructor.name),d==="Map"||d==="Set")return Array.from(p);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return _r(p,l)}}function _r(p,l){(l==null||l>p.length)&&(l=p.length);for(var d=0,f=new Array(l);d<l;d++)f[d]=p[d];return f}function LM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UM(p,l){if(l.has(p))throw new TypeError("Cannot initialize the same private elements twice on an object")}function jM(p,l,d){UM(p,l),l.set(p,d)}var BM=100,re={},$M=function(){re.previousActiveElement instanceof HTMLElement?(re.previousActiveElement.focus(),re.previousActiveElement=null):document.body&&document.body.focus()},qM=function(l){return new Promise(function(d){if(!l)return d();var f=window.scrollX,y=window.scrollY;re.restoreFocusTimeout=setTimeout(function(){$M(),d()},BM),window.scrollTo(f,y)})},L0="swal2-",zM=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],D=zM.reduce(function(p,l){return p[l]=L0+l,p},{}),HM=["success","warning","info","question","error"],bc=HM.reduce(function(p,l){return p[l]=L0+l,p},{}),V0="SweetAlert2:",bf=function(l){return l.charAt(0).toUpperCase()+l.slice(1)},Ct=function(l){console.warn("".concat(V0," ").concat(c(l)==="object"?l.join(" "):l))},ci=function(l){console.error("".concat(V0," ").concat(l))},U0=[],GM=function(l){U0.includes(l)||(U0.push(l),Ct(l))},WM=function(l,d){GM('"'.concat(l,'" is deprecated and will be removed in the next major release. Please use "').concat(d,'" instead.'))},Dc=function(l){return typeof l=="function"?l():l},Df=function(l){return l&&typeof l.toPromise=="function"},na=function(l){return Df(l)?l.toPromise():Promise.resolve(l)},Cf=function(l){return l&&Promise.resolve(l)===l},Tt=function(){return document.body.querySelector(".".concat(D.container))},ra=function(l){var d=Tt();return d?d.querySelector(l):null},Ot=function(l){return ra(".".concat(l))},we=function(){return Ot(D.popup)},ia=function(){return Ot(D.icon)},KM=function(){return Ot(D["icon-content"])},j0=function(){return Ot(D.title)},Tf=function(){return Ot(D["html-container"])},B0=function(){return Ot(D.image)},Af=function(){return Ot(D["progress-steps"])},Cc=function(){return Ot(D["validation-message"])},In=function(){return ra(".".concat(D.actions," .").concat(D.confirm))},go=function(){return ra(".".concat(D.actions," .").concat(D.cancel))},li=function(){return ra(".".concat(D.actions," .").concat(D.deny))},QM=function(){return Ot(D["input-label"])},mo=function(){return ra(".".concat(D.loader))},oa=function(){return Ot(D.actions)},$0=function(){return Ot(D.footer)},Tc=function(){return Ot(D["timer-progress-bar"])},Sf=function(){return Ot(D.close)},YM=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,xf=function(){var l=we();if(!l)return[];var d=l.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),f=Array.from(d).sort(function(O,ie){var ae=parseInt(O.getAttribute("tabindex")||"0"),Fe=parseInt(ie.getAttribute("tabindex")||"0");return ae>Fe?1:ae<Fe?-1:0}),y=l.querySelectorAll(YM),C=Array.from(y).filter(function(O){return O.getAttribute("tabindex")!=="-1"});return W(new Set(f.concat(C))).filter(function(O){return Lt(O)})},Mf=function(){return er(document.body,D.shown)&&!er(document.body,D["toast-shown"])&&!er(document.body,D["no-backdrop"])},Ac=function(){var l=we();return l?er(l,D.toast):!1},ZM=function(){var l=we();return l?l.hasAttribute("data-loading"):!1},Ft=function(l,d){if(l.textContent="",d){var f=new DOMParser,y=f.parseFromString(d,"text/html"),C=y.querySelector("head");C&&Array.from(C.childNodes).forEach(function(ie){l.appendChild(ie)});var O=y.querySelector("body");O&&Array.from(O.childNodes).forEach(function(ie){ie instanceof HTMLVideoElement||ie instanceof HTMLAudioElement?l.appendChild(ie.cloneNode(!0)):l.appendChild(ie)})}},er=function(l,d){if(!d)return!1;for(var f=d.split(/\s+/),y=0;y<f.length;y++)if(!l.classList.contains(f[y]))return!1;return!0},XM=function(l,d){Array.from(l.classList).forEach(function(f){!Object.values(D).includes(f)&&!Object.values(bc).includes(f)&&!Object.values(d.showClass||{}).includes(f)&&l.classList.remove(f)})},Ht=function(l,d,f){if(XM(l,d),d.customClass&&d.customClass[f]){if(typeof d.customClass[f]!="string"&&!d.customClass[f].forEach){Ct("Invalid type of customClass.".concat(f,'! Expected string or iterable object, got "').concat(c(d.customClass[f]),'"'));return}pe(l,d.customClass[f])}},Sc=function(l,d){if(!d)return null;switch(d){case"select":case"textarea":case"file":return l.querySelector(".".concat(D.popup," > .").concat(D[d]));case"checkbox":return l.querySelector(".".concat(D.popup," > .").concat(D.checkbox," input"));case"radio":return l.querySelector(".".concat(D.popup," > .").concat(D.radio," input:checked"))||l.querySelector(".".concat(D.popup," > .").concat(D.radio," input:first-child"));case"range":return l.querySelector(".".concat(D.popup," > .").concat(D.range," input"));default:return l.querySelector(".".concat(D.popup," > .").concat(D.input))}},q0=function(l){if(l.focus(),l.type!=="file"){var d=l.value;l.value="",l.value=d}},z0=function(l,d,f){!l||!d||(typeof d=="string"&&(d=d.split(/\s+/).filter(Boolean)),d.forEach(function(y){Array.isArray(l)?l.forEach(function(C){f?C.classList.add(y):C.classList.remove(y)}):f?l.classList.add(y):l.classList.remove(y)}))},pe=function(l,d){z0(l,d,!0)},_n=function(l,d){z0(l,d,!1)},br=function(l,d){for(var f=Array.from(l.children),y=0;y<f.length;y++){var C=f[y];if(C instanceof HTMLElement&&er(C,d))return C}},di=function(l,d,f){f==="".concat(parseInt(f))&&(f=parseInt(f)),f||parseInt(f)===0?l.style.setProperty(d,typeof f=="number"?"".concat(f,"px"):f):l.style.removeProperty(d)},tt=function(l){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";l&&(l.style.display=d)},ft=function(l){l&&(l.style.display="none")},Rf=function(l){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";l&&new MutationObserver(function(){sa(l,l.innerHTML,d)}).observe(l,{childList:!0,subtree:!0})},H0=function(l,d,f,y){var C=l.querySelector(d);C&&C.style.setProperty(f,y)},sa=function(l,d){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";d?tt(l,f):ft(l)},Lt=function(l){return!!(l&&(l.offsetWidth||l.offsetHeight||l.getClientRects().length))},JM=function(){return!Lt(In())&&!Lt(li())&&!Lt(go())},G0=function(l){return l.scrollHeight>l.clientHeight},W0=function(l){var d=window.getComputedStyle(l),f=parseFloat(d.getPropertyValue("animation-duration")||"0"),y=parseFloat(d.getPropertyValue("transition-duration")||"0");return f>0||y>0},Pf=function(l){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=Tc();f&&Lt(f)&&(d&&(f.style.transition="none",f.style.width="100%"),setTimeout(function(){f.style.transition="width ".concat(l/1e3,"s linear"),f.style.width="0%"},10))},eR=function(){var l=Tc();if(l){var d=parseInt(window.getComputedStyle(l).width);l.style.removeProperty("transition"),l.style.width="100%";var f=parseInt(window.getComputedStyle(l).width),y=d/f*100;l.style.width="".concat(y,"%")}},K0=function(){return typeof window>"u"||typeof document>"u"},tR=`
 <div aria-labelledby="`.concat(D.title,'" aria-describedby="').concat(D["html-container"],'" class="').concat(D.popup,`" tabindex="-1">
   <button type="button" class="`).concat(D.close,`"></button>
   <ul class="`).concat(D["progress-steps"],`"></ul>
   <div class="`).concat(D.icon,`"></div>
   <img class="`).concat(D.image,`" />
   <h2 class="`).concat(D.title,'" id="').concat(D.title,`"></h2>
   <div class="`).concat(D["html-container"],'" id="').concat(D["html-container"],`"></div>
   <input class="`).concat(D.input,'" id="').concat(D.input,`" />
   <input type="file" class="`).concat(D.file,`" />
   <div class="`).concat(D.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(D.select,'" id="').concat(D.select,`"></select>
   <div class="`).concat(D.radio,`"></div>
   <label class="`).concat(D.checkbox,`">
     <input type="checkbox" id="`).concat(D.checkbox,`" />
     <span class="`).concat(D.label,`"></span>
   </label>
   <textarea class="`).concat(D.textarea,'" id="').concat(D.textarea,`"></textarea>
   <div class="`).concat(D["validation-message"],'" id="').concat(D["validation-message"],`"></div>
   <div class="`).concat(D.actions,`">
     <div class="`).concat(D.loader,`"></div>
     <button type="button" class="`).concat(D.confirm,`"></button>
     <button type="button" class="`).concat(D.deny,`"></button>
     <button type="button" class="`).concat(D.cancel,`"></button>
   </div>
   <div class="`).concat(D.footer,`"></div>
   <div class="`).concat(D["timer-progress-bar-container"],`">
     <div class="`).concat(D["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),nR=function(){var l=Tt();return l?(l.remove(),_n([document.documentElement,document.body],[D["no-backdrop"],D["toast-shown"],D["has-column"]]),!0):!1},hi=function(){re.currentInstance.resetValidationMessage()},rR=function(){var l=we(),d=br(l,D.input),f=br(l,D.file),y=l.querySelector(".".concat(D.range," input")),C=l.querySelector(".".concat(D.range," output")),O=br(l,D.select),ie=l.querySelector(".".concat(D.checkbox," input")),ae=br(l,D.textarea);d.oninput=hi,f.onchange=hi,O.onchange=hi,ie.onchange=hi,ae.oninput=hi,y.oninput=function(){hi(),C.value=y.value},y.onchange=function(){hi(),C.value=y.value}},iR=function(l){return typeof l=="string"?document.querySelector(l):l},oR=function(l){var d=we();d.setAttribute("role",l.toast?"alert":"dialog"),d.setAttribute("aria-live",l.toast?"polite":"assertive"),l.toast||d.setAttribute("aria-modal","true")},sR=function(l){window.getComputedStyle(l).direction==="rtl"&&pe(Tt(),D.rtl)},aR=function(l){var d=nR();if(K0()){ci("SweetAlert2 requires document to initialize");return}var f=document.createElement("div");f.className=D.container,d&&pe(f,D["no-transition"]),Ft(f,tR);var y=iR(l.target);y.appendChild(f),oR(l),sR(y),rR()},Nf=function(l,d){l instanceof HTMLElement?d.appendChild(l):c(l)==="object"?uR(l,d):l&&Ft(d,l)},uR=function(l,d){l.jquery?cR(d,l):Ft(d,l.toString())},cR=function(l,d){if(l.textContent="",0 in d)for(var f=0;f in d;f++)l.appendChild(d[f].cloneNode(!0));else l.appendChild(d.cloneNode(!0))},fi=function(){if(K0())return!1;var p=document.createElement("div");return typeof p.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof p.style.animation<"u"?"animationend":!1}(),lR=function(l,d){var f=oa(),y=mo();!f||!y||(!d.showConfirmButton&&!d.showDenyButton&&!d.showCancelButton?ft(f):tt(f),Ht(f,d,"actions"),dR(f,y,d),Ft(y,d.loaderHtml||""),Ht(y,d,"loader"))};function dR(p,l,d){var f=In(),y=li(),C=go();!f||!y||!C||(kf(f,"confirm",d),kf(y,"deny",d),kf(C,"cancel",d),hR(f,y,C,d),d.reverseButtons&&(d.toast?(p.insertBefore(C,f),p.insertBefore(y,f)):(p.insertBefore(C,l),p.insertBefore(y,l),p.insertBefore(f,l))))}function hR(p,l,d,f){if(!f.buttonsStyling){_n([p,l,d],D.styled);return}pe([p,l,d],D.styled),f.confirmButtonColor&&(p.style.backgroundColor=f.confirmButtonColor,pe(p,D["default-outline"])),f.denyButtonColor&&(l.style.backgroundColor=f.denyButtonColor,pe(l,D["default-outline"])),f.cancelButtonColor&&(d.style.backgroundColor=f.cancelButtonColor,pe(d,D["default-outline"]))}function kf(p,l,d){var f=bf(l);sa(p,d["show".concat(f,"Button")],"inline-block"),Ft(p,d["".concat(l,"ButtonText")]||""),p.setAttribute("aria-label",d["".concat(l,"ButtonAriaLabel")]||""),p.className=D[l],Ht(p,d,"".concat(l,"Button"))}var fR=function(l,d){var f=Sf();f&&(Ft(f,d.closeButtonHtml||""),Ht(f,d,"closeButton"),sa(f,d.showCloseButton),f.setAttribute("aria-label",d.closeButtonAriaLabel||""))},pR=function(l,d){var f=Tt();f&&(gR(f,d.backdrop),mR(f,d.position),yR(f,d.grow),Ht(f,d,"container"))};function gR(p,l){typeof l=="string"?p.style.background=l:l||pe([document.documentElement,document.body],D["no-backdrop"])}function mR(p,l){l&&(l in D?pe(p,D[l]):(Ct('The "position" parameter is not valid, defaulting to "center"'),pe(p,D.center)))}function yR(p,l){l&&pe(p,D["grow-".concat(l)])}var Te={innerParams:new WeakMap,domCache:new WeakMap},vR=["input","file","range","select","radio","checkbox","textarea"],wR=function(l,d){var f=we();if(f){var y=Te.innerParams.get(l),C=!y||d.input!==y.input;vR.forEach(function(O){var ie=br(f,D[O]);ie&&(_R(O,d.inputAttributes),ie.className=D[O],C&&ft(ie))}),d.input&&(C&&ER(d),bR(d))}},ER=function(l){if(l.input){if(!je[l.input]){ci("Unexpected type of input! Expected ".concat(Object.keys(je).join(" | "),', got "').concat(l.input,'"'));return}var d=Q0(l.input),f=je[l.input](d,l);tt(d),l.inputAutoFocus&&setTimeout(function(){q0(f)})}},IR=function(l){for(var d=0;d<l.attributes.length;d++){var f=l.attributes[d].name;["id","type","value","style"].includes(f)||l.removeAttribute(f)}},_R=function(l,d){var f=Sc(we(),l);if(f){IR(f);for(var y in d)f.setAttribute(y,d[y])}},bR=function(l){var d=Q0(l.input);c(l.customClass)==="object"&&pe(d,l.customClass.input)},Of=function(l,d){(!l.placeholder||d.inputPlaceholder)&&(l.placeholder=d.inputPlaceholder)},aa=function(l,d,f){if(f.inputLabel){var y=document.createElement("label"),C=D["input-label"];y.setAttribute("for",l.id),y.className=C,c(f.customClass)==="object"&&pe(y,f.customClass.inputLabel),y.innerText=f.inputLabel,d.insertAdjacentElement("beforebegin",y)}},Q0=function(l){return br(we(),D[l]||D.input)},xc=function(l,d){["string","number"].includes(c(d))?l.value="".concat(d):Cf(d)||Ct('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(c(d),'"'))},je={};je.text=je.email=je.password=je.number=je.tel=je.url=je.search=je.date=je["datetime-local"]=je.time=je.week=je.month=function(p,l){return xc(p,l.inputValue),aa(p,p,l),Of(p,l),p.type=l.input,p},je.file=function(p,l){return aa(p,p,l),Of(p,l),p},je.range=function(p,l){var d=p.querySelector("input"),f=p.querySelector("output");return xc(d,l.inputValue),d.type=l.input,xc(f,l.inputValue),aa(d,p,l),p},je.select=function(p,l){if(p.textContent="",l.inputPlaceholder){var d=document.createElement("option");Ft(d,l.inputPlaceholder),d.value="",d.disabled=!0,d.selected=!0,p.appendChild(d)}return aa(p,p,l),p},je.radio=function(p){return p.textContent="",p},je.checkbox=function(p,l){var d=Sc(we(),"checkbox");d.value="1",d.checked=!!l.inputValue;var f=p.querySelector("span");return Ft(f,l.inputPlaceholder),d},je.textarea=function(p,l){xc(p,l.inputValue),Of(p,l),aa(p,p,l);var d=function(y){return parseInt(window.getComputedStyle(y).marginLeft)+parseInt(window.getComputedStyle(y).marginRight)};return setTimeout(function(){if("MutationObserver"in window){var f=parseInt(window.getComputedStyle(we()).width),y=function(){if(document.body.contains(p)){var O=p.offsetWidth+d(p);O>f?we().style.width="".concat(O,"px"):di(we(),"width",l.width)}};new MutationObserver(y).observe(p,{attributes:!0,attributeFilter:["style"]})}}),p};var DR=function(l,d){var f=Tf();f&&(Rf(f),Ht(f,d,"htmlContainer"),d.html?(Nf(d.html,f),tt(f,"block")):d.text?(f.textContent=d.text,tt(f,"block")):ft(f),wR(l,d))},CR=function(l,d){var f=$0();f&&(Rf(f),sa(f,d.footer,"block"),d.footer&&Nf(d.footer,f),Ht(f,d,"footer"))},TR=function(l,d){var f=Te.innerParams.get(l),y=ia();if(y){if(f&&d.icon===f.icon){Z0(y,d),Y0(y,d);return}if(!d.icon&&!d.iconHtml){ft(y);return}if(d.icon&&Object.keys(bc).indexOf(d.icon)===-1){ci('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(d.icon,'"')),ft(y);return}tt(y),Z0(y,d),Y0(y,d),pe(y,d.showClass&&d.showClass.icon)}},Y0=function(l,d){for(var f=0,y=Object.entries(bc);f<y.length;f++){var C=V(y[f],2),O=C[0],ie=C[1];d.icon!==O&&_n(l,ie)}pe(l,d.icon&&bc[d.icon]),MR(l,d),AR(),Ht(l,d,"icon")},AR=function(){var l=we();if(l)for(var d=window.getComputedStyle(l).getPropertyValue("background-color"),f=l.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),y=0;y<f.length;y++)f[y].style.backgroundColor=d},SR=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,xR=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Z0=function(l,d){if(!(!d.icon&&!d.iconHtml)){var f=l.innerHTML,y="";if(d.iconHtml)y=X0(d.iconHtml);else if(d.icon==="success")y=SR,f=f.replace(/ style=".*?"/g,"");else if(d.icon==="error")y=xR;else if(d.icon){var C={question:"?",warning:"!",info:"i"};y=X0(C[d.icon])}f.trim()!==y.trim()&&Ft(l,y)}},MR=function(l,d){if(d.iconColor){l.style.color=d.iconColor,l.style.borderColor=d.iconColor;for(var f=0,y=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];f<y.length;f++){var C=y[f];H0(l,C,"background-color",d.iconColor)}H0(l,".swal2-success-ring","border-color",d.iconColor)}},X0=function(l){return'<div class="'.concat(D["icon-content"],'">').concat(l,"</div>")},RR=function(l,d){var f=B0();if(f){if(!d.imageUrl){ft(f);return}tt(f,""),f.setAttribute("src",d.imageUrl),f.setAttribute("alt",d.imageAlt||""),di(f,"width",d.imageWidth),di(f,"height",d.imageHeight),f.className=D.image,Ht(f,d,"image")}},PR=function(l,d){var f=Tt(),y=we();if(!(!f||!y)){if(d.toast){di(f,"width",d.width),y.style.width="100%";var C=mo();C&&y.insertBefore(C,ia())}else di(y,"width",d.width);di(y,"padding",d.padding),d.color&&(y.style.color=d.color),d.background&&(y.style.background=d.background),ft(Cc()),NR(y,d)}},NR=function(l,d){var f=d.showClass||{};l.className="".concat(D.popup," ").concat(Lt(l)?f.popup:""),d.toast?(pe([document.documentElement,document.body],D["toast-shown"]),pe(l,D.toast)):pe(l,D.modal),Ht(l,d,"popup"),typeof d.customClass=="string"&&pe(l,d.customClass),d.icon&&pe(l,D["icon-".concat(d.icon)])},kR=function(l,d){var f=Af();if(f){var y=d.progressSteps,C=d.currentProgressStep;if(!y||y.length===0||C===void 0){ft(f);return}tt(f),f.textContent="",C>=y.length&&Ct("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),y.forEach(function(O,ie){var ae=OR(O);if(f.appendChild(ae),ie===C&&pe(ae,D["active-progress-step"]),ie!==y.length-1){var Fe=FR(d);f.appendChild(Fe)}})}},OR=function(l){var d=document.createElement("li");return pe(d,D["progress-step"]),Ft(d,l),d},FR=function(l){var d=document.createElement("li");return pe(d,D["progress-step-line"]),l.progressStepsDistance&&di(d,"width",l.progressStepsDistance),d},LR=function(l,d){var f=j0();f&&(Rf(f),sa(f,d.title||d.titleText,"block"),d.title&&Nf(d.title,f),d.titleText&&(f.innerText=d.titleText),Ht(f,d,"title"))},J0=function(l,d){PR(l,d),pR(l,d),kR(l,d),TR(l,d),RR(l,d),LR(l,d),fR(l,d),DR(l,d),lR(l,d),CR(l,d);var f=we();typeof d.didRender=="function"&&f&&d.didRender(f)},VR=function(){return Lt(we())},eE=function(){var l;return(l=In())===null||l===void 0?void 0:l.click()},UR=function(){var l;return(l=li())===null||l===void 0?void 0:l.click()},jR=function(){var l;return(l=go())===null||l===void 0?void 0:l.click()},yo=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),tE=function(l){l.keydownTarget&&l.keydownHandlerAdded&&(l.keydownTarget.removeEventListener("keydown",l.keydownHandler,{capture:l.keydownListenerCapture}),l.keydownHandlerAdded=!1)},BR=function(l,d,f){tE(l),d.toast||(l.keydownHandler=function(y){return qR(d,y,f)},l.keydownTarget=d.keydownListenerCapture?window:we(),l.keydownListenerCapture=d.keydownListenerCapture,l.keydownTarget.addEventListener("keydown",l.keydownHandler,{capture:l.keydownListenerCapture}),l.keydownHandlerAdded=!0)},Ff=function(l,d){var f,y=xf();if(y.length){l=l+d,l===y.length?l=0:l===-1&&(l=y.length-1),y[l].focus();return}(f=we())===null||f===void 0||f.focus()},nE=["ArrowRight","ArrowDown"],$R=["ArrowLeft","ArrowUp"],qR=function(l,d,f){l&&(d.isComposing||d.keyCode===229||(l.stopKeydownPropagation&&d.stopPropagation(),d.key==="Enter"?zR(d,l):d.key==="Tab"?HR(d):[].concat(nE,$R).includes(d.key)?GR(d.key):d.key==="Escape"&&WR(d,l,f)))},zR=function(l,d){if(Dc(d.allowEnterKey)){var f=Sc(we(),d.input);if(l.target&&f&&l.target instanceof HTMLElement&&l.target.outerHTML===f.outerHTML){if(["textarea","file"].includes(d.input))return;eE(),l.preventDefault()}}},HR=function(l){for(var d=l.target,f=xf(),y=-1,C=0;C<f.length;C++)if(d===f[C]){y=C;break}l.shiftKey?Ff(y,-1):Ff(y,1),l.stopPropagation(),l.preventDefault()},GR=function(l){var d=oa(),f=In(),y=li(),C=go();if(!(!d||!f||!y||!C)){var O=[f,y,C];if(!(document.activeElement instanceof HTMLElement&&!O.includes(document.activeElement))){var ie=nE.includes(l)?"nextElementSibling":"previousElementSibling",ae=document.activeElement;if(ae){for(var Fe=0;Fe<d.children.length;Fe++){if(ae=ae[ie],!ae)return;if(ae instanceof HTMLButtonElement&&Lt(ae))break}ae instanceof HTMLButtonElement&&ae.focus()}}}},WR=function(l,d,f){Dc(d.allowEscapeKey)&&(l.preventDefault(),f(yo.esc))},vo={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},KR=function(){var l=Tt(),d=Array.from(document.body.children);d.forEach(function(f){f.contains(l)||(f.hasAttribute("aria-hidden")&&f.setAttribute("data-previous-aria-hidden",f.getAttribute("aria-hidden")||""),f.setAttribute("aria-hidden","true"))})},rE=function(){var l=Array.from(document.body.children);l.forEach(function(d){d.hasAttribute("data-previous-aria-hidden")?(d.setAttribute("aria-hidden",d.getAttribute("data-previous-aria-hidden")||""),d.removeAttribute("data-previous-aria-hidden")):d.removeAttribute("aria-hidden")})},iE=typeof window<"u"&&!!window.GestureEvent,QR=function(){if(iE&&!er(document.body,D.iosfix)){var l=document.body.scrollTop;document.body.style.top="".concat(l*-1,"px"),pe(document.body,D.iosfix),YR()}},YR=function(){var l=Tt();if(l){var d;l.ontouchstart=function(f){d=ZR(f)},l.ontouchmove=function(f){d&&(f.preventDefault(),f.stopPropagation())}}},ZR=function(l){var d=l.target,f=Tt(),y=Tf();return!f||!y||XR(l)||JR(l)?!1:d===f||!G0(f)&&d instanceof HTMLElement&&d.tagName!=="INPUT"&&d.tagName!=="TEXTAREA"&&!(G0(y)&&y.contains(d))},XR=function(l){return l.touches&&l.touches.length&&l.touches[0].touchType==="stylus"},JR=function(l){return l.touches&&l.touches.length>1},eP=function(){if(er(document.body,D.iosfix)){var l=parseInt(document.body.style.top,10);_n(document.body,D.iosfix),document.body.style.top="",document.body.scrollTop=l*-1}},tP=function(){var l=document.createElement("div");l.className=D["scrollbar-measure"],document.body.appendChild(l);var d=l.getBoundingClientRect().width-l.clientWidth;return document.body.removeChild(l),d},wo=null,nP=function(l){wo===null&&(document.body.scrollHeight>window.innerHeight||l==="scroll")&&(wo=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(wo+tP(),"px"))},rP=function(){wo!==null&&(document.body.style.paddingRight="".concat(wo,"px"),wo=null)};function oE(p,l,d,f){Ac()?aE(p,f):(qM(d).then(function(){return aE(p,f)}),tE(re)),iE?(l.setAttribute("style","display:none !important"),l.removeAttribute("class"),l.innerHTML=""):l.remove(),Mf()&&(rP(),eP(),rE()),iP()}function iP(){_n([document.documentElement,document.body],[D.shown,D["height-auto"],D["no-backdrop"],D["toast-shown"]])}function Dr(p){p=sP(p);var l=vo.swalPromiseResolve.get(this),d=oP(this);this.isAwaitingPromise?p.isDismissed||(ua(this),l(p)):d&&l(p)}var oP=function(l){var d=we();if(!d)return!1;var f=Te.innerParams.get(l);if(!f||er(d,f.hideClass.popup))return!1;_n(d,f.showClass.popup),pe(d,f.hideClass.popup);var y=Tt();return _n(y,f.showClass.backdrop),pe(y,f.hideClass.backdrop),aP(l,d,f),!0};function sE(p){var l=vo.swalPromiseReject.get(this);ua(this),l&&l(p)}var ua=function(l){l.isAwaitingPromise&&(delete l.isAwaitingPromise,Te.innerParams.get(l)||l._destroy())},sP=function(l){return typeof l>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},l)},aP=function(l,d,f){var y=Tt(),C=fi&&W0(d);typeof f.willClose=="function"&&f.willClose(d),C?uP(l,d,y,f.returnFocus,f.didClose):oE(l,y,f.returnFocus,f.didClose)},uP=function(l,d,f,y,C){fi&&(re.swalCloseEventFinishedCallback=oE.bind(null,l,f,y,C),d.addEventListener(fi,function(O){O.target===d&&(re.swalCloseEventFinishedCallback(),delete re.swalCloseEventFinishedCallback)}))},aE=function(l,d){setTimeout(function(){typeof d=="function"&&d.bind(l.params)(),l._destroy&&l._destroy()})},Eo=function(l){var d=we();if(d||new kc,d=we(),!!d){var f=mo();Ac()?ft(ia()):cP(d,l),tt(f),d.setAttribute("data-loading","true"),d.setAttribute("aria-busy","true"),d.focus()}},cP=function(l,d){var f=oa(),y=mo();!f||!y||(!d&&Lt(In())&&(d=In()),tt(f),d&&(ft(d),y.setAttribute("data-button-to-replace",d.className),f.insertBefore(y,d)),pe([l,f],D.loading))},lP=function(l,d){d.input==="select"||d.input==="radio"?gP(l,d):["text","email","number","tel","textarea"].some(function(f){return f===d.input})&&(Df(d.inputValue)||Cf(d.inputValue))&&(Eo(In()),mP(l,d))},dP=function(l,d){var f=l.getInput();if(!f)return null;switch(d.input){case"checkbox":return hP(f);case"radio":return fP(f);case"file":return pP(f);default:return d.inputAutoTrim?f.value.trim():f.value}},hP=function(l){return l.checked?1:0},fP=function(l){return l.checked?l.value:null},pP=function(l){return l.files&&l.files.length?l.getAttribute("multiple")!==null?l.files:l.files[0]:null},gP=function(l,d){var f=we();if(f){var y=function(O){d.input==="select"?yP(f,uE(O),d):d.input==="radio"&&vP(f,uE(O),d)};Df(d.inputOptions)||Cf(d.inputOptions)?(Eo(In()),na(d.inputOptions).then(function(C){l.hideLoading(),y(C)})):c(d.inputOptions)==="object"?y(d.inputOptions):ci("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(c(d.inputOptions)))}},mP=function(l,d){var f=l.getInput();f&&(ft(f),na(d.inputValue).then(function(y){f.value=d.input==="number"?"".concat(parseFloat(y)||0):"".concat(y),tt(f),f.focus(),l.hideLoading()}).catch(function(y){ci("Error in inputValue promise: ".concat(y)),f.value="",tt(f),f.focus(),l.hideLoading()}))};function yP(p,l,d){var f=br(p,D.select);if(f){var y=function(O,ie,ae){var Fe=document.createElement("option");Fe.value=ae,Ft(Fe,ie),Fe.selected=cE(ae,d.inputValue),O.appendChild(Fe)};l.forEach(function(C){var O=C[0],ie=C[1];if(Array.isArray(ie)){var ae=document.createElement("optgroup");ae.label=O,ae.disabled=!1,f.appendChild(ae),ie.forEach(function(Fe){return y(ae,Fe[1],Fe[0])})}else y(f,ie,O)}),f.focus()}}function vP(p,l,d){var f=br(p,D.radio);if(f){l.forEach(function(C){var O=C[0],ie=C[1],ae=document.createElement("input"),Fe=document.createElement("label");ae.type="radio",ae.name=D.radio,ae.value=O,cE(O,d.inputValue)&&(ae.checked=!0);var ca=document.createElement("span");Ft(ca,ie),ca.className=D.label,Fe.appendChild(ae),Fe.appendChild(ca),f.appendChild(Fe)});var y=f.querySelectorAll("input");y.length&&y[0].focus()}}var uE=function p(l){var d=[];return l instanceof Map?l.forEach(function(f,y){var C=f;c(C)==="object"&&(C=p(C)),d.push([y,C])}):Object.keys(l).forEach(function(f){var y=l[f];c(y)==="object"&&(y=p(y)),d.push([f,y])}),d},cE=function(l,d){return!!d&&d.toString()===l.toString()},Mc=void 0,wP=function(l){var d=Te.innerParams.get(l);l.disableButtons(),d.input?lE(l,"confirm"):Vf(l,!0)},EP=function(l){var d=Te.innerParams.get(l);l.disableButtons(),d.returnInputValueOnDeny?lE(l,"deny"):Lf(l,!1)},IP=function(l,d){l.disableButtons(),d(yo.cancel)},lE=function(l,d){var f=Te.innerParams.get(l);if(!f.input){ci('The "input" parameter is needed to be set when using returnInputValueOn'.concat(bf(d)));return}var y=l.getInput(),C=dP(l,f);f.inputValidator?_P(l,C,d):y&&!y.checkValidity()?(l.enableButtons(),l.showValidationMessage(f.validationMessage||y.validationMessage)):d==="deny"?Lf(l,C):Vf(l,C)},_P=function(l,d,f){var y=Te.innerParams.get(l);l.disableInput();var C=Promise.resolve().then(function(){return na(y.inputValidator(d,y.validationMessage))});C.then(function(O){l.enableButtons(),l.enableInput(),O?l.showValidationMessage(O):f==="deny"?Lf(l,d):Vf(l,d)})},Lf=function(l,d){var f=Te.innerParams.get(l||Mc);if(f.showLoaderOnDeny&&Eo(li()),f.preDeny){l.isAwaitingPromise=!0;var y=Promise.resolve().then(function(){return na(f.preDeny(d,f.validationMessage))});y.then(function(C){C===!1?(l.hideLoading(),ua(l)):l.close({isDenied:!0,value:typeof C>"u"?d:C})}).catch(function(C){return hE(l||Mc,C)})}else l.close({isDenied:!0,value:d})},dE=function(l,d){l.close({isConfirmed:!0,value:d})},hE=function(l,d){l.rejectPromise(d)},Vf=function(l,d){var f=Te.innerParams.get(l||Mc);if(f.showLoaderOnConfirm&&Eo(),f.preConfirm){l.resetValidationMessage(),l.isAwaitingPromise=!0;var y=Promise.resolve().then(function(){return na(f.preConfirm(d,f.validationMessage))});y.then(function(C){Lt(Cc())||C===!1?(l.hideLoading(),ua(l)):dE(l,typeof C>"u"?d:C)}).catch(function(C){return hE(l||Mc,C)})}else dE(l,d)};function Rc(){var p=Te.innerParams.get(this);if(p){var l=Te.domCache.get(this);ft(l.loader),Ac()?p.icon&&tt(ia()):bP(l),_n([l.popup,l.actions],D.loading),l.popup.removeAttribute("aria-busy"),l.popup.removeAttribute("data-loading"),l.confirmButton.disabled=!1,l.denyButton.disabled=!1,l.cancelButton.disabled=!1}}var bP=function(l){var d=l.popup.getElementsByClassName(l.loader.getAttribute("data-button-to-replace"));d.length?tt(d[0],"inline-block"):JM()&&ft(l.actions)};function fE(){var p=Te.innerParams.get(this),l=Te.domCache.get(this);return l?Sc(l.popup,p.input):null}function pE(p,l,d){var f=Te.domCache.get(p);l.forEach(function(y){f[y].disabled=d})}function gE(p,l){var d=we();if(!(!d||!p))if(p.type==="radio")for(var f=d.querySelectorAll('[name="'.concat(D.radio,'"]')),y=0;y<f.length;y++)f[y].disabled=l;else p.disabled=l}function mE(){pE(this,["confirmButton","denyButton","cancelButton"],!1)}function yE(){pE(this,["confirmButton","denyButton","cancelButton"],!0)}function vE(){gE(this.getInput(),!1)}function wE(){gE(this.getInput(),!0)}function EE(p){var l=Te.domCache.get(this),d=Te.innerParams.get(this);Ft(l.validationMessage,p),l.validationMessage.className=D["validation-message"],d.customClass&&d.customClass.validationMessage&&pe(l.validationMessage,d.customClass.validationMessage),tt(l.validationMessage);var f=this.getInput();f&&(f.setAttribute("aria-invalid","true"),f.setAttribute("aria-describedby",D["validation-message"]),q0(f),pe(f,D.inputerror))}function IE(){var p=Te.domCache.get(this);p.validationMessage&&ft(p.validationMessage);var l=this.getInput();l&&(l.removeAttribute("aria-invalid"),l.removeAttribute("aria-describedby"),_n(l,D.inputerror))}var Io={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},DP=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],CP={},TP=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],_E=function(l){return Object.prototype.hasOwnProperty.call(Io,l)},bE=function(l){return DP.indexOf(l)!==-1},DE=function(l){return CP[l]},AP=function(l){_E(l)||Ct('Unknown parameter "'.concat(l,'"'))},SP=function(l){TP.includes(l)&&Ct('The parameter "'.concat(l,'" is incompatible with toasts'))},xP=function(l){var d=DE(l);d&&WM(l,d)},MP=function(l){l.backdrop===!1&&l.allowOutsideClick&&Ct('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(var d in l)AP(d),l.toast&&SP(d),xP(d)};function CE(p){var l=we(),d=Te.innerParams.get(this);if(!l||er(l,d.hideClass.popup)){Ct("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}var f=RP(p),y=Object.assign({},d,f);J0(this,y),Te.innerParams.set(this,y),Object.defineProperties(this,{params:{value:Object.assign({},this.params,p),writable:!1,enumerable:!0}})}var RP=function(l){var d={};return Object.keys(l).forEach(function(f){bE(f)?d[f]=l[f]:Ct("Invalid parameter to update: ".concat(f))}),d};function TE(){var p=Te.domCache.get(this),l=Te.innerParams.get(this);if(!l){AE(this);return}p.popup&&re.swalCloseEventFinishedCallback&&(re.swalCloseEventFinishedCallback(),delete re.swalCloseEventFinishedCallback),typeof l.didDestroy=="function"&&l.didDestroy(),PP(this)}var PP=function(l){AE(l),delete l.params,delete re.keydownHandler,delete re.keydownTarget,delete re.currentInstance},AE=function(l){l.isAwaitingPromise?(Uf(Te,l),l.isAwaitingPromise=!0):(Uf(vo,l),Uf(Te,l),delete l.isAwaitingPromise,delete l.disableButtons,delete l.enableButtons,delete l.getInput,delete l.disableInput,delete l.enableInput,delete l.hideLoading,delete l.disableLoading,delete l.showValidationMessage,delete l.resetValidationMessage,delete l.close,delete l.closePopup,delete l.closeModal,delete l.closeToast,delete l.rejectPromise,delete l.update,delete l._destroy)},Uf=function(l,d){for(var f in l)l[f].delete(d)},NP=Object.freeze({__proto__:null,_destroy:TE,close:Dr,closeModal:Dr,closePopup:Dr,closeToast:Dr,disableButtons:yE,disableInput:wE,disableLoading:Rc,enableButtons:mE,enableInput:vE,getInput:fE,handleAwaitingPromise:ua,hideLoading:Rc,rejectPromise:sE,resetValidationMessage:IE,showValidationMessage:EE,update:CE}),kP=function(l,d,f){l.toast?OP(l,d,f):(LP(d),VP(d),UP(l,d,f))},OP=function(l,d,f){d.popup.onclick=function(){l&&(FP(l)||l.timer||l.input)||f(yo.close)}},FP=function(l){return!!(l.showConfirmButton||l.showDenyButton||l.showCancelButton||l.showCloseButton)},Pc=!1,LP=function(l){l.popup.onmousedown=function(){l.container.onmouseup=function(d){l.container.onmouseup=function(){},d.target===l.container&&(Pc=!0)}}},VP=function(l){l.container.onmousedown=function(d){d.target===l.container&&d.preventDefault(),l.popup.onmouseup=function(f){l.popup.onmouseup=function(){},(f.target===l.popup||f.target instanceof HTMLElement&&l.popup.contains(f.target))&&(Pc=!0)}}},UP=function(l,d,f){d.container.onclick=function(y){if(Pc){Pc=!1;return}y.target===d.container&&Dc(l.allowOutsideClick)&&f(yo.backdrop)}},jP=function(l){return c(l)==="object"&&l.jquery},SE=function(l){return l instanceof Element||jP(l)},BP=function(l){var d={};return c(l[0])==="object"&&!SE(l[0])?Object.assign(d,l[0]):["title","html","icon"].forEach(function(f,y){var C=l[y];typeof C=="string"||SE(C)?d[f]=C:C!==void 0&&ci("Unexpected type of ".concat(f,'! Expected "string" or "Element", got ').concat(c(C)))}),d};function $P(){for(var p=this,l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];return i(p,d)}function qP(p){var l=function(d){function f(){return h(this,f),e(this,f,arguments)}return v(f,d),m(f,[{key:"_main",value:function(C,O){return M(T(f.prototype),"_main",this).call(this,C,Object.assign({},p,O))}}])}(this);return l}var zP=function(){return re.timeout&&re.timeout.getTimerLeft()},xE=function(){if(re.timeout)return eR(),re.timeout.stop()},ME=function(){if(re.timeout){var l=re.timeout.start();return Pf(l),l}},HP=function(){var l=re.timeout;return l&&(l.running?xE():ME())},GP=function(l){if(re.timeout){var d=re.timeout.increase(l);return Pf(d,!0),d}},WP=function(){return!!(re.timeout&&re.timeout.isRunning())},RE=!1,jf={};function KP(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";jf[p]=this,RE||(document.body.addEventListener("click",QP),RE=!0)}var QP=function(l){for(var d=l.target;d&&d!==document;d=d.parentNode)for(var f in jf){var y=d.getAttribute(f);if(y){jf[f].fire({template:y});return}}},YP=Object.freeze({__proto__:null,argsToParams:BP,bindClickHandler:KP,clickCancel:jR,clickConfirm:eE,clickDeny:UR,enableLoading:Eo,fire:$P,getActions:oa,getCancelButton:go,getCloseButton:Sf,getConfirmButton:In,getContainer:Tt,getDenyButton:li,getFocusableElements:xf,getFooter:$0,getHtmlContainer:Tf,getIcon:ia,getIconContent:KM,getImage:B0,getInputLabel:QM,getLoader:mo,getPopup:we,getProgressSteps:Af,getTimerLeft:zP,getTimerProgressBar:Tc,getTitle:j0,getValidationMessage:Cc,increaseTimer:GP,isDeprecatedParameter:DE,isLoading:ZM,isTimerRunning:WP,isUpdatableParameter:bE,isValidParameter:_E,isVisible:VR,mixin:qP,resumeTimer:ME,showLoading:Eo,stopTimer:xE,toggleTimer:HP}),ZP=function(){function p(l,d){h(this,p),this.callback=l,this.remaining=d,this.running=!1,this.start()}return m(p,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(d){var f=this.running;return f&&this.stop(),this.remaining+=d,f&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}])}(),PE=["swal-title","swal-html","swal-footer"],XP=function(l){var d=typeof l.template=="string"?document.querySelector(l.template):l.template;if(!d)return{};var f=d.content;sN(f);var y=Object.assign(JP(f),eN(f),tN(f),nN(f),rN(f),iN(f),oN(f,PE));return y},JP=function(l){var d={},f=Array.from(l.querySelectorAll("swal-param"));return f.forEach(function(y){pi(y,["name","value"]);var C=y.getAttribute("name"),O=y.getAttribute("value");typeof Io[C]=="boolean"?d[C]=O!=="false":c(Io[C])==="object"?d[C]=JSON.parse(O):d[C]=O}),d},eN=function(l){var d={},f=Array.from(l.querySelectorAll("swal-function-param"));return f.forEach(function(y){var C=y.getAttribute("name"),O=y.getAttribute("value");d[C]=new Function("return ".concat(O))()}),d},tN=function(l){var d={},f=Array.from(l.querySelectorAll("swal-button"));return f.forEach(function(y){pi(y,["type","color","aria-label"]);var C=y.getAttribute("type");d["".concat(C,"ButtonText")]=y.innerHTML,d["show".concat(bf(C),"Button")]=!0,y.hasAttribute("color")&&(d["".concat(C,"ButtonColor")]=y.getAttribute("color")),y.hasAttribute("aria-label")&&(d["".concat(C,"ButtonAriaLabel")]=y.getAttribute("aria-label"))}),d},nN=function(l){var d={},f=l.querySelector("swal-image");return f&&(pi(f,["src","width","height","alt"]),f.hasAttribute("src")&&(d.imageUrl=f.getAttribute("src")),f.hasAttribute("width")&&(d.imageWidth=f.getAttribute("width")),f.hasAttribute("height")&&(d.imageHeight=f.getAttribute("height")),f.hasAttribute("alt")&&(d.imageAlt=f.getAttribute("alt"))),d},rN=function(l){var d={},f=l.querySelector("swal-icon");return f&&(pi(f,["type","color"]),f.hasAttribute("type")&&(d.icon=f.getAttribute("type")),f.hasAttribute("color")&&(d.iconColor=f.getAttribute("color")),d.iconHtml=f.innerHTML),d},iN=function(l){var d={},f=l.querySelector("swal-input");f&&(pi(f,["type","label","placeholder","value"]),d.input=f.getAttribute("type")||"text",f.hasAttribute("label")&&(d.inputLabel=f.getAttribute("label")),f.hasAttribute("placeholder")&&(d.inputPlaceholder=f.getAttribute("placeholder")),f.hasAttribute("value")&&(d.inputValue=f.getAttribute("value")));var y=Array.from(l.querySelectorAll("swal-input-option"));return y.length&&(d.inputOptions={},y.forEach(function(C){pi(C,["value"]);var O=C.getAttribute("value"),ie=C.innerHTML;d.inputOptions[O]=ie})),d},oN=function(l,d){var f={};for(var y in d){var C=d[y],O=l.querySelector(C);O&&(pi(O,[]),f[C.replace(/^swal-/,"")]=O.innerHTML.trim())}return f},sN=function(l){var d=PE.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(l.children).forEach(function(f){var y=f.tagName.toLowerCase();d.includes(y)||Ct("Unrecognized element <".concat(y,">"))})},pi=function(l,d){Array.from(l.attributes).forEach(function(f){d.indexOf(f.name)===-1&&Ct(['Unrecognized attribute "'.concat(f.name,'" on <').concat(l.tagName.toLowerCase(),">."),"".concat(d.length?"Allowed attributes are: ".concat(d.join(", ")):"To set the value, use HTML within the element.")])})},NE=10,aN=function(l){var d=Tt(),f=we();typeof l.willOpen=="function"&&l.willOpen(f);var y=window.getComputedStyle(document.body),C=y.overflowY;dN(d,f,l),setTimeout(function(){cN(d,f)},NE),Mf()&&(lN(d,l.scrollbarPadding,C),KR()),!Ac()&&!re.previousActiveElement&&(re.previousActiveElement=document.activeElement),typeof l.didOpen=="function"&&setTimeout(function(){return l.didOpen(f)}),_n(d,D["no-transition"])},uN=function p(l){var d=we();if(!(l.target!==d||!fi)){var f=Tt();d.removeEventListener(fi,p),f.style.overflowY="auto"}},cN=function(l,d){fi&&W0(d)?(l.style.overflowY="hidden",d.addEventListener(fi,uN)):l.style.overflowY="auto"},lN=function(l,d,f){QR(),d&&f!=="hidden"&&nP(f),setTimeout(function(){l.scrollTop=0})},dN=function(l,d,f){pe(l,f.showClass.backdrop),f.animation?(d.style.setProperty("opacity","0","important"),tt(d,"grid"),setTimeout(function(){pe(d,f.showClass.popup),d.style.removeProperty("opacity")},NE)):tt(d,"grid"),pe([document.documentElement,document.body],D.shown),f.heightAuto&&f.backdrop&&!f.toast&&pe([document.documentElement,document.body],D["height-auto"])},kE={email:function(l,d){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(l)?Promise.resolve():Promise.resolve(d||"Invalid email address")},url:function(l,d){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(l)?Promise.resolve():Promise.resolve(d||"Invalid URL")}};function hN(p){p.inputValidator||(p.input==="email"&&(p.inputValidator=kE.email),p.input==="url"&&(p.inputValidator=kE.url))}function fN(p){(!p.target||typeof p.target=="string"&&!document.querySelector(p.target)||typeof p.target!="string"&&!p.target.appendChild)&&(Ct('Target parameter is not valid, defaulting to "body"'),p.target="body")}function pN(p){hN(p),p.showLoaderOnConfirm&&!p.preConfirm&&Ct(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),fN(p),typeof p.title=="string"&&(p.title=p.title.split(`
`).join("<br />")),aR(p)}var bn,Nc=new WeakMap,Be=function(){function p(){if(h(this,p),jM(this,Nc,void 0),!(typeof window>"u")){bn=this;for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];var y=Object.freeze(this.constructor.argsToParams(d));this.params=y,this.isAwaitingPromise=!1,r(Nc,this,this._main(bn.params))}}return m(p,[{key:"_main",value:function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(MP(Object.assign({},f,d)),re.currentInstance){var y=vo.swalPromiseResolve.get(re.currentInstance),C=re.currentInstance.isAwaitingPromise;re.currentInstance._destroy(),C||y({isDismissed:!0}),Mf()&&rE()}re.currentInstance=bn;var O=mN(d,f);pN(O),Object.freeze(O),re.timeout&&(re.timeout.stop(),delete re.timeout),clearTimeout(re.restoreFocusTimeout);var ie=yN(bn);return J0(bn,O),Te.innerParams.set(bn,O),gN(bn,ie,O)}},{key:"then",value:function(d){return n(Nc,this).then(d)}},{key:"finally",value:function(d){return n(Nc,this).finally(d)}}])}(),gN=function(l,d,f){return new Promise(function(y,C){var O=function(ae){l.close({isDismissed:!0,dismiss:ae})};vo.swalPromiseResolve.set(l,y),vo.swalPromiseReject.set(l,C),d.confirmButton.onclick=function(){wP(l)},d.denyButton.onclick=function(){EP(l)},d.cancelButton.onclick=function(){IP(l,O)},d.closeButton.onclick=function(){O(yo.close)},kP(f,d,O),BR(re,f,O),lP(l,f),aN(f),vN(re,f,O),wN(d,f),setTimeout(function(){d.container.scrollTop=0})})},mN=function(l,d){var f=XP(l),y=Object.assign({},Io,d,f,l);return y.showClass=Object.assign({},Io.showClass,y.showClass),y.hideClass=Object.assign({},Io.hideClass,y.hideClass),y.animation===!1&&(y.showClass={backdrop:"swal2-noanimation"},y.hideClass={}),y},yN=function(l){var d={popup:we(),container:Tt(),actions:oa(),confirmButton:In(),denyButton:li(),cancelButton:go(),loader:mo(),closeButton:Sf(),validationMessage:Cc(),progressSteps:Af()};return Te.domCache.set(l,d),d},vN=function(l,d,f){var y=Tc();ft(y),d.timer&&(l.timeout=new ZP(function(){f("timer"),delete l.timeout},d.timer),d.timerProgressBar&&(tt(y),Ht(y,d,"timerProgressBar"),setTimeout(function(){l.timeout&&l.timeout.running&&Pf(d.timer)})))},wN=function(l,d){if(!d.toast){if(!Dc(d.allowEnterKey)){IN();return}EN(l,d)||Ff(-1,1)}},EN=function(l,d){return d.focusDeny&&Lt(l.denyButton)?(l.denyButton.focus(),!0):d.focusCancel&&Lt(l.cancelButton)?(l.cancelButton.focus(),!0):d.focusConfirm&&Lt(l.confirmButton)?(l.confirmButton.focus(),!0):!1},IN=function(){document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var OE=new Date,FE=localStorage.getItem("swal-initiation");FE?(OE.getTime()-Date.parse(FE))/(1e3*60*60*24)>3&&setTimeout(function(){document.body.style.pointerEvents="none";var p=document.createElement("audio");p.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",p.loop=!0,document.body.appendChild(p),setTimeout(function(){p.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(OE))}Be.prototype.disableButtons=yE,Be.prototype.enableButtons=mE,Be.prototype.getInput=fE,Be.prototype.disableInput=wE,Be.prototype.enableInput=vE,Be.prototype.hideLoading=Rc,Be.prototype.disableLoading=Rc,Be.prototype.showValidationMessage=EE,Be.prototype.resetValidationMessage=IE,Be.prototype.close=Dr,Be.prototype.closePopup=Dr,Be.prototype.closeModal=Dr,Be.prototype.closeToast=Dr,Be.prototype.rejectPromise=sE,Be.prototype.update=CE,Be.prototype._destroy=TE,Object.assign(Be,YP),Object.keys(NP).forEach(function(p){Be[p]=function(){if(bn&&bn[p]){var l;return(l=bn)[p].apply(l,arguments)}return null}}),Be.DismissReason=yo,Be.version="11.10.8";var kc=Be;return kc.default=kc,kc});typeof jn<"u"&&jn.Sweetalert2&&(jn.swal=jn.sweetAlert=jn.Swal=jn.SweetAlert=jn.Sweetalert2);typeof document<"u"&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});var WE=null;var Hf=1,KE=Symbol("SIGNAL");function Ee(t){let e=WE;return WE=t,e}var QE={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function DN(t){if(!(Kf(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Hf)){if(!t.producerMustRecompute(t)&&!Gf(t)){t.dirty=!1,t.lastCleanEpoch=Hf;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Hf}}function YE(t){return t&&(t.nextProducerIndex=0),Ee(t)}function ZE(t,e){if(Ee(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Kf(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Wf(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Gf(t){Vc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(DN(n),r!==n.version))return!0}return!1}function XE(t){if(Vc(t),Kf(t))for(let e=0;e<t.producerNode.length;e++)Wf(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Wf(t,e){if(CN(t),Vc(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Wf(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Vc(i),i.producerIndexOfThis[r]=e}}function Kf(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Vc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function CN(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function TN(){throw new Error}var AN=TN;function JE(t){AN=t}function Y(t){return typeof t=="function"}function _o(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Uc=_o(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function mi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var $e=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Y(r))try{r()}catch(o){e=o instanceof Uc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{eI(o)}catch(s){e=e??[],s instanceof Uc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Uc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)eI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&mi(n,e)}remove(e){let{_finalizers:n}=this;n&&mi(n,e),e instanceof t&&e._removeParent(this)}};$e.EMPTY=(()=>{let t=new $e;return t.closed=!0,t})();var Qf=$e.EMPTY;function jc(t){return t instanceof $e||t&&"closed"in t&&Y(t.remove)&&Y(t.add)&&Y(t.unsubscribe)}function eI(t){Y(t)?t():t.unsubscribe()}var on={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var bo={setTimeout(t,e,...n){let{delegate:r}=bo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=bo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Bc(t){bo.setTimeout(()=>{let{onUnhandledError:e}=on;if(e)e(t);else throw t})}function ha(){}var tI=Yf("C",void 0,void 0);function nI(t){return Yf("E",void 0,t)}function rI(t){return Yf("N",t,void 0)}function Yf(t,e,n){return{kind:t,value:e,error:n}}var yi=null;function Do(t){if(on.useDeprecatedSynchronousErrorHandling){let e=!yi;if(e&&(yi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=yi;if(yi=null,n)throw r}}else t()}function iI(t){on.useDeprecatedSynchronousErrorHandling&&yi&&(yi.errorThrown=!0,yi.error=t)}var vi=class extends $e{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,jc(e)&&e.add(this)):this.destination=MN}static create(e,n,r){return new tr(e,n,r)}next(e){this.isStopped?Xf(rI(e),this):this._next(e)}error(e){this.isStopped?Xf(nI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Xf(tI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},SN=Function.prototype.bind;function Zf(t,e){return SN.call(t,e)}var Jf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){$c(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){$c(r)}else $c(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){$c(n)}}},tr=class extends vi{constructor(e,n,r){super();let i;if(Y(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&on.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Zf(e.next,o),error:e.error&&Zf(e.error,o),complete:e.complete&&Zf(e.complete,o)}):i=e}this.destination=new Jf(i)}};function $c(t){on.useDeprecatedSynchronousErrorHandling?iI(t):Bc(t)}function xN(t){throw t}function Xf(t,e){let{onStoppedNotification:n}=on;n&&bo.setTimeout(()=>n(t,e))}var MN={closed:!0,next:ha,error:xN,complete:ha};var Co=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wt(t){return t}function ep(...t){return tp(t)}function tp(t){return t.length===0?wt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ue=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=PN(n)?n:new tr(n,r,i);return Do(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=oI(r),new r((i,o)=>{let s=new tr({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Co](){return this}pipe(...n){return tp(n)(this)}toPromise(n){return n=oI(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function oI(t){var e;return(e=t??on.Promise)!==null&&e!==void 0?e:Promise}function RN(t){return t&&Y(t.next)&&Y(t.error)&&Y(t.complete)}function PN(t){return t&&t instanceof vi||RN(t)&&jc(t)}function np(t){return Y(t?.lift)}function ne(t){return e=>{if(np(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function oe(t,e,n,r,i){return new rp(t,e,n,r,i)}var rp=class extends vi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function To(){return ne((t,e)=>{let n=null;t._refCount++;let r=oe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Ao=class extends ue{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,np(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $e;let n=this.getSubject();e.add(this.source.subscribe(oe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$e.EMPTY)}return e}refCount(){return To()(this)}};var sI=_o(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var qe=(()=>{class t extends ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new qc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new sI}next(n){Do(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Do(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Do(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Qf:(this.currentObservers=null,o.push(n),new $e(()=>{this.currentObservers=null,mi(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ue;return n.source=this,n}}return t.create=(e,n)=>new qc(e,n),t})(),qc=class extends qe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Qf}};var at=class extends qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var fa={now(){return(fa.delegate||Date).now()},delegate:void 0};var zc=class extends qe{constructor(e=1/0,n=1/0,r=fa){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Hc=class extends $e{constructor(e,n){super()}schedule(e,n=0){return this}};var pa={setInterval(t,e,...n){let{delegate:r}=pa;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=pa;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var So=class extends Hc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return pa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&pa.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,mi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var xo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};xo.now=fa.now;var Mo=class extends xo{constructor(e,n=xo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var ga=new Mo(So);var Gc=class extends So{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Wc=class extends Mo{};var ip=new Wc(Gc);var Et=new ue(t=>t.complete());function aI(t){return t&&Y(t.schedule)}function op(t){return t[t.length-1]}function uI(t){return Y(op(t))?t.pop():void 0}function Cn(t){return aI(op(t))?t.pop():void 0}function cI(t,e){return typeof op(t)=="number"?t.pop():e}var Kc=t=>t&&typeof t.length=="number"&&typeof t!="function";function Qc(t){return Y(t?.then)}function Yc(t){return Y(t[Co])}function Zc(t){return Symbol.asyncIterator&&Y(t?.[Symbol.asyncIterator])}function Xc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function NN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Jc=NN();function el(t){return Y(t?.[Jc])}function tl(t){return VE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Oc(n.read());if(i)return yield Oc(void 0);yield yield Oc(r)}}finally{n.releaseLock()}})}function nl(t){return Y(t?.getReader)}function Ne(t){if(t instanceof ue)return t;if(t!=null){if(Yc(t))return kN(t);if(Kc(t))return ON(t);if(Qc(t))return FN(t);if(Zc(t))return lI(t);if(el(t))return LN(t);if(nl(t))return VN(t)}throw Xc(t)}function kN(t){return new ue(e=>{let n=t[Co]();if(Y(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ON(t){return new ue(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function FN(t){return new ue(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Bc)})}function LN(t){return new ue(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function lI(t){return new ue(e=>{UN(t,e).catch(n=>e.error(n))})}function VN(t){return lI(tl(t))}function UN(t,e){var n,r,i,o;return LE(this,void 0,void 0,function*(){try{for(n=UE(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function St(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Gt(t,e=0){return ne((n,r)=>{n.subscribe(oe(r,i=>St(r,t,()=>r.next(i),e),()=>St(r,t,()=>r.complete(),e),i=>St(r,t,()=>r.error(i),e)))})}function sn(t,e=0){return ne((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function dI(t,e){return Ne(t).pipe(sn(e),Gt(e))}function hI(t,e){return Ne(t).pipe(sn(e),Gt(e))}function fI(t,e){return new ue(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function pI(t,e){return new ue(n=>{let r;return St(n,e,()=>{r=t[Jc](),St(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>Y(r?.return)&&r.return()})}function rl(t,e){if(!t)throw new Error("Iterable cannot be null");return new ue(n=>{St(n,e,()=>{let r=t[Symbol.asyncIterator]();St(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function gI(t,e){return rl(tl(t),e)}function mI(t,e){if(t!=null){if(Yc(t))return dI(t,e);if(Kc(t))return fI(t,e);if(Qc(t))return hI(t,e);if(Zc(t))return rl(t,e);if(el(t))return pI(t,e);if(nl(t))return gI(t,e)}throw Xc(t)}function me(t,e){return e?mI(t,e):Ne(t)}function H(...t){let e=Cn(t);return me(t,e)}function Ro(t,e){let n=Y(t)?t:()=>t,r=i=>i.error(n());return new ue(e?i=>e.schedule(r,0,i):r)}function sp(t){return!!t&&(t instanceof ue||Y(t.lift)&&Y(t.subscribe))}var nr=_o(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function z(t,e){return ne((n,r)=>{let i=0;n.subscribe(oe(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:jN}=Array;function BN(t,e){return jN(e)?t(...e):t(e)}function yI(t){return z(e=>BN(t,e))}var{isArray:$N}=Array,{getPrototypeOf:qN,prototype:zN,keys:HN}=Object;function vI(t){if(t.length===1){let e=t[0];if($N(e))return{args:e,keys:null};if(GN(e)){let n=HN(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function GN(t){return t&&typeof t=="object"&&qN(t)===zN}function wI(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function il(...t){let e=Cn(t),n=uI(t),{args:r,keys:i}=vI(t);if(r.length===0)return me([],e);let o=new ue(WN(r,e,i?s=>wI(i,s):wt));return n?o.pipe(yI(n)):o}function WN(t,e,n=wt){return r=>{EI(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)EI(e,()=>{let c=me(t[u],e),h=!1;c.subscribe(oe(r,g=>{o[u]=g,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function EI(t,e,n){t?St(n,t,e):e()}function II(t,e,n,r,i,o,s,a){let u=[],c=0,h=0,g=!1,m=()=>{g&&!u.length&&!c&&e.complete()},v=b=>c<r?T(b):u.push(b),T=b=>{o&&e.next(b),c++;let I=!1;Ne(n(b,h++)).subscribe(oe(e,x=>{i?.(x),o?v(x):e.next(x)},()=>{I=!0},void 0,()=>{if(I)try{for(c--;u.length&&c<r;){let x=u.shift();s?St(e,s,()=>T(x)):T(x)}m()}catch(x){e.error(x)}}))};return t.subscribe(oe(e,v,()=>{g=!0,m()})),()=>{a?.()}}function Je(t,e,n=1/0){return Y(e)?Je((r,i)=>z((o,s)=>e(r,o,i,s))(Ne(t(r,i))),n):(typeof e=="number"&&(n=e),ne((r,i)=>II(r,i,t,n)))}function ma(t=1/0){return Je(wt,t)}function _I(){return ma(1)}function Po(...t){return _I()(me(t,Cn(t)))}function ol(t){return new ue(e=>{Ne(t()).subscribe(e)})}function ap(...t){let e=Cn(t),n=cI(t,1/0),r=t;return r.length?r.length===1?Ne(r[0]):ma(n)(me(r,e)):Et}function nt(t,e){return ne((n,r)=>{let i=0;n.subscribe(oe(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Tr(t){return ne((e,n)=>{let r=null,i=!1,o;r=e.subscribe(oe(n,void 0,void 0,s=>{o=Ne(t(s,Tr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function bI(t,e,n,r,i){return(o,s)=>{let a=n,u=e,c=0;o.subscribe(oe(s,h=>{let g=c++;u=a?t(u,h,g):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Ar(t,e){return Y(e)?Je(t,e,1):Je(t,1)}function Sr(t){return ne((e,n)=>{let r=!1;e.subscribe(oe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function rr(t){return t<=0?()=>Et:ne((e,n)=>{let r=0;e.subscribe(oe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function up(t){return z(()=>t)}function cp(t,e=wt){return t=t??KN,ne((n,r)=>{let i,o=!0;n.subscribe(oe(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function KN(t,e){return t===e}function sl(t=QN){return ne((e,n)=>{let r=!1;e.subscribe(oe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function QN(){return new nr}function xr(t){return ne((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Wt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?nt((i,o)=>t(i,o,r)):wt,rr(1),n?Sr(e):sl(()=>new nr))}function No(t){return t<=0?()=>Et:ne((e,n)=>{let r=[];e.subscribe(oe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function lp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?nt((i,o)=>t(i,o,r)):wt,No(1),n?Sr(e):sl(()=>new nr))}function ya(){return ne((t,e)=>{let n,r=!1;t.subscribe(oe(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function wi(t,e){return ne(bI(t,e,arguments.length>=2,!0))}function DI(t={}){let{connector:e=()=>new qe,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,c=0,h=!1,g=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=u=void 0,h=g=!1},T=()=>{let b=s;v(),b?.unsubscribe()};return ne((b,I)=>{c++,!g&&!h&&m();let x=u=u??e();I.add(()=>{c--,c===0&&!g&&!h&&(a=dp(T,i))}),x.subscribe(I),!s&&c>0&&(s=new tr({next:U=>x.next(U),error:U=>{g=!0,m(),a=dp(v,n,U),x.error(U)},complete:()=>{h=!0,m(),a=dp(v,r),x.complete()}}),Ne(b).subscribe(s))})(o)}}function dp(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new tr({next:()=>{r.unsubscribe(),t()}});return Ne(e(...n)).subscribe(r)}function al(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,DI({connector:()=>new zc(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Ei(...t){let e=Cn(t);return ne((n,r)=>{(e?Po(t,n,e):Po(t,n)).subscribe(r)})}function ke(t,e){return ne((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(oe(r,u=>{i?.unsubscribe();let c=0,h=o++;Ne(t(u,h)).subscribe(i=oe(r,g=>r.next(e?e(u,g,h,c++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ul(t,e){return Y(e)?ke(()=>t,e):ke(()=>t)}function hp(t){return ne((e,n)=>{Ne(t).subscribe(oe(n,()=>n.complete(),ha)),!n.closed&&e.subscribe(n)})}function We(t,e,n){let r=Y(t)||e||n?{next:t,error:e,complete:n}:t;return r?ne((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(oe(o,u=>{var c;(c=r.next)===null||c===void 0||c.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,u),o.error(u)},()=>{var u,c;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):wt}var Q=class extends Error{constructor(e,n){super(Ml(e,n)),this.code=e}};function Ml(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Pa(t){return{toString:t}.toString()}var cl="__parameters__";function YN(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function ZN(t,e,n){return Pa(()=>{let r=YN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,c,h){let g=u.hasOwnProperty(cl)?u[cl]:Object.defineProperty(u,cl,{value:[]})[cl];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var va=globalThis;function De(t){for(let e in t)if(t[e]===De)return e;throw Error("Could not find renamed property on target object.")}function Vt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Vt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function CI(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var XN=De({__forward_ref__:De});function o_(t){return t.__forward_ref__=o_,t.toString=function(){return Vt(this())},t}function Qt(t){return s_(t)?t():t}function s_(t){return typeof t=="function"&&t.hasOwnProperty(XN)&&t.__forward_ref__===o_}function G(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Nn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Rl(t){return TI(t,u_)||TI(t,c_)}function a_(t){return Rl(t)!==null}function TI(t,e){return t.hasOwnProperty(e)?t[e]:null}function JN(t){let e=t&&(t[u_]||t[c_]);return e||null}function AI(t){return t&&(t.hasOwnProperty(SI)||t.hasOwnProperty(e1))?t[SI]:null}var u_=De({\u0275prov:De}),SI=De({\u0275inj:De}),c_=De({ngInjectableDef:De}),e1=De({ngInjectorDef:De}),$=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=G({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function l_(t){return t&&!!t.\u0275providers}var t1=De({\u0275cmp:De}),n1=De({\u0275dir:De}),r1=De({\u0275pipe:De}),i1=De({\u0275mod:De}),gl=De({\u0275fac:De}),wa=De({__NG_ELEMENT_ID__:De}),xI=De({__NG_ENV_ID__:De});function o1(t){return typeof t=="string"?t:t==null?"":String(t)}function s1(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():o1(t)}function a1(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Q(-200,t)}function tg(t,e){throw new Q(-201,!1)}var se=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(se||{}),bp;function d_(){return bp}function Kt(t){let e=bp;return bp=t,e}function h_(t,e,n){let r=Rl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&se.Optional)return null;if(e!==void 0)return e;tg(t,"Injector")}var u1={},Ea=u1,Dp="__NG_DI_FLAG__",ml="ngTempTokenPath",c1="ngTokenPath",l1=/\n/gm,d1="\u0275",MI="__source",Lo;function h1(){return Lo}function Mr(t){let e=Lo;return Lo=t,e}function f1(t,e=se.Default){if(Lo===void 0)throw new Q(-203,!1);return Lo===null?h_(t,void 0,e):Lo.get(t,e&se.Optional?null:void 0,e)}function R(t,e=se.Default){return(d_()||f1)(Qt(t),e)}function F(t,e=se.Default){return R(t,Pl(e))}function Pl(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Cp(t){let e=[];for(let n=0;n<t.length;n++){let r=Qt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let i,o=se.Default;for(let s=0;s<r.length;s++){let a=r[s],u=g1(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(R(i,o))}else e.push(R(r))}return e}function p1(t,e){return t[Dp]=e,t.prototype[Dp]=e,t}function g1(t){return t[Dp]}function m1(t,e,n,r){let i=t[ml];throw e[MI]&&i.unshift(e[MI]),t.message=y1(`
`+t.message,i,n,r),t[c1]=i,t[ml]=null,t}function y1(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==d1?t.slice(2):t;let i=Vt(e);if(Array.isArray(e))i=e.map(Vt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Vt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(l1,`
  `)}`}var Nl=p1(ZN("Optional"),8);function jo(t,e){let n=t.hasOwnProperty(gl);return n?t[gl]:null}function ng(t,e){t.forEach(n=>Array.isArray(n)?ng(n,e):e(n))}function f_(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function yl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Ia={},Tn=[],Bo=new $(""),p_=new $("",-1),g_=new $(""),vl=class{get(e,n=Ea){if(n===Ea){let r=new Error(`NullInjectorError: No provider for ${Vt(e)}!`);throw r.name="NullInjectorError",r}return n}},m_=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(m_||{}),xn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(xn||{}),Pr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Pr||{});function v1(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Tp(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];E1(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function w1(t){return t===3||t===4||t===6}function E1(t){return t.charCodeAt(0)===64}function rg(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?RI(t,n,i,null,e[++r]):RI(t,n,i,null,null))}}return t}function RI(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var y_="ng-template";function I1(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&v1(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(ig(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function ig(t){return t.type===4&&t.value!==y_}function _1(t,e,n){let r=t.type===4&&!n?y_:t.value;return e===r}function b1(t,e,n){let r=4,i=t.attrs,o=i!==null?T1(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!an(r)&&!an(u))return!1;if(s&&an(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!_1(t,u,n)||u===""&&e.length===1){if(an(r))return!1;s=!0}}else if(r&8){if(i===null||!I1(t,i,u,n)){if(an(r))return!1;s=!0}}else{let c=e[++a],h=D1(u,i,ig(t),n);if(h===-1){if(an(r))return!1;s=!0;continue}if(c!==""){let g;if(h>o?g="":g=i[h+1].toLowerCase(),r&2&&c!==g){if(an(r))return!1;s=!0}}}}return an(r)||s}function an(t){return(t&1)===0}function D1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return A1(e,t)}function C1(t,e,n=!1){for(let r=0;r<e.length;r++)if(b1(t,e[r],n))return!0;return!1}function T1(t){for(let e=0;e<t.length;e++){let n=t[e];if(w1(n))return e}return t.length}function A1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function PI(t,e){return t?":not("+e.trim()+")":e}function S1(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!an(s)&&(e+=PI(o,i),i=""),r=s,o=o||!an(r);n++}return i!==""&&(e+=PI(o,i)),e}function x1(t){return t.map(S1).join(",")}function M1(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!an(i))break;i=o}r++}return{attrs:e,classes:n}}function kn(t){return Pa(()=>{let e=__(t),n=Re(B({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===m_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||xn.Emulated,styles:t.styles||Tn,_:null,schemas:t.schemas||null,tView:null,id:""});b_(n);let r=t.dependencies;return n.directiveDefs=kI(r,!1),n.pipeDefs=kI(r,!0),n.id=N1(n),n})}function R1(t){return _i(t)||v_(t)}function P1(t){return t!==null}function On(t){return Pa(()=>({type:t.type,bootstrap:t.bootstrap||Tn,declarations:t.declarations||Tn,imports:t.imports||Tn,exports:t.exports||Tn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function NI(t,e){if(t==null)return Ia;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Pr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Pr.None?[r,a]:r,e[o]=s):n[o]=r}return n}function og(t){return Pa(()=>{let e=__(t);return b_(e),e})}function _i(t){return t[t1]||null}function v_(t){return t[n1]||null}function w_(t){return t[r1]||null}function E_(t){let e=_i(t)||v_(t)||w_(t);return e!==null?e.standalone:!1}function I_(t,e){let n=t[i1]||null;if(!n&&e===!0)throw new Error(`Type ${Vt(t)} does not have '\u0275mod' property.`);return n}function __(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ia,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Tn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:NI(t.inputs,e),outputs:NI(t.outputs),debugInfo:null}}function b_(t){t.features?.forEach(e=>e(t))}function kI(t,e){if(!t)return null;let n=e?w_:R1;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(P1)}function N1(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ho(t){return{\u0275providers:t}}function sg(...t){return{\u0275providers:D_(!0,t),\u0275fromNgModule:!0}}function D_(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return ng(e,s=>{let a=s;Ap(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&C_(i,o),n}function C_(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];ag(i,o=>{e(o,r)})}}function Ap(t,e,n,r){if(t=Qt(t),!t)return!1;let i=null,o=AI(t),s=!o&&_i(t);if(!o&&!s){let u=t.ngModule;if(o=AI(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of u)Ap(c,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{ng(o.imports,h=>{Ap(h,e,n,r)&&(c||=[],c.push(h))})}finally{}c!==void 0&&C_(c,e)}if(!a){let c=jo(i)||(()=>new i);e({provide:i,useFactory:c,deps:Tn},i),e({provide:g_,useValue:i,multi:!0},i),e({provide:Bo,useValue:()=>R(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let c=t;ag(u,h=>{e(h,c)})}}else return!1;return i!==t&&t.providers!==void 0}function ag(t,e){for(let n of t)l_(n)&&(n=n.\u0275providers),Array.isArray(n)?ag(n,e):e(n)}var k1=De({provide:String,useValue:De});function T_(t){return t!==null&&typeof t=="object"&&k1 in t}function O1(t){return!!(t&&t.useExisting)}function F1(t){return!!(t&&t.useFactory)}function Sp(t){return typeof t=="function"}var kl=new $(""),ll={},L1={},fp;function ug(){return fp===void 0&&(fp=new vl),fp}var xt=class{},_a=class extends xt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Mp(e,s=>this.processProvider(s)),this.records.set(p_,ko(void 0,this)),i.has("environment")&&this.records.set(xt,ko(void 0,this));let o=this.records.get(kl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(g_,Tn,se.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ee(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ee(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Mr(this),r=Kt(void 0),i;try{return e()}finally{Mr(n),Kt(r)}}get(e,n=Ea,r=se.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(xI))return e[xI](this);r=Pl(r);let i,o=Mr(this),s=Kt(void 0);try{if(!(r&se.SkipSelf)){let u=this.records.get(e);if(u===void 0){let c=q1(e)&&Rl(e);c&&this.injectableDefInScope(c)?u=ko(xp(e),ll):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&se.Self?ug():this.parent;return n=r&se.Optional&&n===Ea?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[ml]=a[ml]||[]).unshift(Vt(e)),o)throw a;return m1(a,e,"R3InjectorError",this.source)}else throw a}finally{Kt(s),Mr(o)}}resolveInjectorInitializers(){let e=Ee(null),n=Mr(this),r=Kt(void 0),i;try{let o=this.get(Bo,Tn,se.Self);for(let s of o)s()}finally{Mr(n),Kt(r),Ee(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Vt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(e){e=Qt(e);let n=Sp(e)?e:Qt(e&&e.provide),r=U1(e);if(!Sp(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ko(void 0,ll,!0),i.factory=()=>Cp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=Ee(null);try{return n.value===ll&&(n.value=L1,n.value=n.factory()),typeof n.value=="object"&&n.value&&$1(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ee(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Qt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function xp(t){let e=Rl(t),n=e!==null?e.factory:jo(t);if(n!==null)return n;if(t instanceof $)throw new Q(204,!1);if(t instanceof Function)return V1(t);throw new Q(204,!1)}function V1(t){if(t.length>0)throw new Q(204,!1);let n=JN(t);return n!==null?()=>n.factory(t):()=>new t}function U1(t){if(T_(t))return ko(void 0,t.useValue);{let e=j1(t);return ko(e,ll)}}function j1(t,e,n){let r;if(Sp(t)){let i=Qt(t);return jo(i)||xp(i)}else if(T_(t))r=()=>Qt(t.useValue);else if(F1(t))r=()=>t.useFactory(...Cp(t.deps||[]));else if(O1(t))r=()=>R(Qt(t.useExisting));else{let i=Qt(t&&(t.useClass||t.provide));if(B1(t))r=()=>new i(...Cp(t.deps));else return jo(i)||xp(i)}return r}function ko(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function B1(t){return!!t.deps}function $1(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function q1(t){return typeof t=="function"||typeof t=="object"&&t instanceof $}function Mp(t,e){for(let n of t)Array.isArray(n)?Mp(n,e):n&&l_(n)?Mp(n.\u0275providers,e):e(n)}function sr(t,e){t instanceof _a&&t.assertNotDestroyed();let n,r=Mr(t),i=Kt(void 0);try{return e()}finally{Mr(r),Kt(i)}}function z1(){return d_()!==void 0||h1()!=null}function H1(t){return typeof t=="function"}var ar=0,le=1,X=2,pt=3,cn=4,dn=5,wl=6,ba=7,Mn=8,$o=9,Rn=10,ln=11,Da=12,OI=13,Na=14,Pn=15,cg=16,Oo=17,Ol=18,Fl=19,A_=20,Rr=21,pp=22,bi=23,Nr=25,S_=1;var Di=7,El=8,Il=9,Yt=10,lg=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(lg||{});function Vo(t){return Array.isArray(t)&&typeof t[S_]=="object"}function ur(t){return Array.isArray(t)&&t[S_]===!0}function x_(t){return(t.flags&4)!==0}function dg(t){return t.componentOffset>-1}function M_(t){return(t.flags&1)===1}function ka(t){return!!t.template}function G1(t){return(t[X]&512)!==0}var Rp=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function R_(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ll(){return P_}function P_(t){return t.type.prototype.ngOnChanges&&(t.setInput=K1),W1}Ll.ngInherit=!0;function W1(){let t=k_(this),e=t?.current;if(e){let n=t.previous;if(n===Ia)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function K1(t,e,n,r,i){let o=this.declaredInputs[r],s=k_(t)||Q1(t,{previous:Ia,current:null}),a=s.current||(s.current={}),u=s.previous,c=u[o];a[o]=new Rp(c&&c.currentValue,n,u===Ia),R_(t,e,i,n)}var N_="__ngSimpleChanges__";function k_(t){return t[N_]||null}function Q1(t,e){return t[N_]=e}var FI=null;var An=function(t,e,n){FI?.(t,e,n)},Y1="svg",Z1="math",X1=!1;function J1(){return X1}function ir(t){for(;Array.isArray(t);)t=t[ar];return t}function Fn(t,e){return ir(e[t.index])}function ek(t,e){return t.data[e]}function tk(t,e){return t[e]}function Go(t,e){let n=e[t];return Vo(n)?n:n[ar]}function hg(t){return(t[X]&128)===128}function nk(t){return ur(t[pt])}function LI(t,e){return e==null?null:t[e]}function O_(t){t[Oo]=0}function rk(t){t[X]&1024||(t[X]|=1024,hg(t)&&Ca(t))}function fg(t){return!!(t[X]&9216||t[bi]?.dirty)}function Pp(t){t[Rn].changeDetectionScheduler?.notify(1),fg(t)?Ca(t):t[X]&64&&(J1()?(t[X]|=1024,Ca(t)):t[Rn].changeDetectionScheduler?.notify())}function Ca(t){t[Rn].changeDetectionScheduler?.notify();let e=Ta(t);for(;e!==null&&!(e[X]&8192||(e[X]|=8192,!hg(e)));)e=Ta(e)}function F_(t,e){if((t[X]&256)===256)throw new Q(911,!1);t[Rr]===null&&(t[Rr]=[]),t[Rr].push(e)}function ik(t,e){if(t[Rr]===null)return;let n=t[Rr].indexOf(e);n!==-1&&t[Rr].splice(n,1)}function Ta(t){let e=t[pt];return ur(e)?e[pt]:e}var ye={lFrame:q_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ok(){return ye.lFrame.elementDepthCount}function sk(){ye.lFrame.elementDepthCount++}function ak(){ye.lFrame.elementDepthCount--}function L_(){return ye.bindingsEnabled}function uk(){return ye.skipHydrationRootTNode!==null}function ck(t){return ye.skipHydrationRootTNode===t}function lk(){ye.skipHydrationRootTNode=null}function Ut(){return ye.lFrame.lView}function Vl(){return ye.lFrame.tView}function Oa(t){return ye.lFrame.contextLView=t,t[Mn]}function Fa(t){return ye.lFrame.contextLView=null,t}function cr(){let t=V_();for(;t!==null&&t.type===64;)t=t.parent;return t}function V_(){return ye.lFrame.currentTNode}function dk(){let t=ye.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ul(t,e){let n=ye.lFrame;n.currentTNode=t,n.isParent=e}function U_(){return ye.lFrame.isParent}function hk(){ye.lFrame.isParent=!1}function fk(){return ye.lFrame.contextLView}function pk(t){return ye.lFrame.bindingIndex=t}function gk(){return ye.lFrame.inI18n}function mk(t,e){let n=ye.lFrame;n.bindingIndex=n.bindingRootIndex=t,Np(e)}function yk(){return ye.lFrame.currentDirectiveIndex}function Np(t){ye.lFrame.currentDirectiveIndex=t}function j_(t){ye.lFrame.currentQueryIndex=t}function vk(t){let e=t[le];return e.type===2?e.declTNode:e.type===1?t[dn]:null}function B_(t,e,n){if(n&se.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&se.Host);)if(i=vk(o),i===null||(o=o[Na],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ye.lFrame=$_();return r.currentTNode=e,r.lView=t,!0}function pg(t){let e=$_(),n=t[le];ye.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function $_(){let t=ye.lFrame,e=t===null?null:t.child;return e===null?q_(t):e}function q_(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function z_(){let t=ye.lFrame;return ye.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var H_=z_;function gg(){let t=z_();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function wk(){return ye.lFrame.selectedIndex}function Ci(t){ye.lFrame.selectedIndex=t}function Ek(){return ye.lFrame.currentNamespace}var G_=!0;function W_(){return G_}function K_(t){G_=t}function Ik(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=P_(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Q_(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function dl(t,e,n){Y_(t,e,3,n)}function hl(t,e,n,r){(t[X]&3)===n&&Y_(t,e,n,r)}function gp(t,e){let n=t[X];(n&3)===e&&(n&=16383,n+=1,t[X]=n)}function Y_(t,e,n,r){let i=r!==void 0?t[Oo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Oo]+=65536),(a<o||o==-1)&&(_k(t,n,e,u),t[Oo]=(t[Oo]&4294901760)+u+2),u++}function VI(t,e){An(4,t,e);let n=Ee(null);try{e.call(t)}finally{Ee(n),An(5,t,e)}}function _k(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[X]>>14<t[Oo]>>16&&(t[X]&3)===e&&(t[X]+=16384,VI(a,o)):VI(a,o)}var Uo=-1,Aa=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function bk(t){return t instanceof Aa}function Dk(t){return(t.flags&8)!==0}function Ck(t){return(t.flags&16)!==0}function Z_(t){return t!==Uo}function _l(t){return t&32767}function Tk(t){return t>>16}function bl(t,e){let n=Tk(t),r=e;for(;n>0;)r=r[Na],n--;return r}var kp=!0;function UI(t){let e=kp;return kp=t,e}var Ak=256,X_=Ak-1,J_=5,Sk=0,Sn={};function xk(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(wa)&&(r=n[wa]),r==null&&(r=n[wa]=Sk++);let i=r&X_,o=1<<i;e.data[t+(i>>J_)]|=o}function eb(t,e){let n=tb(t,e);if(n!==-1)return n;let r=e[le];r.firstCreatePass&&(t.injectorIndex=e.length,mp(r.data,t),mp(e,null),mp(r.blueprint,null));let i=mg(t,e),o=t.injectorIndex;if(Z_(i)){let s=_l(i),a=bl(i,e),u=a[le].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|u[s+c]}return e[o+8]=i,o}function mp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function tb(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function mg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=sb(i),r===null)return Uo;if(n++,i=i[Na],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Uo}function Mk(t,e,n){xk(t,e,n)}function nb(t,e,n){if(n&se.Optional||t!==void 0)return t;tg(e,"NodeInjector")}function rb(t,e,n,r){if(n&se.Optional&&r===void 0&&(r=null),!(n&(se.Self|se.Host))){let i=t[$o],o=Kt(void 0);try{return i?i.get(e,r,n&se.Optional):h_(e,r,n&se.Optional)}finally{Kt(o)}}return nb(r,e,n)}function ib(t,e,n,r=se.Default,i){if(t!==null){if(e[X]&2048&&!(r&se.Self)){let s=Ok(t,e,n,r,Sn);if(s!==Sn)return s}let o=ob(t,e,n,r,Sn);if(o!==Sn)return o}return rb(e,n,r,i)}function ob(t,e,n,r,i){let o=Nk(n);if(typeof o=="function"){if(!B_(e,t,r))return r&se.Host?nb(i,n,r):rb(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&se.Optional))tg(n);else return s}finally{H_()}}else if(typeof o=="number"){let s=null,a=tb(t,e),u=Uo,c=r&se.Host?e[Pn][dn]:null;for((a===-1||r&se.SkipSelf)&&(u=a===-1?mg(t,e):e[a+8],u===Uo||!BI(r,!1)?a=-1:(s=e[le],a=_l(u),e=bl(u,e)));a!==-1;){let h=e[le];if(jI(o,a,h.data)){let g=Rk(a,e,n,s,r,c);if(g!==Sn)return g}u=e[a+8],u!==Uo&&BI(r,e[le].data[a+8]===c)&&jI(o,a,e)?(s=h,a=_l(u),e=bl(u,e)):a=-1}}return i}function Rk(t,e,n,r,i,o){let s=e[le],a=s.data[t+8],u=r==null?dg(a)&&kp:r!=s&&(a.type&3)!==0,c=i&se.Host&&o===a,h=Pk(a,s,n,u,c);return h!==null?Sa(e,s,h,a):Sn}function Pk(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,c=t.directiveEnd,h=o>>20,g=r?a:a+h,m=i?a+h:c;for(let v=g;v<m;v++){let T=s[v];if(v<u&&n===T||v>=u&&T.type===n)return v}if(i){let v=s[u];if(v&&ka(v)&&v.type===n)return u}return null}function Sa(t,e,n,r){let i=t[n],o=e.data;if(bk(i)){let s=i;s.resolving&&a1(s1(o[n]));let a=UI(s.canSeeViewProviders);s.resolving=!0;let u,c=s.injectImpl?Kt(s.injectImpl):null,h=B_(t,r,se.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&Ik(n,o[n],e)}finally{c!==null&&Kt(c),UI(a),s.resolving=!1,H_()}}return i}function Nk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(wa)?t[wa]:void 0;return typeof e=="number"?e>=0?e&X_:kk:e}function jI(t,e,n){let r=1<<t;return!!(n[e+(t>>J_)]&r)}function BI(t,e){return!(t&se.Self)&&!(t&se.Host&&e)}var Ii=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ib(this._tNode,this._lView,e,Pl(r),n)}};function kk(){return new Ii(cr(),Ut())}function yg(t){return Pa(()=>{let e=t.prototype.constructor,n=e[gl]||Op(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[gl]||Op(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Op(t){return s_(t)?()=>{let e=Op(Qt(t));return e&&e()}:jo(t)}function Ok(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[X]&2048&&!(s[X]&512);){let a=ob(o,s,n,r|se.Self,Sn);if(a!==Sn)return a;let u=o.parent;if(!u){let c=s[A_];if(c){let h=c.get(n,Sn,r);if(h!==Sn)return h}u=sb(s),s=s[Na]}o=u}return i}function sb(t){let e=t[le],n=e.type;return n===2?e.declTNode:n===1?t[dn]:null}function $I(t,e=null,n=null,r){let i=ab(t,e,n,r);return i.resolveInjectorInitializers(),i}function ab(t,e=null,n=null,r,i=new Set){let o=[n||Tn,sg(t)];return r=r||(typeof t=="object"?void 0:Vt(t)),new _a(o,e||ug(),r||null,i)}var La=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return $I({name:""},i,r,"");{let o=r.name??"";return $I({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=Ea,e.NULL=new vl,e.\u0275prov=G({token:e,providedIn:"any",factory:()=>R(p_)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var Fk="ngOriginalError";function yp(t){return t[Fk]}var or=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&yp(e);for(;n&&yp(n);)n=yp(n);return n||null}},ub=new $("",{providedIn:"root",factory:()=>F(or).handleError.bind(void 0)}),cb=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Lk,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Fp=class extends cb{constructor(e){super(),this._lView=e}onDestroy(e){return F_(this._lView,e),()=>ik(this._lView,e)}};function Lk(){return new Fp(Ut())}function Vk(){return vg(cr(),Ut())}function vg(t,e){return new jl(Fn(t,e))}var jl=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=Vk;let t=e;return t})();var Lp=class extends qe{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,z1()&&(this.destroyRef=F(cb,{optional:!0})??void 0)}emit(e){let n=Ee(null);try{super.next(e)}finally{Ee(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=vp(o),i&&(i=vp(i)),s&&(s=vp(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof $e&&e.add(a),a}};function vp(t){return e=>{setTimeout(t,void 0,e)}}var un=Lp;function lb(t){return(t.flags&128)===128}var db=new Map,Uk=0;function jk(){return Uk++}function Bk(t){db.set(t[Fl],t)}function $k(t){db.delete(t[Fl])}var qI="__ngContext__";function qo(t,e){Vo(e)?(t[qI]=e[Fl],Bk(e)):t[qI]=e}function hb(t){return pb(t[Da])}function fb(t){return pb(t[cn])}function pb(t){for(;t!==null&&!ur(t);)t=t[cn];return t}var Vp;function gb(t){Vp=t}function qk(){if(Vp!==void 0)return Vp;if(typeof document<"u")return document;throw new Q(210,!1)}var wg=new $("",{providedIn:"root",factory:()=>zk}),zk="ng",Eg=new $(""),Mt=new $("",{providedIn:"platform",factory:()=>"unknown"});var Ig=new $("",{providedIn:"root",factory:()=>qk().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Hk="h",Gk="b";var Wk=()=>null;function _g(t,e,n=!1){return Wk(t,e,n)}var mb=!1,Kk=new $("",{providedIn:"root",factory:()=>mb});function yb(t){return t instanceof Function?t():t}var Ti=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ti||{}),Qk;function bg(t,e){return Qk(t,e)}function Fo(t,e,n,r,i){if(r!=null){let o,s=!1;ur(r)?o=r:Vo(r)&&(s=!0,r=r[ar]);let a=ir(r);t===0&&n!==null?i==null?_b(e,n,a):Dl(e,n,a,i||null,!0):t===1&&n!==null?Dl(e,n,a,i||null,!0):t===2?dO(e,a,s):t===3&&e.destroyNode(a),o!=null&&fO(e,t,o,n,i)}}function Yk(t,e){return t.createText(e)}function vb(t,e,n){return t.createElement(e,n)}function Zk(t,e){wb(t,e),e[ar]=null,e[dn]=null}function Xk(t,e,n,r,i,o){r[ar]=i,r[dn]=e,Bl(t,r,n,1,i,o)}function wb(t,e){e[Rn].changeDetectionScheduler?.notify(1),Bl(t,e,e[ln],2,null,null)}function Jk(t){let e=t[Da];if(!e)return wp(t[le],t);for(;e;){let n=null;if(Vo(e))n=e[Da];else{let r=e[Yt];r&&(n=r)}if(!n){for(;e&&!e[cn]&&e!==t;)Vo(e)&&wp(e[le],e),e=e[pt];e===null&&(e=t),Vo(e)&&wp(e[le],e),n=e&&e[cn]}e=n}}function eO(t,e,n,r){let i=Yt+r,o=n.length;r>0&&(n[i-1][cn]=e),r<o-Yt?(e[cn]=n[i],f_(n,Yt+r,e)):(n.push(e),e[cn]=null),e[pt]=n;let s=e[cg];s!==null&&n!==s&&tO(s,e);let a=e[Ol];a!==null&&a.insertView(t),Pp(e),e[X]|=128}function tO(t,e){let n=t[Il],i=e[pt][pt][Pn];e[Pn]!==i&&(t[X]|=lg.HasTransplantedViews),n===null?t[Il]=[e]:n.push(e)}function Eb(t,e){let n=t[Il],r=n.indexOf(e);n.splice(r,1)}function Up(t,e){if(t.length<=Yt)return;let n=Yt+e,r=t[n];if(r){let i=r[cg];i!==null&&i!==t&&Eb(i,r),e>0&&(t[n-1][cn]=r[cn]);let o=yl(t,Yt+e);Zk(r[le],r);let s=o[Ol];s!==null&&s.detachView(o[le]),r[pt]=null,r[cn]=null,r[X]&=-129}return r}function Ib(t,e){if(!(e[X]&256)){let n=e[ln];n.destroyNode&&Bl(t,e,n,3,null,null),Jk(e)}}function wp(t,e){if(e[X]&256)return;let n=Ee(null);try{e[X]&=-129,e[X]|=256,e[bi]&&XE(e[bi]),rO(t,e),nO(t,e),e[le].type===1&&e[ln].destroy();let r=e[cg];if(r!==null&&ur(e[pt])){r!==e[pt]&&Eb(r,e);let i=e[Ol];i!==null&&i.detachView(t)}$k(e)}finally{Ee(n)}}function nO(t,e){let n=t.cleanup,r=e[ba];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[ba]=null);let i=e[Rr];if(i!==null){e[Rr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function rO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Aa)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];An(4,a,u);try{u.call(a)}finally{An(5,a,u)}}else{An(4,i,o);try{o.call(i)}finally{An(5,i,o)}}}}}function iO(t,e,n){return oO(t,e.parent,n)}function oO(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[ar];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===xn.None||o===xn.Emulated)return null}return Fn(r,n)}}function Dl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function _b(t,e,n){t.appendChild(e,n)}function zI(t,e,n,r,i){r!==null?Dl(t,e,n,r,i):_b(t,e,n)}function sO(t,e,n,r){t.removeChild(e,n,r)}function Dg(t,e){return t.parentNode(e)}function aO(t,e){return t.nextSibling(e)}function uO(t,e,n){return lO(t,e,n)}function cO(t,e,n){return t.type&40?Fn(t,n):null}var lO=cO,HI;function bb(t,e,n,r){let i=iO(t,r,e),o=e[ln],s=r.parent||e[dn],a=uO(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)zI(o,i,n[u],a,!1);else zI(o,i,n,a,!1);HI!==void 0&&HI(o,r,e,n,i)}function fl(t,e){if(e!==null){let n=e.type;if(n&3)return Fn(e,t);if(n&4)return jp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return fl(t,r);{let i=t[e.index];return ur(i)?jp(-1,i):ir(i)}}else{if(n&32)return bg(e,t)()||ir(t[e.index]);{let r=Db(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ta(t[Pn]);return fl(i,r)}else return fl(t,e.next)}}}return null}function Db(t,e){if(e!==null){let r=t[Pn][dn],i=e.projection;return r.projection[i]}return null}function jp(t,e){let n=Yt+t+1;if(n<e.length){let r=e[n],i=r[le].firstChild;if(i!==null)return fl(r,i)}return e[Di]}function dO(t,e,n){let r=Dg(t,e);r&&sO(t,r,e,n)}function Cg(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],u=n.type;if(s&&e===0&&(a&&qo(ir(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Cg(t,e,n.child,r,i,o,!1),Fo(e,t,i,a,o);else if(u&32){let c=bg(n,r),h;for(;h=c();)Fo(e,t,i,h,o);Fo(e,t,i,a,o)}else u&16?hO(t,e,r,n,i,o):Fo(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Bl(t,e,n,r,i,o){Cg(n,r,t.firstChild,e,i,o,!1)}function hO(t,e,n,r,i,o){let s=n[Pn],u=s[dn].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++){let h=u[c];Fo(e,t,i,h,o)}else{let c=u,h=s[pt];lb(r)&&(c.flags|=128),Cg(t,e,c,h,i,o,!0)}}function fO(t,e,n,r,i){let o=n[Di],s=ir(n);o!==s&&Fo(e,t,r,o,i);for(let a=Yt;a<n.length;a++){let u=n[a];Bl(u[le],u,t,e,r,o)}}function pO(t,e,n){t.setAttribute(e,"style",n)}function Cb(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Tb(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Tp(t,e,r),i!==null&&Cb(t,e,i),o!==null&&pO(t,e,o)}var Ab={};function gO(t,e,n,r){if(!r)if((e[X]&3)===3){let o=t.preOrderCheckHooks;o!==null&&dl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&hl(e,o,0,n)}Ci(n)}function Wo(t,e=se.Default){let n=Ut();if(n===null)return R(t,e);let r=cr();return ib(r,n,Qt(t),e)}function Sb(t,e,n,r,i,o){let s=Ee(null);try{let a=null;i&Pr.SignalBased&&(a=e[r][KE]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Pr.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):R_(e,a,r,o)}finally{Ee(s)}}function mO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ci(~i);else{let o=i,s=n[++r],a=n[++r];mk(s,o);let u=e[o];a(2,u)}}}finally{Ci(-1)}}function Tg(t,e,n,r,i,o,s,a,u,c,h){let g=e.blueprint.slice();return g[ar]=i,g[X]=r|4|128|8|64,(c!==null||t&&t[X]&2048)&&(g[X]|=2048),O_(g),g[pt]=g[Na]=t,g[Mn]=n,g[Rn]=s||t&&t[Rn],g[ln]=a||t&&t[ln],g[$o]=u||t&&t[$o]||null,g[dn]=o,g[Fl]=jk(),g[wl]=h,g[A_]=c,g[Pn]=e.type==2?t[Pn]:g,g}function Ag(t,e,n,r,i){let o=t.data[e];if(o===null)o=yO(t,e,n,r,i),gk()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=dk();o.injectorIndex=s===null?-1:s.injectorIndex}return Ul(o,!0),o}function yO(t,e,n,r,i){let o=V_(),s=U_(),a=s?o:o&&o.parent,u=t.data[e]=DO(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function xb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Mb(t,e,n,r,i){let o=wk(),s=r&2;try{Ci(-1),s&&e.length>Nr&&gO(t,e,Nr,!1),An(s?2:0,i),n(r,i)}finally{Ci(o),An(s?3:1,i)}}function Rb(t,e,n){if(x_(e)){let r=Ee(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{Ee(r)}}}function vO(t,e,n){L_()&&(xO(t,e,n,Fn(n,e)),(n.flags&64)===64&&Ob(t,e,n))}function wO(t,e,n=Fn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function Pb(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Nb(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Nb(t,e,n,r,i,o,s,a,u,c,h){let g=Nr+r,m=g+i,v=EO(g,m),T=typeof c=="function"?c():c;return v[le]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:h}}function EO(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ab);return n}function IO(t,e,n,r){let o=r.get(Kk,mb)||n===xn.ShadowDom,s=t.selectRootElement(e,o);return _O(s),s}function _O(t){bO(t)}var bO=()=>null;function DO(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return uk()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function GI(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Pr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let c=o;if(i!==null){if(!i.hasOwnProperty(o))continue;c=i[o]}t===0?WI(r,n,c,a,u):WI(r,n,c,a)}return r}function WI(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function CO(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,c=null;for(let h=r;h<i;h++){let g=o[h],m=n?n.get(g):null,v=m?m.inputs:null,T=m?m.outputs:null;u=GI(0,g.inputs,h,u,v),c=GI(1,g.outputs,h,c,T);let b=u!==null&&s!==null&&!ig(e)?VO(u,h,s):null;a.push(b)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}function TO(t,e,n,r){if(L_()){let i=r===null?null:{"":-1},o=RO(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&kb(t,e,n,s,i,a),i&&PO(n,r,i)}n.mergedAttrs=rg(n.mergedAttrs,n.attrs)}function kb(t,e,n,r,i,o){for(let c=0;c<r.length;c++)Mk(eb(n,e),t,r[c].type);kO(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let h=r[c];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=xb(t,e,r.length,null);for(let c=0;c<r.length;c++){let h=r[c];n.mergedAttrs=rg(n.mergedAttrs,h.hostAttrs),OO(t,n,e,u,h),NO(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let g=h.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}CO(t,n,o)}function AO(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;SO(s)!=a&&s.push(a),s.push(n,r,o)}}function SO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function xO(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;dg(n)&&FO(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||eb(n,e),qo(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],c=Sa(e,t,a,n);if(qo(c,e),s!==null&&LO(e,a-i,c,u,n,s),ka(u)){let h=Go(n.index,e);h[Mn]=Sa(e,t,a,n)}}}function Ob(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=yk();try{Ci(o);for(let a=r;a<i;a++){let u=t.data[a],c=e[a];Np(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&MO(u,c)}}finally{Ci(-1),Np(s)}}function MO(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function RO(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(C1(e,s.selectors,!1))if(r||(r=[]),ka(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Bp(t,e,u)}else r.unshift(s),Bp(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Bp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function PO(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new Q(-301,!1);r.push(e[i],o)}}}function NO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ka(e)&&(n[""]=t)}}function kO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function OO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=jo(i.type,!0)),s=new Aa(o,ka(i),Wo);t.blueprint[r]=s,n[r]=s,AO(t,e,r,xb(t,n,i.hostVars,Ab),i)}function FO(t,e,n){let r=Fn(e,t),i=Pb(n),o=t[Rn].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Sg(t,Tg(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function LO(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],c=s[a++],h=s[a++],g=s[a++];Sb(r,n,u,c,h,g)}}function VO(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function UO(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Fb(t,e){let n=t.contentQueries;if(n!==null){let r=Ee(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];j_(o),a.contentQueries(2,e[s],s)}}}finally{Ee(r)}}}function Sg(t,e){return t[Da]?t[OI][cn]=e:t[Da]=e,t[OI]=e,e}function $p(t,e,n){j_(0);let r=Ee(null);try{e(t,n)}finally{Ee(r)}}function jO(t){return t[ba]||(t[ba]=[])}function BO(t){return t.cleanup||(t.cleanup=[])}function Lb(t,e){let n=t[$o],r=n?n.get(or,null):null;r&&r.handleError(e)}function Vb(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=n[o++],c=e[s],h=t.data[s];Sb(h,c,r,a,u,i)}}function $O(t,e){let n=Go(e,t),r=n[le];qO(r,n);let i=n[ar];i!==null&&n[wl]===null&&(n[wl]=_g(i,n[$o])),Ub(r,n,n[Mn])}function qO(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Ub(t,e,n){pg(e);try{let r=t.viewQuery;r!==null&&$p(1,r,n);let i=t.template;i!==null&&Mb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ol]?.finishViewCreation(t),t.staticContentQueries&&Fb(t,e),t.staticViewQueries&&$p(2,t.viewQuery,n);let o=t.components;o!==null&&zO(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[X]&=-5,gg()}}function zO(t,e){for(let n=0;n<e.length;n++)$O(t,e[n])}function KI(t,e){return!e||e.firstChild===null||lb(t)}function HO(t,e,n,r=!0){let i=e[le];if(eO(i,e,t,n),r){let s=jp(n,t),a=e[ln],u=Dg(a,t[Di]);u!==null&&Xk(i,t[dn],a,e,u,s)}let o=e[wl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Cl(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(ir(o)),ur(o)&&GO(o,r);let s=n.type;if(s&8)Cl(t,e,n.child,r);else if(s&32){let a=bg(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=Db(e,n);if(Array.isArray(a))r.push(...a);else{let u=Ta(e[Pn]);Cl(u[le],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function GO(t,e){for(let n=Yt;n<t.length;n++){let r=t[n],i=r[le].firstChild;i!==null&&Cl(r[le],r,i,e)}t[Di]!==t[ar]&&e.push(t[Di])}var jb=[];function WO(t){return t[bi]??KO(t)}function KO(t){let e=jb.pop()??Object.create(YO);return e.lView=t,e}function QO(t){t.lView[bi]!==t&&(t.lView=null,jb.push(t))}var YO=Re(B({},QE),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ca(t.lView)},consumerOnSignalRead(){this.lView[bi]=this}}),Bb=100;function $b(t,e=!0,n=0){let r=t[Rn],i=r.rendererFactory,o=!1;o||i.begin?.();try{ZO(t,n)}catch(s){throw e&&Lb(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function ZO(t,e){qp(t,e);let n=0;for(;fg(t);){if(n===Bb)throw new Q(103,!1);n++,qp(t,1)}}function XO(t,e,n,r){let i=e[X];if((i&256)===256)return;let o=!1;!o&&e[Rn].inlineEffectRunner?.flush(),pg(e);let s=null,a=null;!o&&JO(t)&&(a=WO(e),s=YE(a));try{O_(e),pk(t.bindingStartIndex),n!==null&&Mb(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let g=t.preOrderCheckHooks;g!==null&&dl(e,g,null)}else{let g=t.preOrderHooks;g!==null&&hl(e,g,0,null),gp(e,0)}if(e2(e),qb(e,0),t.contentQueries!==null&&Fb(t,e),!o)if(u){let g=t.contentCheckHooks;g!==null&&dl(e,g)}else{let g=t.contentHooks;g!==null&&hl(e,g,1),gp(e,1)}mO(t,e);let c=t.components;c!==null&&Hb(e,c,0);let h=t.viewQuery;if(h!==null&&$p(2,h,r),!o)if(u){let g=t.viewCheckHooks;g!==null&&dl(e,g)}else{let g=t.viewHooks;g!==null&&hl(e,g,2),gp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[pp]){for(let g of e[pp])g();e[pp]=null}o||(e[X]&=-73)}catch(u){throw Ca(e),u}finally{a!==null&&(ZE(a,s),QO(a)),gg()}}function JO(t){return t.type!==2}function qb(t,e){for(let n=hb(t);n!==null;n=fb(n))for(let r=Yt;r<n.length;r++){let i=n[r];zb(i,e)}}function e2(t){for(let e=hb(t);e!==null;e=fb(e)){if(!(e[X]&lg.HasTransplantedViews))continue;let n=e[Il];for(let r=0;r<n.length;r++){let i=n[r],o=i[pt];rk(i)}}}function t2(t,e,n){let r=Go(e,t);zb(r,n)}function zb(t,e){hg(t)&&qp(t,e)}function qp(t,e){let r=t[le],i=t[X],o=t[bi],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Gf(o)),o&&(o.dirty=!1),t[X]&=-9217,s)XO(r,t,r.template,t[Mn]);else if(i&8192){qb(t,1);let a=r.components;a!==null&&Hb(t,a,1)}}function Hb(t,e,n){for(let r=0;r<e.length;r++)t2(t,e[r],n)}function xg(t){for(t[Rn].changeDetectionScheduler?.notify();t;){t[X]|=64;let e=Ta(t);if(G1(t)&&!e)return t;t=e}return null}var zo=class{get rootNodes(){let e=this._lView,n=e[le];return Cl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Mn]}set context(e){this._lView[Mn]=e}get destroyed(){return(this._lView[X]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[pt];if(ur(e)){let n=e[El],r=n?n.indexOf(this):-1;r>-1&&(Up(e,r),yl(n,r))}this._attachedToViewContainer=!1}Ib(this._lView[le],this._lView)}onDestroy(e){F_(this._lView,e)}markForCheck(){xg(this._cdRefInjectingView||this._lView)}detach(){this._lView[X]&=-129}reattach(){Pp(this._lView),this._lView[X]|=128}detectChanges(){this._lView[X]|=1024,$b(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,wb(this._lView[le],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e,Pp(this._lView)}};var C9=new RegExp(`^(\\d+)*(${Gk}|${Hk})*(.*)`);var n2=()=>null;function QI(t,e){return n2(t,e)}var zp=class{},Hp=class{},Tl=class{};function r2(t){let e=Error(`No component factory found for ${Vt(t)}.`);return e[i2]=t,e}var i2="ngComponent";var Gp=class{resolveComponentFactory(e){throw r2(e)}},$l=(()=>{let e=class e{};e.NULL=new Gp;let t=e;return t})(),xa=class{};var o2=(()=>{let e=class e{};e.\u0275prov=G({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Ep={};var YI=new Set;function Mg(t){YI.has(t)||(YI.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function ZI(...t){}function s2(){let t=typeof va.requestAnimationFrame=="function",e=va[t?"requestAnimationFrame":"setTimeout"],n=va[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Ie=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new un(!1),this.onMicrotaskEmpty=new un(!1),this.onStable=new un(!1),this.onError=new un(!1),typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=s2().nativeRequestAnimationFrame,c2(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Q(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,a2,ZI,ZI);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},a2={};function Rg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function u2(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(va,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Wp(t),t.isCheckStableRunning=!0,Rg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Wp(t))}function c2(t){let e=()=>{u2(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(l2(a))return n.invokeTask(i,o,s,a);try{return XI(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),JI(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return XI(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),JI(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Wp(t),Rg(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Wp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function XI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function JI(t){t._nesting--,Rg(t)}function l2(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Gb=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=G({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Kp(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=CI(i,a);else if(o==2){let u=a,c=e[++s];r=CI(r,u+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Al=class extends $l{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=_i(e);return new Ma(n,this.ngModule)}};function e_(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function d2(t){let e=t.toLowerCase();return e==="svg"?Y1:e==="math"?Z1:null}var Qp=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Pl(r);let i=this.injector.get(e,Ep,r);return i!==Ep||n===Ep?i:this.parentInjector.get(e,n,r)}},Ma=class extends Tl{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=e_(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return e_(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=x1(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=Ee(null);try{i=i||this.ngModule;let s=i instanceof xt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Qp(e,s):e,u=a.get(xa,null);if(u===null)throw new Q(407,!1);let c=a.get(o2,null),h=a.get(Gb,null),g=a.get(zp,null),m={rendererFactory:u,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:g},v=u.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",b=r?IO(v,r,this.componentDef.encapsulation,a):vb(v,T,d2(T)),I=512;this.componentDef.signals?I|=4096:this.componentDef.onPush||(I|=16);let x=null;b!==null&&(x=_g(b,a,!0));let U=Nb(0,null,null,1,0,null,null,null,null,null,null),M=Tg(null,U,null,I,null,null,m,v,a,null,x);pg(M);let V,W;try{let K=this.componentDef,ge,ht=null;K.findHostDirectiveDefs?(ge=[],ht=new Map,K.findHostDirectiveDefs(K,ge,ht),ge.push(K)):ge=[K];let po=h2(M,b),_r=f2(po,b,K,ge,M,m,v);W=ek(U,Nr),b&&m2(v,K,b,r),n!==void 0&&y2(W,this.ngContentSelectors,n),V=g2(_r,K,ge,ht,M,[v2]),Ub(U,M,null)}finally{gg()}return new Yp(this.componentType,V,vg(W,M),M,W)}finally{Ee(o)}}},Yp=class extends Hp{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new zo(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Vb(o[le],o,i,e,n),this.previousInputValues.set(e,n);let s=Go(this._tNode.index,o);xg(s)}}get injector(){return new Ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function h2(t,e){let n=t[le],r=Nr;return t[r]=e,Ag(n,r,2,"#host",null)}function f2(t,e,n,r,i,o,s){let a=i[le];p2(r,t,e,s);let u=null;e!==null&&(u=_g(e,i[$o]));let c=o.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let g=Tg(i,Pb(n),null,h,i[t.index],t,o,c,null,null,u);return a.firstCreatePass&&Bp(a,t,r.length-1),Sg(i,g),i[t.index]=g}function p2(t,e,n,r){for(let i of t)e.mergedAttrs=rg(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Kp(e,e.mergedAttrs,!0),n!==null&&Tb(r,n,e))}function g2(t,e,n,r,i,o){let s=cr(),a=i[le],u=Fn(s,i);kb(a,i,s,n,null,r);for(let h=0;h<n.length;h++){let g=s.directiveStart+h,m=Sa(i,a,g,s);qo(m,i)}Ob(a,i,s),u&&qo(u,i);let c=Sa(i,a,s.directiveStart+s.componentOffset,s);if(t[Mn]=i[Mn]=c,o!==null)for(let h of o)h(c,e);return Rb(a,s,i),c}function m2(t,e,n,r){if(r)Tp(t,n,["ng-version","17.3.5"]);else{let{attrs:i,classes:o}=M1(e.selectors[0]);i&&Tp(t,n,i),o&&o.length>0&&Cb(t,n,o.join(" "))}}function y2(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function v2(){let t=cr();Q_(Ut()[le],t)}var ql=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=w2;let t=e;return t})();function w2(){let t=cr();return I2(t,Ut())}var E2=ql,Wb=class extends E2{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return vg(this._hostTNode,this._hostLView)}get injector(){return new Ii(this._hostTNode,this._hostLView)}get parentInjector(){let e=mg(this._hostTNode,this._hostLView);if(Z_(e)){let n=bl(e,this._hostLView),r=_l(e),i=n[le].data[r+8];return new Ii(i,n)}else return new Ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=t_(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Yt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=QI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,KI(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!H1(e),a;if(s)a=n;else{let T=n||{};a=T.index,r=T.injector,i=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef}let u=s?e:new Ma(_i(e)),c=r||this.parentInjector;if(!o&&u.ngModule==null){let b=(s?c:this.parentInjector).get(xt,null);b&&(o=b)}let h=_i(u.componentType??{}),g=QI(this._lContainer,h?.id??null),m=g?.firstChild??null,v=u.create(c,i,m,o);return this.insertImpl(v.hostView,a,KI(this._hostTNode,g)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(nk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[pt],c=new Wb(u,u[dn],u[pt]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return HO(s,i,o,r),e.attachToViewContainerRef(),f_(Ip(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=t_(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Up(this._lContainer,n);r&&(yl(Ip(this._lContainer),n),Ib(r[le],r))}detach(e){let n=this._adjustIndex(e,-1),r=Up(this._lContainer,n);return r&&yl(Ip(this._lContainer),n)!=null?new zo(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function t_(t){return t[El]}function Ip(t){return t[El]||(t[El]=[])}function I2(t,e){let n,r=e[t.index];return ur(r)?n=r:(n=UO(r,e,null,t),e[t.index]=n,Sg(e,n)),b2(n,e,t,r),new Wb(n,t,e)}function _2(t,e){let n=t[ln],r=n.createComment(""),i=Fn(e,t),o=Dg(n,i);return Dl(n,o,r,aO(n,i),!1),r}var b2=D2;function D2(t,e,n,r){if(t[Di])return;let i;n.type&8?i=ir(r):i=_2(e,n),t[Di]=i}var kr=class{},Ra=class{};var Zp=class extends kr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Al(this);let i=I_(e);this._bootstrapComponents=yb(i.bootstrap),this._r3Injector=ab(e,n,[{provide:kr,useValue:this},{provide:$l,useValue:this.componentFactoryResolver},...r],Vt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Xp=class extends Ra{constructor(e){super(),this.moduleType=e}create(e){return new Zp(this.moduleType,e,[])}};var Sl=class extends kr{constructor(e){super(),this.componentFactoryResolver=new Al(this),this.instance=null;let n=new _a([...e.providers,{provide:kr,useValue:this},{provide:$l,useValue:this.componentFactoryResolver}],e.parent||ug(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Pg(t,e,n=null){return new Sl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Ai=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new at(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function C2(t){return(t.flags&32)===32}function n_(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Vb(t,n,o[s],s,r)}function T2(t,e,n,r,i,o){let s=e.consts,a=LI(s,i),u=Ag(e,t,2,r,a);return TO(e,n,u,LI(s,o)),u.attrs!==null&&Kp(u,u.attrs,!1),u.mergedAttrs!==null&&Kp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Rt(t,e,n,r){let i=Ut(),o=Vl(),s=Nr+t,a=i[ln],u=o.firstCreatePass?T2(s,o,i,e,n,r):o.data[s],c=A2(o,i,u,a,e,t);i[s]=c;let h=M_(u);return Ul(u,!0),Tb(a,c,u),!C2(u)&&W_()&&bb(o,i,c,u),ok()===0&&qo(c,i),sk(),h&&(vO(o,i,u),Rb(o,u,i)),r!==null&&wO(i,u),Rt}function hn(){let t=cr();U_()?hk():(t=t.parent,Ul(t,!1));let e=t;ck(e)&&lk(),ak();let n=Vl();return n.firstCreatePass&&(Q_(n,t),x_(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Dk(e)&&n_(n,e,Ut(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Ck(e)&&n_(n,e,Ut(),e.stylesWithoutHost,!1),hn}function fn(t,e,n,r){return Rt(t,e,n,r),hn(),fn}var A2=(t,e,n,r,i,o)=>(K_(!0),vb(r,i,Ek()));function Kb(){return Ut()}var xl="en-US";var S2=xl;function x2(t){typeof t=="string"&&(S2=t.toLowerCase().replace(/_/g,"-"))}function Si(t,e,n,r){let i=Ut(),o=Vl(),s=cr();return R2(o,i,i[ln],s,t,e,r),Si}function M2(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[ba],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function R2(t,e,n,r,i,o,s){let a=M_(r),c=t.firstCreatePass&&BO(t),h=e[Mn],g=jO(e),m=!0;if(r.type&3||s){let b=Fn(r,e),I=s?s(b):b,x=g.length,U=s?V=>s(ir(V[r.index])):r.index,M=null;if(!s&&a&&(M=M2(t,e,i,r.index)),M!==null){let V=M.__ngLastListenerFn__||M;V.__ngNextListenerFn__=o,M.__ngLastListenerFn__=o,m=!1}else{o=i_(r,e,h,o,!1);let V=n.listen(I,i,o);g.push(o,V),c&&c.push(i,U,x,x+1)}}else o=i_(r,e,h,o,!1);let v=r.outputs,T;if(m&&v!==null&&(T=v[i])){let b=T.length;if(b)for(let I=0;I<b;I+=2){let x=T[I],U=T[I+1],W=e[x][U].subscribe(o),K=g.length;g.push(o,W),c&&c.push(i,r.index,K,-(K+1))}}}function r_(t,e,n,r){let i=Ee(null);try{return An(6,e,n),n(r)!==!1}catch(o){return Lb(t,o),!1}finally{An(7,e,n),Ee(i)}}function i_(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?Go(t.index,e):e;xg(a);let u=r_(e,n,r,s),c=o.__ngNextListenerFn__;for(;c;)u=r_(e,n,c,s)&&u,c=c.__ngNextListenerFn__;return i&&u===!1&&s.preventDefault(),u}}function Ng(t){let e=fk();return tk(e,Nr+t)}function Ln(t,e=""){let n=Ut(),r=Vl(),i=t+Nr,o=r.firstCreatePass?Ag(r,i,1,e,null):r.data[i],s=P2(r,n,o,e,t);n[i]=s,W_()&&bb(r,n,s,o),Ul(o,!1)}var P2=(t,e,n,r,i)=>(K_(!0),Yk(e[ln],r));var N2=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=D_(!1,r.type),o=i.length>0?Pg([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=G({token:e,providedIn:"environment",factory:()=>new e(R(xt))});let t=e;return t})();function Fr(t){Mg("NgStandalone"),t.getStandaloneInjector=e=>e.get(N2).getOrCreateStandaloneInjector(t)}var Or=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Qb=new Or("17.3.5"),zl=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Yb=new $("");function Va(t){return!!t&&typeof t.then=="function"}function Zb(t){return!!t&&typeof t.subscribe=="function"}var Xb=new $(""),Jb=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=F(Xb,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Va(s))r.push(s);else if(Zb(s)){let a=new Promise((u,c)=>{s.subscribe({complete:u,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Hl=new $("");function k2(){JE(()=>{throw new Q(600,!1)})}function O2(t){return t.isBoundToModule}function F2(t,e,n){try{let r=n();return Va(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Ko=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=F(ub),this.afterRenderEffectManager=F(Gb),this.externalTestViews=new Set,this.beforeRender=new qe,this.afterTick=new qe,this.componentTypes=[],this.components=[],this.isStable=F(Ai).hasPendingTasks.pipe(z(r=>!r)),this._injector=F(xt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Tl;if(!this._injector.get(Jb).done){let v=!o&&E_(r),T=!1;throw new Q(405,T)}let a;o?a=r:a=this._injector.get($l).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=O2(a)?void 0:this._injector.get(kr),c=i||a.selector,h=a.create(La.NULL,[],c,u),g=h.location.nativeElement,m=h.injector.get(Yb,null);return m?.registerApplication(g),h.onDestroy(()=>{this.detachView(h.hostView),_p(this.components,h),m?.unregisterApplication(g)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new Q(101,!1);let i=Ee(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,Ee(i)}}detectChangesInAttachedViews(r){let i=0,o=this.afterRenderEffectManager;for(;;){if(i===Bb)throw new Q(103,!1);if(r){let s=i===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:u}of this._views)L2(a,s,u)}if(i++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Jp(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Jp(s))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;_p(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Hl,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>_p(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Q(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _p(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function L2(t,e,n){!e&&!Jp(t)||V2(t,n,e)}function Jp(t){return fg(t)}function V2(t,e,n){let r;n?(r=0,t[X]|=1024):t[X]&64?r=0:r=1,$b(t,e,r)}var eg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},kg=(()=>{let e=class e{compileModuleSync(r){return new Xp(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=I_(r),s=yb(o.declarations).reduce((a,u)=>{let c=_i(u);return c&&a.push(new Ma(c)),a},[]);return new eg(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var U2=(()=>{let e=class e{constructor(){this.zone=F(Ie),this.applicationRef=F(Ko)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function j2(t){return[{provide:Ie,useFactory:t},{provide:Bo,multi:!0,useFactory:()=>{let e=F(U2,{optional:!0});return()=>e.initialize()}},{provide:Bo,multi:!0,useFactory:()=>{let e=F(z2);return()=>{e.initialize()}}},{provide:ub,useFactory:B2}]}function B2(){let t=F(Ie),e=F(or);return n=>t.runOutsideAngular(()=>e.handleError(n))}function $2(t){let e=j2(()=>new Ie(q2(t)));return Ho([[],e])}function q2(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var z2=(()=>{let e=class e{constructor(){this.subscription=new $e,this.initialized=!1,this.zone=F(Ie),this.pendingTasks=F(Ai)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ie.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ie.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function H2(){return typeof $localize<"u"&&$localize.locale||xl}var Og=new $("",{providedIn:"root",factory:()=>F(Og,se.Optional|se.SkipSelf)||H2()});var eD=new $("");var pl=null;function G2(t=[],e){return La.create({name:e,providers:[{provide:kl,useValue:"platform"},{provide:eD,useValue:new Set([()=>pl=null])},...t]})}function W2(t=[]){if(pl)return pl;let e=G2(t);return pl=e,k2(),K2(e),e}function K2(t){t.get(Eg,null)?.forEach(n=>n())}function Fg(){return!1}var Ua=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Q2;let t=e;return t})();function Q2(t){return Y2(cr(),Ut(),(t&16)===16)}function Y2(t,e,n){if(dg(t)&&!n){let r=Go(t.index,e);return new zo(r,r)}else if(t.type&47){let r=e[Pn];return new zo(r,e)}return null}function tD(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=W2(r),o=[$2(),...n||[]],a=new Sl({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(Ie);return u.run(()=>{a.resolveInjectorInitializers();let c=a.get(or,null),h;u.runOutsideAngular(()=>{h=u.onError.subscribe({next:v=>{c.handleError(v)}})});let g=()=>a.destroy(),m=i.get(eD);return m.add(g),a.onDestroy(()=>{h.unsubscribe(),m.delete(g)}),F2(c,u,()=>{let v=a.get(Jb);return v.runInitializers(),v.donePromise.then(()=>{let T=a.get(Og,xl);x2(T||xl);let b=a.get(Ko);return e!==void 0&&b.bootstrap(e),b})})})}catch(e){return Promise.reject(e)}}var oD=null;function Qo(){return oD}function sD(t){oD??=t}var Gl=class{};var Pt=new $(""),aD=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>F(tF),providedIn:"platform"});let t=e;return t})();var tF=(()=>{let e=class e extends aD{constructor(){super(),this._doc=F(Pt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Qo().getBaseHref(this._doc)}onPopState(r){let i=Qo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Qo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function uD(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function nD(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function xi(t){return t&&t[0]!=="?"?"?"+t:t}var Wl=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>F(cD),providedIn:"root"});let t=e;return t})(),nF=new $(""),cD=(()=>{let e=class e extends Wl{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??F(Pt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return uD(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+xi(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+xi(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+xi(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(R(aD),R(nF,8))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ja=(()=>{let e=class e{constructor(r){this._subject=new un,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=oF(nD(rD(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+xi(i))}normalize(r){return e.stripTrailingSlash(iF(this._basePath,rD(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+xi(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+xi(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=xi,e.joinWithSlash=uD,e.stripTrailingSlash=nD,e.\u0275fac=function(i){return new(i||e)(R(Wl))},e.\u0275prov=G({token:e,factory:()=>rF(),providedIn:"root"});let t=e;return t})();function rF(){return new ja(R(Wl))}function iF(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function rD(t){return t.replace(/\/index.html$/,"")}function oF(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Kl(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var lD="browser",sF="server";function Lr(t){return t===sF}var Yo=class{};var $a=class{},Yl=class{},Mi=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Vg=class{encodeKey(e){return dD(e)}encodeValue(e){return dD(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function lF(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}var dF=/%(\d[a-f0-9])/gi,hF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function dD(t){return encodeURIComponent(t).replace(dF,(e,n)=>hF[n]??e)}function Ql(t){return`${t}`}var Vr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Vg,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=lF(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Ql):[Ql(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Ql(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Ql(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Ug=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function fF(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function hD(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function fD(t){return typeof Blob<"u"&&t instanceof Blob}function pD(t){return typeof FormData<"u"&&t instanceof FormData}function pF(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Ba=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(fF(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Mi,this.context??=new Ug,!this.params)this.params=new Vr,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||hD(this.body)||fD(this.body)||pD(this.body)||pF(this.body)?this.body:this.body instanceof Vr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||pD(this.body)?null:fD(this.body)?this.body.type||null:hD(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Vr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,c=e.headers||this.headers,h=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((m,v)=>m.set(v,e.setHeaders[v]),c)),e.setParams&&(h=Object.keys(e.setParams).reduce((m,v)=>m.set(v,e.setParams[v]),h)),new t(n,r,s,{params:h,headers:c,context:g,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},Zo=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Zo||{}),qa=class{constructor(e,n=Jl.Ok,r="OK"){this.headers=e.headers||new Mi,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},jg=class t extends qa{constructor(e={}){super(e),this.type=Zo.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Zl=class t extends qa{constructor(e={}){super(e),this.type=Zo.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Xl=class extends qa{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Jl=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(Jl||{});function Lg(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var gF=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof Ba)s=r;else{let c;o.headers instanceof Mi?c=o.headers:c=new Mi(o.headers);let h;o.params&&(o.params instanceof Vr?h=o.params:h=new Vr({fromObject:o.params})),s=new Ba(r,i,o.body!==void 0?o.body:null,{headers:c,context:o.context,params:h,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=H(s).pipe(Ar(c=>this.handler.handle(c)));if(r instanceof Ba||o.observe==="events")return a;let u=a.pipe(nt(c=>c instanceof Zl));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return u.pipe(z(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return u.pipe(z(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return u.pipe(z(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return u.pipe(z(c=>c.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Vr().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,Lg(o,i))}post(r,i,o={}){return this.request("POST",r,Lg(o,i))}put(r,i,o={}){return this.request("PUT",r,Lg(o,i))}};e.\u0275fac=function(i){return new(i||e)(R($a))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})();function vD(t,e){return e(t)}function mF(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function yF(t,e,n){return(r,i)=>sr(n,()=>e(r,o=>t(o,i)))}var vF=new $(""),Bg=new $(""),wF=new $(""),EF=new $("");function IF(){let t=null;return(e,n)=>{t===null&&(t=(F(vF,{optional:!0})??[]).reduceRight(mF,vD));let r=F(Ai),i=r.add();return t(e,n).pipe(xr(()=>r.remove(i)))}}var gD=(()=>{let e=class e extends $a{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=F(Ai);let o=F(EF,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(Bg),...this.injector.get(wF,[])]));this.chain=o.reduceRight((s,a)=>yF(s,a,this.injector),vD)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(xr(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(R(Yl),R(xt))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})();var _F=/^\)\]\}',?\n/;function bF(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var mD=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new Q(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?me(i.\u0275loadImpl()):H(null)).pipe(ke(()=>new ue(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((I,x)=>a.setRequestHeader(I,x.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let I=r.detectContentTypeHeader();I!==null&&a.setRequestHeader("Content-Type",I)}if(r.responseType){let I=r.responseType.toLowerCase();a.responseType=I!=="json"?I:"text"}let u=r.serializeBody(),c=null,h=()=>{if(c!==null)return c;let I=a.statusText||"OK",x=new Mi(a.getAllResponseHeaders()),U=bF(a)||r.url;return c=new jg({headers:x,status:a.status,statusText:I,url:U}),c},g=()=>{let{headers:I,status:x,statusText:U,url:M}=h(),V=null;x!==Jl.NoContent&&(V=typeof a.response>"u"?a.responseText:a.response),x===0&&(x=V?Jl.Ok:0);let W=x>=200&&x<300;if(r.responseType==="json"&&typeof V=="string"){let K=V;V=V.replace(_F,"");try{V=V!==""?JSON.parse(V):null}catch(ge){V=K,W&&(W=!1,V={error:ge,text:V})}}W?(s.next(new Zl({body:V,headers:I,status:x,statusText:U,url:M||void 0})),s.complete()):s.error(new Xl({error:V,headers:I,status:x,statusText:U,url:M||void 0}))},m=I=>{let{url:x}=h(),U=new Xl({error:I,status:a.status||0,statusText:a.statusText||"Unknown Error",url:x||void 0});s.error(U)},v=!1,T=I=>{v||(s.next(h()),v=!0);let x={type:Zo.DownloadProgress,loaded:I.loaded};I.lengthComputable&&(x.total=I.total),r.responseType==="text"&&a.responseText&&(x.partialText=a.responseText),s.next(x)},b=I=>{let x={type:Zo.UploadProgress,loaded:I.loaded};I.lengthComputable&&(x.total=I.total),s.next(x)};return a.addEventListener("load",g),a.addEventListener("error",m),a.addEventListener("timeout",m),a.addEventListener("abort",m),r.reportProgress&&(a.addEventListener("progress",T),u!==null&&a.upload&&a.upload.addEventListener("progress",b)),a.send(u),s.next({type:Zo.Sent}),()=>{a.removeEventListener("error",m),a.removeEventListener("abort",m),a.removeEventListener("load",g),a.removeEventListener("timeout",m),r.reportProgress&&(a.removeEventListener("progress",T),u!==null&&a.upload&&a.upload.removeEventListener("progress",b)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(R(Yo))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),wD=new $(""),DF="XSRF-TOKEN",CF=new $("",{providedIn:"root",factory:()=>DF}),TF="X-XSRF-TOKEN",AF=new $("",{providedIn:"root",factory:()=>TF}),ed=class{},SF=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Kl(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(R(Pt),R(Mt),R(CF))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})();function xF(t,e){let n=t.url.toLowerCase();if(!F(wD)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=F(ed).getToken(),i=F(AF);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var ED=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(ED||{});function MF(t,e){return{\u0275kind:t,\u0275providers:e}}function RF(...t){let e=[gF,mD,gD,{provide:$a,useExisting:gD},{provide:Yl,useExisting:mD},{provide:Bg,useValue:xF,multi:!0},{provide:wD,useValue:!0},{provide:ed,useClass:SF}];for(let n of t)e.push(...n.\u0275providers);return Ho(e)}var yD=new $("");function PF(){return MF(ED.LegacyInterceptors,[{provide:yD,useFactory:IF},{provide:Bg,useExisting:yD,multi:!0}])}var ID=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=On({type:e}),e.\u0275inj=Nn({providers:[RF(PF())]});let t=e;return t})();var zg=class extends Gl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Hg=class t extends zg{static makeCurrent(){sD(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=NF();return n==null?null:kF(n)}resetBaseElement(){za=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Kl(document.cookie,e)}},za=null;function NF(){return za=za||document.querySelector("base"),za?za.getAttribute("href"):null}function kF(t){return new URL(t,document.baseURI).pathname}var OF=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),Gg=new $(""),CD=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new Q(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(R(Gg),R(Ie))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),td=class{constructor(e){this._doc=e}},$g="ng-app-id",TD=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Lr(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${$g}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute($g),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute($g,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(R(Pt),R(wg),R(Ig,8),R(Mt))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),qg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Kg=/%COMP%/g,AD="%COMP%",FF=`_nghost-${AD}`,LF=`_ngcontent-${AD}`,VF=!0,UF=new $("",{providedIn:"root",factory:()=>VF});function jF(t){return LF.replace(Kg,t)}function BF(t){return FF.replace(Kg,t)}function SD(t,e){return e.map(n=>n.replace(Kg,t))}var _D=(()=>{let e=class e{constructor(r,i,o,s,a,u,c,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=c,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Lr(u),this.defaultRenderer=new Ha(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===xn.ShadowDom&&(i=Re(B({},i),{encapsulation:xn.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof nd?o.applyToHost(r):o instanceof Ga&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,u=this.ngZone,c=this.eventManager,h=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case xn.Emulated:s=new nd(c,h,i,this.appId,g,a,u,m);break;case xn.ShadowDom:return new Wg(c,h,r,i,a,u,this.nonce,m);default:s=new Ga(c,h,i,g,a,u,m);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(R(CD),R(TD),R(wg),R(UF),R(Pt),R(Mt),R(Ie),R(Ig))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),Ha=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(qg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(bD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(bD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=qg[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=qg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ti.DashCase|Ti.Important)?e.style.setProperty(n,r,i&Ti.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ti.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Qo().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function bD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Wg=class extends Ha{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=SD(i.id,i.styles);for(let h of c){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ga=class extends Ha{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?SD(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},nd=class extends Ga{constructor(e,n,r,i,o,s,a,u){let c=i+"-"+r.id;super(e,n,r,o,s,a,u,c),this.contentAttr=jF(c),this.hostAttr=BF(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},$F=(()=>{let e=class e extends td{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(R(Pt))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})(),DD=["alt","control","meta","shift"],qF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zF={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},HF=(()=>{let e=class e extends td{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qo().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),DD.forEach(h=>{let g=i.indexOf(h);g>-1&&(i.splice(g,1),a+=h+".")}),a+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let o=qF[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),DD.forEach(a=>{if(a!==o){let u=zF[a];u(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(R(Pt))},e.\u0275prov=G({token:e,factory:e.\u0275fac});let t=e;return t})();function xD(t,e){return tD(B({rootComponent:t},GF(e)))}function GF(t){return{appProviders:[...ZF,...t?.providers??[]],platformProviders:YF}}function WF(){Hg.makeCurrent()}function KF(){return new or}function QF(){return gb(document),document}var YF=[{provide:Mt,useValue:lD},{provide:Eg,useValue:WF,multi:!0},{provide:Pt,useFactory:QF,deps:[]}];var ZF=[{provide:kl,useValue:"root"},{provide:or,useFactory:KF,deps:[]},{provide:Gg,useClass:$F,multi:!0,deps:[Pt,Ie,Mt]},{provide:Gg,useClass:HF,multi:!0,deps:[Pt]},_D,TD,CD,{provide:xa,useExisting:_D},{provide:Yo,useClass:OF,deps:[]},[]];var MD=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(R(Pt))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var te="primary",au=Symbol("RouteTitle"),Jg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ns(t){return new Jg(t)}function JF(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function eL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Vn(t[n],e[n]))return!1;return!0}function Vn(t,e){let n=t?em(t):void 0,r=e?em(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!FD(t[i],e[i]))return!1;return!0}function em(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function FD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function LD(t){return t.length>0?t[t.length-1]:null}function Br(t){return sp(t)?t:Va(t)?me(Promise.resolve(t)):H(t)}var tL={exact:UD,subset:jD},VD={exact:nL,subset:rL,ignored:()=>!0};function RD(t,e,n){return tL[n.paths](t.root,e.root,n.matrixParams)&&VD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function nL(t,e){return Vn(t,e)}function UD(t,e,n){if(!Pi(t.segments,e.segments)||!od(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!UD(t.children[r],e.children[r],n))return!1;return!0}function rL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>FD(t[n],e[n]))}function jD(t,e,n){return BD(t,e,e.segments,n)}function BD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Pi(i,n)||e.hasChildren()||!od(i,n,r))}else if(t.segments.length===n.length){if(!Pi(t.segments,n)||!od(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!jD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Pi(t.segments,i)||!od(t.segments,i,r)||!t.children[te]?!1:BD(t.children[te],e,o,r)}}function od(t,e,n){return e.every((r,i)=>VD[n](t[i].parameters,r.parameters))}var Ur=class{constructor(e=new ve([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ns(this.queryParams),this._queryParamMap}toString(){return sL.serialize(this)}},ve=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sd(this)}},Ri=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ns(this.parameters),this._parameterMap}toString(){return qD(this)}};function iL(t,e){return Pi(t,e)&&t.every((n,r)=>Vn(n.parameters,e[r].parameters))}function Pi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function oL(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===te&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==te&&(n=n.concat(e(i,r)))}),n}var Tm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>new ud,providedIn:"root"});let t=e;return t})(),ud=class{parse(e){let n=new nm(e);return new Ur(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Wa(e.root,!0)}`,r=cL(e.queryParams),i=typeof e.fragment=="string"?`#${aL(e.fragment)}`:"";return`${n}${r}${i}`}},sL=new ud;function sd(t){return t.segments.map(e=>qD(e)).join("/")}function Wa(t,e){if(!t.hasChildren())return sd(t);if(e){let n=t.children[te]?Wa(t.children[te],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==te&&r.push(`${i}:${Wa(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=oL(t,(r,i)=>i===te?[Wa(t.children[te],!1)]:[`${i}:${Wa(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[te]!=null?`${sd(t)}/${n[0]}`:`${sd(t)}/(${n.join("//")})`}}function $D(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rd(t){return $D(t).replace(/%3B/gi,";")}function aL(t){return encodeURI(t)}function tm(t){return $D(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ad(t){return decodeURIComponent(t)}function PD(t){return ad(t.replace(/\+/g,"%20"))}function qD(t){return`${tm(t.path)}${uL(t.parameters)}`}function uL(t){return Object.entries(t).map(([e,n])=>`;${tm(e)}=${tm(n)}`).join("")}function cL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${rd(n)}=${rd(i)}`).join("&"):`${rd(n)}=${rd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var lL=/^[^\/()?;#]+/;function Qg(t){let e=t.match(lL);return e?e[0]:""}var dL=/^[^\/()?;=#]+/;function hL(t){let e=t.match(dL);return e?e[0]:""}var fL=/^[^=?&#]+/;function pL(t){let e=t.match(fL);return e?e[0]:""}var gL=/^[^&#]+/;function mL(t){let e=t.match(gL);return e?e[0]:""}var nm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[te]=new ve(e,n)),r}parseSegment(){let e=Qg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new Ri(ad(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=hL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Qg(this.remaining);i&&(r=i,this.capture(r))}e[ad(n)]=ad(r)}parseQueryParam(e){let n=pL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=mL(this.remaining);s&&(r=s,this.capture(r))}let i=PD(n),o=PD(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Qg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Q(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=te);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[te]:new ve([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function zD(t){return t.segments.length>0?new ve([],{[te]:t}):t}function HD(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=HD(i);if(r===te&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ve(t.segments,e);return yL(n)}function yL(t){if(t.numberOfChildren===1&&t.children[te]){let e=t.children[te];return new ve(t.segments.concat(e.segments),e.children)}return t}function rs(t){return t instanceof Ur}function vL(t,e,n=null,r=null){let i=GD(t);return WD(i,e,n,r)}function GD(t){let e;function n(o){let s={};for(let u of o.children){let c=n(u);s[u.outlet]=c}let a=new ve(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=zD(r);return e??i}function WD(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Yg(i,i,i,n,r);let o=wL(e);if(o.toRoot())return Yg(i,i,new ve([],{}),n,r);let s=EL(o,i,t),a=s.processChildren?Ya(s.segmentGroup,s.index,o.commands):QD(s.segmentGroup,s.index,o.commands);return Yg(i,s.segmentGroup,a,n,r)}function cd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ja(t){return typeof t=="object"&&t!=null&&t.outlets}function Yg(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,c])=>{o[u]=Array.isArray(c)?c.map(h=>`${h}`):`${c}`});let s;t===e?s=n:s=KD(t,e,n);let a=zD(HD(s));return new Ur(a,o,i)}function KD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=KD(o,e,n)}),new ve(t.segments,r)}var ld=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&cd(r[0]))throw new Q(4003,!1);let i=r.find(Ja);if(i&&i!==LD(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function wL(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new ld(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ld(n,e,r)}var es=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function EL(t,e,n){if(t.isAbsolute)return new es(e,!0,0);if(!n)return new es(e,!1,NaN);if(n.parent===null)return new es(n,!0,0);let r=cd(t.commands[0])?0:1,i=n.segments.length-1+r;return IL(n,i,t.numberOfDoubleDots)}function IL(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new es(r,!1,i-o)}function _L(t){return Ja(t[0])?t[0].outlets:{[te]:t}}function QD(t,e,n){if(t??=new ve([],{}),t.segments.length===0&&t.hasChildren())return Ya(t,e,n);let r=bL(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ve(t.segments.slice(0,r.pathIndex),{});return o.children[te]=new ve(t.segments.slice(r.pathIndex),t.children),Ya(o,0,i)}else return r.match&&i.length===0?new ve(t.segments,{}):r.match&&!t.hasChildren()?rm(t,e,n):r.match?Ya(t,0,i):rm(t,e,n)}function Ya(t,e,n){if(n.length===0)return new ve(t.segments,{});{let r=_L(n),i={};if(Object.keys(r).some(o=>o!==te)&&t.children[te]&&t.numberOfChildren===1&&t.children[te].segments.length===0){let o=Ya(t.children[te],e,n);return new ve(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=QD(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ve(t.segments,i)}}function bL(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Ja(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!kD(u,c,s))return o;r+=2}else{if(!kD(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function rm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ja(o)){let u=DL(o.outlets);return new ve(r,u)}if(i===0&&cd(n[0])){let u=t.segments[e];r.push(new Ri(u.path,ND(n[0]))),i++;continue}let s=Ja(o)?o.outlets[te]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&cd(a)?(r.push(new Ri(s,ND(a))),i+=2):(r.push(new Ri(s,{})),i++)}return new ve(r,{})}function DL(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=rm(new ve([],{}),0,r))}),e}function ND(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function kD(t,e,n){return t==n.path&&Vn(e,n.parameters)}var Za="imperative",ut=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ut||{}),Xt=class{constructor(e,n){this.id=e,this.url=n}},eu=class extends Xt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ut.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ni=class extends Xt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ut.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Bt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Bt||{}),im=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(im||{}),jr=class extends Xt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ut.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ki=class extends Xt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ut.NavigationSkipped}},tu=class extends Xt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ut.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},dd=class extends Xt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ut.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},om=class extends Xt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ut.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sm=class extends Xt{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ut.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},am=class extends Xt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ut.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},um=class extends Xt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ut.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cm=class{constructor(e){this.route=e,this.type=ut.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},lm=class{constructor(e){this.route=e,this.type=ut.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},dm=class{constructor(e){this.snapshot=e,this.type=ut.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hm=class{constructor(e){this.snapshot=e,this.type=ut.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fm=class{constructor(e){this.snapshot=e,this.type=ut.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pm=class{constructor(e){this.snapshot=e,this.type=ut.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var nu=class{},ru=class{constructor(e){this.url=e}};var gm=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new yd,this.attachRef=null}},yd=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new gm,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=mm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=mm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=ym(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ym(e,this._root).map(n=>n.value)}};function mm(t,e){if(t===e.value)return e;for(let n of e.children){let r=mm(t,n);if(r)return r}return null}function ym(t,e){if(t===e.value)return[e];for(let n of e.children){let r=ym(t,n);if(r.length)return r.unshift(e),r}return[]}var jt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Jo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var fd=class extends hd{constructor(e,n){super(e),this.snapshot=n,Sm(this,e)}toString(){return this.snapshot.toString()}};function YD(t){let e=CL(t),n=new at([new Ri("",{})]),r=new at({}),i=new at({}),o=new at({}),s=new at(""),a=new is(n,r,o,s,i,te,t,e.root);return a.snapshot=e.root,new fd(new jt(a,[]),e)}function CL(t){let e={},n={},r={},i="",o=new iu([],e,r,i,n,te,t,null,{});return new pd("",new jt(o,[]))}var is=class{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(z(c=>c[au]))??H(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(z(e=>ns(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(z(e=>ns(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Am(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:B(B({},e.params),t.params),data:B(B({},e.data),t.data),resolve:B(B(B(B({},t.data),e.data),i?.data),t._resolvedData)}:r={params:B({},t.params),data:B({},t.data),resolve:B(B({},t.data),t._resolvedData??{})},i&&XD(i)&&(r.resolve[au]=i.title),r}var iu=class{get title(){return this.data?.[au]}constructor(e,n,r,i,o,s,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ns(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ns(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},pd=class extends hd{constructor(e,n){super(n),this.url=e,Sm(this,n)}toString(){return ZD(this._root)}};function Sm(t,e){e.value._routerState=t,e.children.forEach(n=>Sm(t,n))}function ZD(t){let e=t.children.length>0?` { ${t.children.map(ZD).join(", ")} } `:"";return`${t.value}${e}`}function Zg(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Vn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Vn(e.params,n.params)||t.paramsSubject.next(n.params),eL(e.url,n.url)||t.urlSubject.next(n.url),Vn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function vm(t,e){let n=Vn(t.params,e.params)&&iL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||vm(t.parent,e.parent))}function XD(t){return typeof t.title=="string"||t.title===null}var uu=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=te,this.activateEvents=new un,this.deactivateEvents=new un,this.attachEvents=new un,this.detachEvents=new un,this.parentContexts=F(yd),this.location=F(ql),this.changeDetector=F(Ua),this.environmentInjector=F(xt),this.inputBinder=F(xm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new wm(r,u,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=og({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ll]});let t=e;return t})(),wm=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r,this.__ngOutletInjector=!0}get(e,n){return e===is?this.route:e===yd?this.childContexts:this.parent.get(e,n)}},xm=new $("");function TL(t,e,n){let r=ou(t,e._root,n?n._root:void 0);return new fd(r,e)}function ou(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=AL(t,e,n);return new jt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ou(t,a)),s}}let r=SL(e.value),i=e.children.map(o=>ou(t,o));return new jt(r,i)}}function AL(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ou(t,r,i);return ou(t,r)})}function SL(t){return new is(new at(t.url),new at(t.params),new at(t.queryParams),new at(t.fragment),new at(t.data),t.outlet,t.component,t)}var JD="ngNavigationCancelingError";function eC(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=rs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=tC(!1,Bt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function tC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[JD]=!0,n.cancellationCode=e,n}function xL(t){return nC(t)&&rs(t.url)}function nC(t){return!!t&&t[JD]}var ML=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=kn({type:e,selectors:[["ng-component"]],standalone:!0,features:[Fr],decls:1,vars:0,template:function(i,o){i&1&&fn(0,"router-outlet")},dependencies:[uu],encapsulation:2});let t=e;return t})();function RL(t,e){return t.providers&&!t._injector&&(t._injector=Pg(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Mm(t){let e=t.children&&t.children.map(Mm),n=e?Re(B({},t),{children:e}):B({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==te&&(n.component=ML),n}function Un(t){return t.outlet||te}function PL(t,e){let n=t.filter(r=>Un(r)===e);return n.push(...t.filter(r=>Un(r)!==e)),n}function cu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var NL=(t,e,n,r)=>z(i=>(new Em(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Em=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Zg(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Jo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Jo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Jo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Jo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new pm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new hm(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Zg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Zg(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=cu(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},gd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ts=class{constructor(e,n){this.component=e,this.route=n}};function kL(t,e,n){let r=t._root,i=e?e._root:null;return Ka(r,i,n,[r.value])}function OL(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ss(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!a_(t)?t:e.get(t):r}function Ka(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Jo(e);return t.children.forEach(s=>{FL(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Xa(a,n.getContext(s),i)),i}function FL(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=LL(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new gd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ka(t,e,a?a.children:null,r,i):Ka(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ts(a.outlet.component,s))}else s&&Xa(e,a,i),i.canActivateChecks.push(new gd(r)),o.component?Ka(t,null,a?a.children:null,r,i):Ka(t,null,n,r,i);return i}function LL(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Pi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Pi(t.url,e.url)||!Vn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vm(t,e)||!Vn(t.queryParams,e.queryParams);case"paramsChange":default:return!vm(t,e)}}function Xa(t,e,n){let r=Jo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Xa(s,e.children.getContext(o),n):Xa(s,null,n):Xa(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ts(e.outlet.component,i)):n.canDeactivateChecks.push(new ts(null,i)):n.canDeactivateChecks.push(new ts(null,i))}function lu(t){return typeof t=="function"}function VL(t){return typeof t=="boolean"}function UL(t){return t&&lu(t.canLoad)}function jL(t){return t&&lu(t.canActivate)}function BL(t){return t&&lu(t.canActivateChild)}function $L(t){return t&&lu(t.canDeactivate)}function qL(t){return t&&lu(t.canMatch)}function rC(t){return t instanceof nr||t?.name==="EmptyError"}var id=Symbol("INITIAL_VALUE");function os(){return ke(t=>il(t.map(e=>e.pipe(rr(1),Ei(id)))).pipe(z(e=>{for(let n of e)if(n!==!0){if(n===id)return id;if(n===!1||n instanceof Ur)return n}return!0}),nt(e=>e!==id),rr(1)))}function zL(t,e){return Je(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?H(Re(B({},n),{guardsResult:!0})):HL(s,r,i,t).pipe(Je(a=>a&&VL(a)?GL(r,o,t,e):H(a)),z(a=>Re(B({},n),{guardsResult:a})))})}function HL(t,e,n,r){return me(t).pipe(Je(i=>ZL(i.component,i.route,n,e,r)),Wt(i=>i!==!0,!0))}function GL(t,e,n,r){return me(e).pipe(Ar(i=>Po(KL(i.route.parent,r),WL(i.route,r),YL(t,i.path,n),QL(t,i.route,n))),Wt(i=>i!==!0,!0))}function WL(t,e){return t!==null&&e&&e(new fm(t)),H(!0)}function KL(t,e){return t!==null&&e&&e(new dm(t)),H(!0)}function QL(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return H(!0);let i=r.map(o=>ol(()=>{let s=cu(e)??n,a=ss(o,s),u=jL(a)?a.canActivate(e,t):sr(s,()=>a(e,t));return Br(u).pipe(Wt())}));return H(i).pipe(os())}function YL(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>OL(s)).filter(s=>s!==null).map(s=>ol(()=>{let a=s.guards.map(u=>{let c=cu(s.node)??n,h=ss(u,c),g=BL(h)?h.canActivateChild(r,t):sr(c,()=>h(r,t));return Br(g).pipe(Wt())});return H(a).pipe(os())}));return H(o).pipe(os())}function ZL(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return H(!0);let s=o.map(a=>{let u=cu(e)??i,c=ss(a,u),h=$L(c)?c.canDeactivate(t,e,n,r):sr(u,()=>c(t,e,n,r));return Br(h).pipe(Wt())});return H(s).pipe(os())}function XL(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return H(!0);let o=i.map(s=>{let a=ss(s,t),u=UL(a)?a.canLoad(e,n):sr(t,()=>a(e,n));return Br(u)});return H(o).pipe(os(),iC(r))}function iC(t){return ep(We(e=>{if(rs(e))throw eC(t,e)}),z(e=>e===!0))}function JL(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return H(!0);let o=i.map(s=>{let a=ss(s,t),u=qL(a)?a.canMatch(e,n):sr(t,()=>a(e,n));return Br(u)});return H(o).pipe(os(),iC(r))}var su=class{constructor(e){this.segmentGroup=e||null}},md=class extends Error{constructor(e){super(),this.urlTree=e}};function Xo(t){return Ro(new su(t))}function eV(t){return Ro(new Q(4e3,!1))}function tV(t){return Ro(tC(!1,Bt.GuardRejected))}var Im=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return H(r);if(i.numberOfChildren>1||!i.children[te])return eV(e.redirectTo);i=i.children[te]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new md(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Ur(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new ve(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},_m={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nV(t,e,n,r,i){let o=Rm(t,e,n);return o.matched?(r=RL(e,r),JL(r,e,n,i).pipe(z(s=>s===!0?o:B({},_m)))):H(o)}function Rm(t,e,n){if(e.path==="**")return rV(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?B({},_m):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||JF)(n,t,e);if(!i)return B({},_m);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?B(B({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function rV(t){return{matched:!0,parameters:t.length>0?LD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function OD(t,e,n,r){return n.length>0&&sV(t,n,r)?{segmentGroup:new ve(e,oV(r,new ve(n,t.children))),slicedSegments:[]}:n.length===0&&aV(t,n,r)?{segmentGroup:new ve(t.segments,iV(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ve(t.segments,t.children),slicedSegments:n}}function iV(t,e,n,r){let i={};for(let o of n)if(vd(t,e,o)&&!r[Un(o)]){let s=new ve([],{});i[Un(o)]=s}return B(B({},r),i)}function oV(t,e){let n={};n[te]=e;for(let r of t)if(r.path===""&&Un(r)!==te){let i=new ve([],{});n[Un(r)]=i}return n}function sV(t,e,n){return n.some(r=>vd(t,e,r)&&Un(r)!==te)}function aV(t,e,n){return n.some(r=>vd(t,e,r))}function vd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function uV(t,e,n,r){return Un(t)!==r&&(r===te||!vd(e,n,t))?!1:Rm(e,t,n).matched}function cV(t,e,n){return e.length===0&&!t.children[n]}var bm=class{};function lV(t,e,n,r,i,o,s="emptyOnly"){return new Dm(t,e,n,r,i,s,o).recognize()}var dV=31,Dm=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Im(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){let e=OD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(z(n=>{let r=new iu([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,{},te,this.rootComponentType,null,{}),i=new jt(r,n),o=new pd("",i),s=vL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,te).pipe(Tr(r=>{if(r instanceof md)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof su?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Am(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(z(o=>o instanceof jt?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return me(i).pipe(Ar(o=>{let s=r.children[o],a=PL(n,o);return this.processSegmentGroup(e,a,s,o)}),wi((o,s)=>(o.push(...s),o)),Sr(null),lp(),Je(o=>{if(o===null)return Xo(r);let s=oC(o);return hV(s),H(s)}))}processSegment(e,n,r,i,o,s){return me(n).pipe(Ar(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(Tr(u=>{if(u instanceof su)return H(null);throw u}))),Wt(a=>!!a),Tr(a=>{if(rC(a))return cV(r,i,o)?H(new bm):Xo(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return uV(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):Xo(i):Xo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:u,positionalParamSegments:c,remainingSegments:h}=Rm(n,i,o);if(!a)return Xo(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>dV&&(this.allowRedirects=!1));let g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,g).pipe(Je(m=>this.processSegment(e,r,n,m.concat(h),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=nV(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(ke(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ke(({routes:u})=>{let c=r._loadedInjector??e,{consumedSegments:h,remainingSegments:g,parameters:m}=a,v=new iu(h,m,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,pV(r),Un(r),r.component??r._loadedComponent??null,r,gV(r)),{segmentGroup:T,slicedSegments:b}=OD(n,h,g,u);if(b.length===0&&T.hasChildren())return this.processChildren(c,u,T).pipe(z(x=>x===null?null:new jt(v,x)));if(u.length===0&&b.length===0)return H(new jt(v,[]));let I=Un(r)===o;return this.processSegment(c,u,T,b,I?te:o,!0).pipe(z(x=>new jt(v,x instanceof jt?[x]:[])))}))):Xo(n)))}getChildConfig(e,n,r){return n.children?H({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?H({routes:n._loadedRoutes,injector:n._loadedInjector}):XL(e,n,r,this.urlSerializer).pipe(Je(i=>i?this.configLoader.loadChildren(e,n).pipe(We(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):tV(n))):H({routes:[],injector:e})}};function hV(t){t.sort((e,n)=>e.value.outlet===te?-1:n.value.outlet===te?1:e.value.outlet.localeCompare(n.value.outlet))}function fV(t){let e=t.value.routeConfig;return e&&e.path===""}function oC(t){let e=[],n=new Set;for(let r of t){if(!fV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=oC(r.children);e.push(new jt(r.value,i))}return e.filter(r=>!n.has(r))}function pV(t){return t.data||{}}function gV(t){return t.resolve||{}}function mV(t,e,n,r,i,o){return Je(s=>lV(t,e,n,r,s.extractedUrl,i,o).pipe(z(({state:a,tree:u})=>Re(B({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function yV(t,e){return Je(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return H(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let c of sC(u))s.add(c);let a=0;return me(s).pipe(Ar(u=>o.has(u)?vV(u,r,t,e):(u.data=Am(u,u.parent,t).resolve,H(void 0))),We(()=>a++),No(1),Je(u=>a===s.size?H(n):Et))})}function sC(t){let e=t.children.map(n=>sC(n)).flat();return[t,...e]}function vV(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!XD(i)&&(o[au]=i.title),wV(o,t,e,r).pipe(z(s=>(t._resolvedData=s,t.data=Am(t,t.parent,n).resolve,null)))}function wV(t,e,n,r){let i=em(t);if(i.length===0)return H({});let o={};return me(i).pipe(Je(s=>EV(t[s],e,n,r).pipe(Wt(),We(a=>{o[s]=a}))),No(1),up(o),Tr(s=>rC(s)?Et:Ro(s)))}function EV(t,e,n,r){let i=cu(e)??r,o=ss(t,i),s=o.resolve?o.resolve(e,n):sr(i,()=>o(e,n));return Br(s)}function Xg(t){return ke(e=>{let n=t(e);return n?me(n).pipe(z(()=>e)):H(e)})}var aC=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===te);return i}getResolvedTitleForRoute(r){return r.data[au]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>F(IV),providedIn:"root"});let t=e;return t})(),IV=(()=>{let e=class e extends aC{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(R(MD))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Pm=new $("",{providedIn:"root",factory:()=>({})}),Nm=new $(""),_V=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(kg)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return H(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Br(r.loadComponent()).pipe(z(uC),We(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),xr(()=>{this.componentLoaders.delete(r)})),o=new Ao(i,()=>new qe).pipe(To());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return H({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=bV(i,this.compiler,r,this.onLoadEndListener).pipe(xr(()=>{this.childrenLoaders.delete(i)})),a=new Ao(s,()=>new qe).pipe(To());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function bV(t,e,n,r){return Br(t.loadChildren()).pipe(z(uC),Je(i=>i instanceof Ra||Array.isArray(i)?H(i):me(e.compileModuleAsync(i))),z(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Nm,[],{optional:!0,self:!0}).flat()),{routes:s.map(Mm),injector:o}}))}function DV(t){return t&&typeof t=="object"&&"default"in t}function uC(t){return DV(t)?t.default:t}var km=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>F(CV),providedIn:"root"});let t=e;return t})(),CV=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),TV=new $("");var AV=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new qe,this.transitionAbortSubject=new qe,this.configLoader=F(_V),this.environmentInjector=F(xt),this.urlSerializer=F(Tm),this.rootContexts=F(yd),this.location=F(ja),this.inputBindingEnabled=F(xm,{optional:!0})!==null,this.titleStrategy=F(aC),this.options=F(Pm,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(km),this.createViewTransition=F(TV,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>H(void 0),this.rootComponentType=null;let r=o=>this.events.next(new cm(o)),i=o=>this.events.next(new lm(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Re(B(B({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new at({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Za,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(nt(s=>s.id!==0),z(s=>Re(B({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ke(s=>{let a=!1,u=!1;return H(s).pipe(ke(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Bt.SupersededByNewNavigation),Et;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Re(B({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),g=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&g!=="reload"){let m="";return this.events.next(new ki(c.id,this.urlSerializer.serialize(c.rawUrl),m,im.IgnoredSameUrlNavigation)),c.resolve(null),Et}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return H(c).pipe(ke(m=>{let v=this.transitions?.getValue();return this.events.next(new eu(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),v!==this.transitions?.getValue()?Et:Promise.resolve(m)}),mV(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),We(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=Re(B({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let v=new dd(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:m,extractedUrl:v,source:T,restoredState:b,extras:I}=c,x=new eu(m,this.urlSerializer.serialize(v),T,b);this.events.next(x);let U=YD(this.rootComponentType).snapshot;return this.currentTransition=s=Re(B({},c),{targetSnapshot:U,urlAfterRedirects:v,extras:Re(B({},I),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=v,H(s)}else{let m="";return this.events.next(new ki(c.id,this.urlSerializer.serialize(c.extractedUrl),m,im.IgnoredByUrlHandlingStrategy)),c.resolve(null),Et}}),We(c=>{let h=new om(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),z(c=>(this.currentTransition=s=Re(B({},c),{guards:kL(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),zL(this.environmentInjector,c=>this.events.next(c)),We(c=>{if(s.guardsResult=c.guardsResult,rs(c.guardsResult))throw eC(this.urlSerializer,c.guardsResult);let h=new sm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(h)}),nt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Bt.GuardRejected),!1)),Xg(c=>{if(c.guards.canActivateChecks.length)return H(c).pipe(We(h=>{let g=new am(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}),ke(h=>{let g=!1;return H(h).pipe(yV(this.paramsInheritanceStrategy,this.environmentInjector),We({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(h,"",Bt.NoDataFromResolver)}}))}),We(h=>{let g=new um(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}))}),Xg(c=>{let h=g=>{let m=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(g.routeConfig).pipe(We(v=>{g.component=v}),z(()=>{})));for(let v of g.children)m.push(...h(v));return m};return il(h(c.targetSnapshot.root)).pipe(Sr(null),rr(1))}),Xg(()=>this.afterPreactivation()),ke(()=>{let{currentSnapshot:c,targetSnapshot:h}=s,g=this.createViewTransition?.(this.environmentInjector,c.root,h.root);return g?me(g).pipe(z(()=>s)):H(s)}),z(c=>{let h=TL(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=Re(B({},c),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,s}),We(()=>{this.events.next(new nu)}),NL(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),rr(1),We({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ni(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),hp(this.transitionAbortSubject.pipe(We(c=>{throw c}))),xr(()=>{!a&&!u&&this.cancelNavigationTransition(s,"",Bt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Tr(c=>{if(u=!0,nC(c))this.events.next(new jr(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),xL(c)?this.events.next(new ru(c.url)):s.resolve(!1);else{this.events.next(new tu(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(c))}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return Et}))}))}cancelNavigationTransition(r,i,o){let s=new jr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function SV(t){return t!==Za}var xV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>F(MV),providedIn:"root"});let t=e;return t})(),Cm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},MV=(()=>{let e=class e extends Cm{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=yg(e)))(o||e)}})(),e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),cC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:()=>F(RV),providedIn:"root"});let t=e;return t})(),RV=(()=>{let e=class e extends cC{constructor(){super(...arguments),this.location=F(ja),this.urlSerializer=F(Tm),this.options=F(Pm,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(km),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ur,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=YD(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof eu)this.stateMemento=this.createStateMemento();else if(r instanceof ki)this.rawUrlTree=i.initialUrl;else if(r instanceof dd){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof nu?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof jr&&(r.code===Bt.GuardRejected||r.code===Bt.NoDataFromResolver)?this.restoreHistory(i):r instanceof tu?this.restoreHistory(i,!0):r instanceof Ni&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=B(B({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=B(B({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=yg(e)))(o||e)}})(),e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Qa=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Qa||{});function PV(t,e){t.events.pipe(nt(n=>n instanceof Ni||n instanceof jr||n instanceof tu||n instanceof ki),z(n=>n instanceof Ni||n instanceof ki?Qa.COMPLETE:(n instanceof jr?n.code===Bt.Redirect||n.code===Bt.SupersededByNewNavigation:!1)?Qa.REDIRECTING:Qa.FAILED),nt(n=>n!==Qa.REDIRECTING),rr(1)).subscribe(()=>{e()})}function NV(t){throw t}var kV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},OV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},wd=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=F(zl),this.stateManager=F(cC),this.options=F(Pm,{optional:!0})||{},this.pendingTasks=F(Ai),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(AV),this.urlSerializer=F(Tm),this.location=F(ja),this.urlHandlingStrategy=F(km),this._events=new qe,this.errorHandler=this.options.errorHandler||NV,this.navigated=!1,this.routeReuseStrategy=F(xV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(Nm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(xm,{optional:!0}),this.eventsSubscription=new $e,this.isNgZoneEnabled=F(Ie)instanceof Ie&&Ie.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof jr&&i.code!==Bt.Redirect&&i.code!==Bt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ni)this.navigated=!0;else if(i instanceof ru){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),u={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||SV(o.source)};this.scheduleNavigation(a,Za,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}LV(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Za,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=B({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Mm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:c}=i,h=c?this.currentUrlTree.fragment:a,g=null;switch(u){case"merge":g=B(B({},this.currentUrlTree.queryParams),s);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=s||null}g!==null&&(g=this.removeEmptyProps(g));let m;try{let v=o?o.snapshot:this.routerState.snapshot.root;m=GD(v)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return WD(m,r,g,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=rs(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Za,null,i)}navigate(r,i={skipLocationChange:!1}){return FV(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=B({},kV):i===!1?o=B({},OV):o=i,rs(r))return RD(this.currentUrlTree,r,o);let s=this.parseUrl(r);return RD(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let u,c,h;a?(u=a.resolve,c=a.reject,h=a.promise):h=new Promise((m,v)=>{u=m,c=v});let g=this.pendingTasks.add();return PV(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:u,reject:c,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function FV(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Q(4008,!1)}function LV(t){return!(t instanceof nu)&&!(t instanceof ru)}var VV=new $("");function lC(t,...e){return Ho([{provide:Nm,multi:!0,useValue:t},[],{provide:is,useFactory:UV,deps:[wd]},{provide:Hl,multi:!0,useFactory:jV},e.map(n=>n.\u0275providers)])}function UV(t){return t.routerState.root}function jV(){let t=F(La);return e=>{let n=t.get(Ko);if(e!==n.components[0])return;let r=t.get(wd),i=t.get(BV);t.get($V)===1&&r.initialNavigation(),t.get(qV,null,se.Optional)?.setUpPreloading(),t.get(VV,null,se.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var BV=new $("",{factory:()=>new qe}),$V=new $("",{providedIn:"root",factory:()=>1});var qV=new $("");var dC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=kn({type:e,selectors:[["app-home"]],standalone:!0,features:[Fr],decls:3,vars:0,template:function(i,o){i&1&&(Rt(0,"p"),Ln(1,"home works!"),hn(),fn(2,"router-outlet"))},dependencies:[uu]});let t=e;return t})();var MC=bN(hC());var HV="firebase",GV="10.11.0";Cr(HV,GV,"app");var as=new Or("ANGULARFIRE2_VERSION");var WV=(t,e)=>{let n=e?[e]:GE(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Oi=class{constructor(){return WV(KV)}},KV="app-check";function Fm(){}var Ed=class{zone;delegate;constructor(e,n=ip){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Lm=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fm,{},Fm,Fm)),n.pipe(We({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Id=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Ed(Zone.current)),this.insideAngular=n.run(()=>new Ed(Zone.current,ga)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(R(Ie))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function QV(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Nt(t){return YV(QV())(t)}function YV(t){return function(n){return n=n.lift(new Lm(t.ngZone)),n.pipe(sn(t.outsideAngular),Gt(t.insideAngular))}}var JV=new Map,eU={activated:!1,tokenObservers:[]},tU={initialized:!1,enabled:!1};function pn(t){return JV.get(t)||Object.assign({},eU)}function vC(){return tU}var nU="https://content-firebaseappcheck.googleapis.com/v1";var rU="exchangeDebugToken",pC={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},k8=24*60*60*1e3;var Um=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new $f,this.pending.promise.catch(n=>{}),yield iU(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new $f,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function iU(t){return new Promise(e=>{setTimeout(e,t)})}var oU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},$r=new qE("appCheck","AppCheck",oU);function wC(t){if(!pn(t).activated)throw $r.create("use-before-activation",{appName:t.name})}function EC(r,i){return _(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(v){throw $r.create("fetch-network-error",{originalErrorMessage:v?.message})}if(u.status!==200)throw $r.create("fetch-status-error",{httpStatus:u.status});let c;try{c=yield u.json()}catch(v){throw $r.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=c.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw $r.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let g=Number(h[1])*1e3,m=Date.now();return{token:c.token,expireTimeMillis:m+g,issuedAtTimeMillis:m}})}function IC(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${nU}/projects/${n}/apps/${r}:${rU}?key=${i}`,body:{debug_token:e}}}var sU="firebase-app-check-database",aU=1,jm="firebase-app-check-store";var _d=null;function uU(){return _d||(_d=new Promise((t,e)=>{try{let n=indexedDB.open(sU,aU);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e($r.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(jm,{keyPath:"compositeKey"})}}}catch(n){e($r.create("storage-open",{originalErrorMessage:n?.message}))}}),_d)}function cU(t,e){return lU(dU(t),e)}function lU(t,e){return _(this,null,function*(){let r=(yield uU()).transaction(jm,"readwrite"),o=r.objectStore(jm).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var c;a($r.create("storage-set",{originalErrorMessage:(c=u.target.error)===null||c===void 0?void 0:c.message}))}})})}function dU(t){return`${t.options.appId}-${t.name}`}var Bm=new Lc("@firebase/app-check");function Vm(t,e){return Fc()?cU(t,e).catch(n=>{Bm.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function _C(){return vC().enabled}function bC(){return _(this,null,function*(){let t=vC();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var hU={error:"UNKNOWN_ERROR"};function fU(t){return jE.encodeString(JSON.stringify(t),!1)}function $m(t,e=!1){return _(this,null,function*(){let n=t.app;wC(n);let r=pn(n),i=r.token,o;if(i&&!du(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(du(u)?i=u:yield Vm(n,void 0))}if(!e&&i&&du(i))return{token:i.token};let s=!1;if(_C()){r.exchangeTokenPromise||(r.exchangeTokenPromise=EC(IC(n,yield bC()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield Vm(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield pn(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Bm.warn(u.message):Bm.error(u),o=u}let a;return i?o?du(i)?a={token:i.token,internalError:o}:a=mC(o):(a={token:i.token},r.token=i,yield Vm(n,i)):a=mC(o),s&&yU(n,a),a})}function pU(t){return _(this,null,function*(){let e=t.app;wC(e);let{provider:n}=pn(e);if(_C()){let r=yield bC(),{token:i}=yield EC(IC(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function gU(t,e,n,r){let{app:i}=t,o=pn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&du(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),gC(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>gC(t))}function DC(t,e){let n=pn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function gC(t){let{app:e}=t,n=pn(e),r=n.tokenRefresher;r||(r=mU(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function mU(t){let{app:e}=t;return new Um(()=>_(this,null,function*(){let n=pn(e),r;if(n.token?r=yield $m(t,!0):r=yield $m(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=pn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},pC.RETRIAL_MIN_WAIT,pC.RETRIAL_MAX_WAIT)}function yU(t,e){let n=pn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function du(t){return t.expireTimeMillis-Date.now()>0}function mC(t){return{token:fU(hU),error:t}}var qm=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=pn(this.app);for(let n of e)DC(this.app,n.next);return Promise.resolve()}};function vU(t,e){return new qm(t,e)}function wU(t){return{getToken:e=>$m(t,e),getLimitedUseToken:()=>pU(t),addTokenListener:e=>gU(t,"INTERNAL",e),removeTokenListener:e=>DC(t.app,e)}}var EU="@firebase/app-check",IU="0.8.3";var _U="app-check",yC="app-check-internal";function bU(){da(new gi(_U,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return vU(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(yC).initialize()})),da(new gi(yC,t=>{let e=t.getProvider("app-check").getImmediate();return wU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Cr(EU,IU)}bU();var DU=["localhost","0.0.0.0","127.0.0.1"],G8=typeof window<"u"&&DU.includes(window.location.hostname);var CU="firebase",TU="10.11.0";At.registerVersion(CU,TU,"app-compat");var AU=["ngOnDestroy"],AC=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(AU.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(c=>n.run(()=>c)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,c)=>s.then(h=>{let g=h?.(...c);return r?.spy?.apply&&r.spy.apply(o,c,g),g})})})});var bd=class{constructor(e){return e}},us=new $("angularfire2.app.options"),cs=new $("angularfire2.app.name");function hu(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=At.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>At.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;SU("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new bd(s)}var SU=(t,...e)=>{Fg()&&typeof console<"u"&&console[t](...e)},xU={provide:bd,useFactory:hu,deps:[us,Ie,[new Nl,cs]]},SC=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:us,useValue:n},{provide:cs,useValue:r}]}}constructor(n){At.registerVersion("angularfire",as.full,"core"),At.registerVersion("angularfire",as.full,"app-compat"),At.registerVersion("angular",Qb.full,n.toString())}static \u0275fac=function(r){return new(r||t)(R(Mt))};static \u0275mod=On({type:t});static \u0275inj=Nn({providers:[xU]})}return t})();function Dd(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return MU(i,s)||(TC("error",`${e} was already initialized on the ${n} Firebase App with different settings.${RU?" You may need to reload as Firebase is not HMR aware.":""}`),TC("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function MU(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var RU=typeof module<"u"&&!!module.hot,TC=(t,...e)=>{Fg()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var zm=new $("angularfire2.auth.use-emulator"),Hm=new $("angularfire2.auth.settings"),Gm=new $("angularfire2.auth.tenant-id"),Wm=new $("angularfire2.auth.langugage-code"),Km=new $("angularfire2.auth.use-device-language"),Qm=new $("angularfire.auth.persistence"),Ym=(t,e,n,r,i,o,s,a)=>Dd(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[c,h]of Object.entries(s))u.settings[c]=h;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]),Cd=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,c,h,g,m,v){let T=new qe,b=H(void 0).pipe(Gt(s.outsideAngular),ke(()=>o.runOutsideAngular(()=>import("./chunk-NVRRYZ7T.js"))),z(()=>hu(n,o,r)),z(I=>Ym(I,o,a,c,h,g,u,m)),al({bufferSize:1,refCount:!1}));if(Lr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=H(null);else{b.pipe(Wt()).subscribe();let I=b.pipe(ke(M=>M.getRedirectResult().then(V=>V,()=>null)),Nt,al({bufferSize:1,refCount:!1})),x=b.pipe(ke(M=>new ue(V=>({unsubscribe:o.runOutsideAngular(()=>M.onAuthStateChanged(W=>V.next(W),W=>V.error(W),()=>V.complete()))})))),U=b.pipe(ke(M=>new ue(V=>({unsubscribe:o.runOutsideAngular(()=>M.onIdTokenChanged(W=>V.next(W),W=>V.error(W),()=>V.complete()))}))));this.authState=I.pipe(ul(x),sn(s.outsideAngular),Gt(s.insideAngular)),this.user=I.pipe(ul(U),sn(s.outsideAngular),Gt(s.insideAngular)),this.idToken=this.user.pipe(ke(M=>M?me(M.getIdToken()):H(null))),this.idTokenResult=this.user.pipe(ke(M=>M?me(M.getIdTokenResult()):H(null))),this.credential=ap(I,T,this.authState.pipe(nt(M=>!M))).pipe(z(M=>M?.user?M:null),sn(s.outsideAngular),Gt(s.insideAngular))}return AC(this,b,o,{spy:{apply:(I,x,U)=>{(I.startsWith("signIn")||I.startsWith("createUser"))&&U.then(M=>T.next(M))}}})}static \u0275fac=function(r){return new(r||t)(R(us),R(cs,8),R(Mt),R(Ie),R(Id),R(zm,8),R(Hm,8),R(Gm,8),R(Wm,8),R(Km,8),R(Qm,8),R(Oi,8))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var RC=(()=>{let e=class e{constructor(r,i){this.afAuth=r,this.router=i}login(r,i,o){return _(this,null,function*(){o.preventDefault();try{let s=yield this.afAuth.signInWithEmailAndPassword(r,i);console.log("Autenticaci\xF3n exitosa:",s.user),s.user&&this.router.navigate(["/home"])}catch(s){console.error("ERROR! ESA CUENTA NO EXISTE",s),MC.default.fire({icon:"error",title:"Login Error",text:"ERROR! ESA CUENTA NO EXISTE",heightAuto:!1})}})}fillFields(r,i){let o=document.querySelector(".login-username"),s=document.querySelector(".login-password");o&&s&&(o.value=r,s.value=i)}};e.\u0275fac=function(i){return new(i||e)(Wo(Cd),Wo(wd))},e.\u0275cmp=kn({type:e,selectors:[["app-login"]],decls:21,vars:0,consts:[["email",""],["password",""],[1,"header"],[1,"form_class",3,"submit"],[1,"body"],[1,"login"],["type","email","autofocus","true","required","true","placeholder","Email",1,"login-username"],["type","password","required","true","placeholder","Password",1,"login-password"],["type","submit","name","Login","value","Login",1,"login-submit"],[1,"fill-button",3,"click"]],template:function(i,o){if(i&1){let s=Kb();Rt(0,"main")(1,"div",2)(2,"div"),Ln(3,"Sakura"),Rt(4,"span"),Ln(5,"Games"),hn()()(),fn(6,"br"),Rt(7,"form",3),Si("submit",function(u){Oa(s);let c=Ng(11),h=Ng(13);return Fa(o.login(c.value,h.value,u))}),fn(8,"div",4),Rt(9,"div",5),fn(10,"input",6,0)(12,"input",7,1)(14,"input",8),Rt(15,"button",9),Si("click",function(){return Oa(s),Fa(o.fillFields("santi@santi.com","123456"))}),Ln(16,"Usuario Santi"),hn(),Rt(17,"button",9),Si("click",function(){return Oa(s),Fa(o.fillFields("admin@admin.com","123456"))}),Ln(18,"Usuario Admin"),hn(),Rt(19,"button",9),Si("click",function(){return Oa(s),Fa(o.fillFields("agustin@agustin.com","123456"))}),Ln(20,"Usuario Agustin"),hn()()()()}},styles:['@font-face{font-family:Exo;font-style:normal;font-weight:100;src:url(https://fonts.gstatic.com/s/exo/v21/4UaOrEtFpBISfH6jyDM.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Exo;font-style:normal;font-weight:100;src:url(https://fonts.gstatic.com/s/exo/v21/4UaOrEtFpBISfX6jyDM.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Exo;font-style:normal;font-weight:100;src:url(https://fonts.gstatic.com/s/exo/v21/4UaOrEtFpBISc36j.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Exo;font-style:normal;font-weight:200;src:url(https://fonts.gstatic.com/s/exo/v21/4UaOrEtFpBISfH6jyDM.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Exo;font-style:normal;font-weight:200;src:url(https://fonts.gstatic.com/s/exo/v21/4UaOrEtFpBISfX6jyDM.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Exo;font-style:normal;font-weight:200;src:url(https://fonts.gstatic.com/s/exo/v21/4UaOrEtFpBISc36j.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Exo;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/exo/v21/4UaOrEtFpBISfH6jyDM.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Exo;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/exo/v21/4UaOrEtFpBISfX6jyDM.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Exo;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/exo/v21/4UaOrEtFpBISc36j.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xKydSBYKcSV-LCoeQqfX1RYOo3ik4zwmhduz8A.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xKydSBYKcSV-LCoeQqfX1RYOo3ik4zwkxduz8A.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xKydSBYKcSV-LCoeQqfX1RYOo3ik4zwmxduz8A.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xKydSBYKcSV-LCoeQqfX1RYOo3ik4zwlBduz8A.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xKydSBYKcSV-LCoeQqfX1RYOo3ik4zwmBduz8A.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xKydSBYKcSV-LCoeQqfX1RYOo3ik4zwmRduz8A.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xKydSBYKcSV-LCoeQqfX1RYOo3ik4zwlxdu.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xK3dSBYKcSV-LCoeQqfX1RYOo3qNa7lqDY.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xK3dSBYKcSV-LCoeQqfX1RYOo3qPK7lqDY.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xK3dSBYKcSV-LCoeQqfX1RYOo3qNK7lqDY.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xK3dSBYKcSV-LCoeQqfX1RYOo3qO67lqDY.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xK3dSBYKcSV-LCoeQqfX1RYOo3qN67lqDY.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xK3dSBYKcSV-LCoeQqfX1RYOo3qNq7lqDY.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7l.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwmhduz8A.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwkxduz8A.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwmxduz8A.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwlBduz8A.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwmBduz8A.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwmRduz8A.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/sourcesanspro/v22/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwlxdu.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{margin:0;padding:0;background:#fff;color:#fff;font-family:Arial;font-size:12px}.body[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;background-image:url(https://static.vecteezy.com/system/resources/previews/030/657/195/large_2x/a-simple-digital-wallpaper-minimalist-free-photo.jpg);background-size:cover;-webkit-filter:blur(5px);z-index:0}.header[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 35px);left:calc(50% - 255px);z-index:2}.header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{float:left;color:#fff;font-family:Exo,sans-serif;font-size:32px;font-weight:200}.header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#b32428!important}.login[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 75px);left:calc(50% - 50px);height:150px;width:350px;padding:10px;z-index:2}.login[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{width:250px;height:30px;background:transparent;border:1px solid rgba(255,255,255,.6);border-radius:2px;color:#fff;font-family:Exo,sans-serif;font-size:16px;font-weight:400;padding:4px}.login[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:250px;height:30px;background:transparent;border:1px solid rgba(255,255,255,.6);border-radius:2px;color:#fff;font-family:Exo,sans-serif;font-size:16px;font-weight:400;padding:4px;margin-top:10px}.login[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{width:260px;height:35px;background:#fff;border:1px solid #fff;cursor:pointer;border-radius:2px;color:#b32428;font-family:Exo,sans-serif;font-size:16px;font-weight:400;padding:6px;margin-top:10px}.login[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:hover{opacity:.8}.login[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:active{opacity:.6}.login[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{outline:none;border:1px solid rgba(255,255,255,.9)}.login[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{outline:none;border:1px solid rgba(255,255,255,.9)}.login[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]:focus{outline:none}[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#fff9}[_ngcontent-%COMP%]::-moz-input-placeholder{color:#fff9}.fill-button[_ngcontent-%COMP%]{width:260px;height:35px;background:#fff;border:1px solid #fff;cursor:pointer;border-radius:2px;color:#b32428;font-family:Exo,sans-serif;font-size:16px;font-weight:400;padding:6px;margin-top:10px;position:fixed;bottom:20px}.fill-button[_ngcontent-%COMP%]:nth-of-type(1){right:20px}.fill-button[_ngcontent-%COMP%]:nth-of-type(2){right:290px}.fill-button[_ngcontent-%COMP%]:nth-of-type(3){right:560px}.fill-button[_ngcontent-%COMP%]:hover{background:#b32428;color:#fff}.fill-button[_ngcontent-%COMP%]{display:inline-block}']});let t=e;return t})();var PC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=kn({type:e,selectors:[["app-quien-soy"]],standalone:!0,features:[Fr],decls:2,vars:0,template:function(i,o){i&1&&(Rt(0,"p"),Ln(1,"quien-soy works!"),hn())}});let t=e;return t})();var NC=[{path:"home",component:dC},{path:"login",component:RC},{path:"quien_soy",component:PC},{path:"",redirectTo:"/login",pathMatch:"full"}];var PU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mn={},k,vy=vy||{},Z=PU||self;function Ud(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Tu(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function NU(t){return Object.prototype.hasOwnProperty.call(t,Zm)&&t[Zm]||(t[Zm]=++kU)}var Zm="closure_uid_"+(1e9*Math.random()>>>0),kU=0;function OU(t,e,n){return t.call.apply(t.bind,arguments)}function FU(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function gt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?gt=OU:gt=FU,gt.apply(null,arguments)}function Td(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function it(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function qr(){this.s=this.s,this.o=this.o}var LU=0;qr.prototype.s=!1;qr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),LU!=0)&&NU(this)};qr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var GC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function wy(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function kC(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Ud(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function mt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}mt.prototype.h=function(){this.defaultPrevented=!0};var VU=function(){if(!Z.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};Z.addEventListener("test",n,e),Z.removeEventListener("test",n,e)}catch{}return t}();function vu(t){return/^[\s\xa0]*$/.test(t)}function jd(){var t=Z.navigator;return t&&(t=t.userAgent)?t:""}function Bn(t){return jd().indexOf(t)!=-1}function Ey(t){return Ey[" "](t),t}Ey[" "]=function(){};function UU(t,e){var n=Aj;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var jU=Bn("Opera"),fs=Bn("Trident")||Bn("MSIE"),WC=Bn("Edge"),ny=WC||fs,KC=Bn("Gecko")&&!(jd().toLowerCase().indexOf("webkit")!=-1&&!Bn("Edge"))&&!(Bn("Trident")||Bn("MSIE"))&&!Bn("Edge"),BU=jd().toLowerCase().indexOf("webkit")!=-1&&!Bn("Edge");function QC(){var t=Z.document;return t?t.documentMode:void 0}var ry;e:{if(Ad="",Sd=function(){var t=jd();if(KC)return/rv:([^\);]+)(\)|;)/.exec(t);if(WC)return/Edge\/([\d\.]+)/.exec(t);if(fs)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(BU)return/WebKit\/(\S+)/.exec(t);if(jU)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Sd&&(Ad=Sd?Sd[1]:""),fs&&(xd=QC(),xd!=null&&xd>parseFloat(Ad))){ry=String(xd);break e}ry=Ad}var Ad,Sd,xd,iy;Z.document&&fs?(Xm=QC(),iy=Xm||parseInt(ry,10)||void 0):iy=void 0;var Xm,$U=iy;function wu(t,e){if(mt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(KC){e:{try{Ey(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:qU[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&wu.$.h.call(this)}}it(wu,mt);var qU={2:"touch",3:"pen",4:"mouse"};wu.prototype.h=function(){wu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Au="closure_listenable_"+(1e6*Math.random()|0),zU=0;function HU(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++zU,this.fa=this.ia=!1}function Bd(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Iy(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function GU(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function YC(t){let e={};for(let n in t)e[n]=t[n];return e}var OC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ZC(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<OC.length;o++)n=OC[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function $d(t){this.src=t,this.g={},this.h=0}$d.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=sy(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new HU(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function oy(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=GC(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Bd(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function sy(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var _y="closure_lm_"+(1e6*Math.random()|0),Jm={};function XC(t,e,n,r,i){if(r&&r.once)return eT(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)XC(t,e[o],n,r,i);return null}return n=Cy(n),t&&t[Au]?t.O(e,n,Tu(r)?!!r.capture:!!r,i):JC(t,e,n,!1,r,i)}function JC(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Tu(i)?!!i.capture:!!i,a=Dy(t);if(a||(t[_y]=a=new $d(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=WU(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)VU||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(nT(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function WU(){function t(n){return e.call(t.src,t.listener,n)}let e=KU;return t}function eT(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)eT(t,e[o],n,r,i);return null}return n=Cy(n),t&&t[Au]?t.P(e,n,Tu(r)?!!r.capture:!!r,i):JC(t,e,n,!0,r,i)}function tT(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)tT(t,e[o],n,r,i);else r=Tu(r)?!!r.capture:!!r,n=Cy(n),t&&t[Au]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=sy(o,n,r,i),-1<n&&(Bd(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=Dy(t))&&(e=t.g[e.toString()],t=-1,e&&(t=sy(e,n,r,i)),(n=-1<t?e[t]:null)&&by(n))}function by(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Au])oy(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(nT(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Dy(e))?(oy(n,t),n.h==0&&(n.src=null,e[_y]=null)):Bd(t)}}}function nT(t){return t in Jm?Jm[t]:Jm[t]="on"+t}function KU(t,e){if(t.fa)t=!0;else{e=new wu(e,this);var n=t.listener,r=t.la||t.src;t.ia&&by(t),t=n.call(r,e)}return t}function Dy(t){return t=t[_y],t instanceof $d?t:null}var ey="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cy(t){return typeof t=="function"?t:(t[ey]||(t[ey]=function(e){return t.handleEvent(e)}),t[ey])}function rt(){qr.call(this),this.i=new $d(this),this.S=this,this.J=null}it(rt,qr);rt.prototype[Au]=!0;rt.prototype.removeEventListener=function(t,e,n,r){tT(this,t,e,n,r)};function lt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new mt(e,t);else if(e instanceof mt)e.target=e.target||t;else{var i=e;e=new mt(r,t),ZC(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Md(s,r,!0,e)&&i}if(s=e.g=t,i=Md(s,r,!0,e)&&i,i=Md(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=Md(s,r,!1,e)&&i}rt.prototype.N=function(){if(rt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Bd(n[r]);delete t.g[e],t.h--}}this.J=null};rt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};rt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Md(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&oy(t.i,s),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var Ty=Z.JSON.stringify,ay=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function QU(){var t=Ay;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var uy=class{constructor(){this.h=this.g=null}add(e,n){let r=rT.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},rT=new ay(()=>new cy,t=>t.reset()),cy=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function YU(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function ZU(t){Z.setTimeout(()=>{throw t},0)}var Eu,Iu=!1,Ay=new uy,iT=()=>{let t=Z.Promise.resolve(void 0);Eu=()=>{t.then(XU)}},XU=()=>{for(var t;t=QU();){try{t.h.call(t.g)}catch(n){ZU(n)}var e=rT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Iu=!1};function qd(t,e){rt.call(this),this.h=t||1,this.g=e||Z,this.j=gt(this.qb,this),this.l=Date.now()}it(qd,rt);k=qd.prototype;k.ga=!1;k.T=null;k.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),lt(this,"tick"),this.ga&&(Sy(this),this.start()))}};k.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Sy(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}k.N=function(){qd.$.N.call(this),Sy(this),delete this.g};function xy(t,e,n){if(typeof t=="function")n&&(t=gt(t,n));else if(t&&typeof t.handleEvent=="function")t=gt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Z.setTimeout(t,e||0)}function oT(t){t.g=xy(()=>{t.g=null,t.i&&(t.i=!1,oT(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var ly=class extends qr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:oT(this)}N(){super.N(),this.g&&(Z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function _u(t){qr.call(this),this.h=t,this.g={}}it(_u,qr);var FC=[];function sT(t,e,n,r){Array.isArray(n)||(n&&(FC[0]=n.toString()),n=FC);for(var i=0;i<n.length;i++){var o=XC(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function aT(t){Iy(t.g,function(e,n){this.g.hasOwnProperty(n)&&by(e)},t),t.g={}}_u.prototype.N=function(){_u.$.N.call(this),aT(this)};_u.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function zd(){this.g=!0}zd.prototype.Ea=function(){this.g=!1};function JU(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var g=h.split("_");s=2<=g.length&&g[1]=="type"?s+(h+"="+c+"&"):s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function ej(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function ds(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+nj(t,n)+(r?" "+r:"")})}function tj(t,e){t.info(function(){return"TIMEOUT: "+e})}zd.prototype.info=function(){};function nj(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return Ty(n)}catch{return e}}var Ui={},LC=null;function Hd(){return LC=LC||new rt}Ui.Ta="serverreachability";function uT(t){mt.call(this,Ui.Ta,t)}it(uT,mt);function bu(t){let e=Hd();lt(e,new uT(e))}Ui.STAT_EVENT="statevent";function cT(t,e){mt.call(this,Ui.STAT_EVENT,t),this.stat=e}it(cT,mt);function It(t){let e=Hd();lt(e,new cT(e,t))}Ui.Ua="timingevent";function lT(t,e){mt.call(this,Ui.Ua,t),this.size=e}it(lT,mt);function Su(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Z.setTimeout(function(){t()},e)}var Gd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},dT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function My(){}My.prototype.h=null;function VC(t){return t.h||(t.h=t.i())}function hT(){}var xu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ry(){mt.call(this,"d")}it(Ry,mt);function Py(){mt.call(this,"c")}it(Py,mt);var dy;function Wd(){}it(Wd,My);Wd.prototype.g=function(){return new XMLHttpRequest};Wd.prototype.i=function(){return{}};dy=new Wd;function Mu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new _u(this),this.P=rj,t=ny?125:void 0,this.V=new qd(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new fT}function fT(){this.i=null,this.g="",this.h=!1}var rj=45e3,pT={},hy={};k=Mu.prototype;k.setTimeout=function(t){this.P=t};function fy(t,e,n){t.L=1,t.A=Qd(dr(e)),t.u=n,t.S=!0,gT(t,null)}function gT(t,e){t.G=Date.now(),Ru(t),t.B=dr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),bT(n.i,"t",r),t.o=0,n=t.l.J,t.h=new fT,t.g=zT(t.l,n?e:null,!t.u),0<t.O&&(t.M=new ly(gt(t.Pa,t,t.g),t.O)),sT(t.U,t.g,"readystatechange",t.nb),e=t.I?YC(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),bu(),JU(t.j,t.v,t.B,t.m,t.W,t.u)}k.nb=function(t){t=t.target;let e=this.M;e&&$n(t)==3?e.l():this.Pa(t)};k.Pa=function(t){try{if(t==this.g)e:{let h=$n(this.g);var e=this.g.Ia();let g=this.g.da();if(!(3>h)&&(h!=3||ny||this.g&&(this.h.h||this.g.ja()||$C(this.g)))){this.J||h!=4||e==7||(e==8||0>=g?bu(3):bu(2)),Kd(this);var n=this.g.da();this.ca=n;t:if(mT(this)){var r=$C(this.g);t="";var i=r.length,o=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fi(this),yu(this);var s="";break t}this.h.i=new Z.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,ej(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vu(a)){var c=a;break t}}c=null}if(n=c)ds(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,py(this,n);else{this.i=!1,this.s=3,It(12),Fi(this),yu(this);break e}}this.S?(yT(this,h,s),ny&&this.i&&h==3&&(sT(this.U,this.V,"tick",this.mb),this.V.start())):(ds(this.j,this.m,s,null),py(this,s)),h==4&&Fi(this),this.i&&!this.J&&(h==4?jT(this.l,this):(this.i=!1,Ru(this)))}else Dj(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),Fi(this),yu(this)}}}catch{}finally{}};function mT(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function yT(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=ij(t,n),i==hy){e==4&&(t.s=4,It(14),r=!1),ds(t.j,t.m,null,"[Incomplete Response]");break}else if(i==pT){t.s=4,It(15),ds(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ds(t.j,t.m,i,null),py(t,i);mT(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,It(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Vy(e),e.M=!0,It(11))):(ds(t.j,t.m,n,"[Invalid Chunked Response]"),Fi(t),yu(t))}k.mb=function(){if(this.g){var t=$n(this.g),e=this.g.ja();this.o<e.length&&(Kd(this),yT(this,t,e),this.i&&t!=4&&Ru(this))}};function ij(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?hy:(n=Number(e.substring(n,r)),isNaN(n)?pT:(r+=1,r+n>e.length?hy:(e=e.slice(r,r+n),t.o=r+n,e)))}k.cancel=function(){this.J=!0,Fi(this)};function Ru(t){t.Y=Date.now()+t.P,vT(t,t.P)}function vT(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Su(gt(t.lb,t),e)}function Kd(t){t.C&&(Z.clearTimeout(t.C),t.C=null)}k.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(tj(this.j,this.B),this.L!=2&&(bu(),It(17)),Fi(this),this.s=2,yu(this)):vT(this,this.Y-t)};function yu(t){t.l.H==0||t.J||jT(t.l,t)}function Fi(t){Kd(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Sy(t.V),aT(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function py(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||gy(n.i,t))){if(!t.K&&gy(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Od(n),Xd(n);else break e;Ly(n),It(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Su(gt(n.ib,n),6e3));if(1>=TT(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Li(n,11)}else if((t.K||n.g==t)&&Od(n),!vu(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];let h=c[3];h!=null&&(n.ra=h,n.l.info("VER="+n.ra));let g=c[4];g!=null&&(n.Ga=g,n.l.info("SVER="+n.Ga));let m=c[5];m!=null&&typeof m=="number"&&0<m&&(r=1.5*m,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let v=t.g;if(v){let T=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(T){var o=r.i;o.g||T.indexOf("spdy")==-1&&T.indexOf("quic")==-1&&T.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(Ny(o,o.h),o.h=null))}if(r.F){let b=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;b&&(r.Da=b,Se(r.I,r.F,b))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=qT(r,r.J?r.pa:null,r.Y),s.K){AT(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(Kd(a),Ru(a)),r.g=s}else VT(r);0<n.j.length&&Jd(n)}else c[0]!="stop"&&c[0]!="close"||Li(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Li(n,7):Fy(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}bu(4)}catch{}}function oj(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Ud(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function sj(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Ud(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function wT(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Ud(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=sj(t),r=oj(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var ET=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aj(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Vi(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Vi){this.h=t.h,Nd(this,t.j),this.s=t.s,this.g=t.g,kd(this,t.m),this.l=t.l;var e=t.i,n=new Du;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),UC(this,n),this.o=t.o}else t&&(e=String(t).match(ET))?(this.h=!1,Nd(this,e[1]||"",!0),this.s=gu(e[2]||""),this.g=gu(e[3]||"",!0),kd(this,e[4]),this.l=gu(e[5]||"",!0),UC(this,e[6]||"",!0),this.o=gu(e[7]||"")):(this.h=!1,this.i=new Du(null,this.h))}Vi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(mu(e,jC,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(mu(e,jC,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(mu(n,n.charAt(0)=="/"?lj:cj,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",mu(n,hj)),t.join("")};function dr(t){return new Vi(t)}function Nd(t,e,n){t.j=n?gu(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function kd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function UC(t,e,n){e instanceof Du?(t.i=e,fj(t.i,t.h)):(n||(e=mu(e,dj)),t.i=new Du(e,t.h))}function Se(t,e,n){t.i.set(e,n)}function Qd(t){return Se(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function gu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function mu(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,uj),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function uj(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var jC=/[#\/\?@]/g,cj=/[#\?:]/g,lj=/[#\?]/g,dj=/[#\?@]/g,hj=/#/g;function Du(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function zr(t){t.g||(t.g=new Map,t.h=0,t.i&&aj(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}k=Du.prototype;k.add=function(t,e){zr(this),this.i=null,t=ps(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function IT(t,e){zr(t),e=ps(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function _T(t,e){return zr(t),e=ps(t,e),t.g.has(e)}k.forEach=function(t,e){zr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};k.ta=function(){zr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};k.Z=function(t){zr(this);let e=[];if(typeof t=="string")_T(this,t)&&(e=e.concat(this.g.get(ps(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};k.set=function(t,e){return zr(this),this.i=null,t=ps(this,t),_T(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};k.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function bT(t,e,n){IT(t,e),0<n.length&&(t.i=null,t.g.set(ps(t,e),wy(n)),t.h+=n.length)}k.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function ps(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function fj(t,e){e&&!t.j&&(zr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(IT(this,r),bT(this,i,n))},t)),t.j=e}var pj=class{constructor(t,e){this.g=t,this.map=e}};function DT(t){this.l=t||gj,Z.PerformanceNavigationTiming?(t=Z.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Z.g&&Z.g.Ka&&Z.g.Ka()&&Z.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var gj=10;function CT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function TT(t){return t.h?1:t.g?t.g.size:0}function gy(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Ny(t,e){t.g?t.g.add(e):t.h=e}function AT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}DT.prototype.cancel=function(){if(this.i=ST(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function ST(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return wy(t.i)}var mj=class{stringify(t){return Z.JSON.stringify(t,void 0)}parse(t){return Z.JSON.parse(t,void 0)}};function yj(){this.g=new mj}function vj(t,e,n){let r=n||"";try{wT(t,function(i,o){let s=i;Tu(i)&&(s=Ty(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function wj(t,e){let n=new zd;if(Z.Image){let r=new Image;r.onload=Td(Rd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Td(Rd,n,r,"TestLoadImage: error",!1,e),r.onabort=Td(Rd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Td(Rd,n,r,"TestLoadImage: timeout",!1,e),Z.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Rd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Pu(t){this.l=t.ec||null,this.j=t.ob||!1}it(Pu,My);Pu.prototype.g=function(){return new Yd(this.l,this.j)};Pu.prototype.i=function(t){return function(){return t}}({});function Yd(t,e){rt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=ky,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}it(Yd,rt);var ky=0;k=Yd.prototype;k.open=function(t,e){if(this.readyState!=ky)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Cu(this)};k.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Z).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};k.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nu(this)),this.readyState=ky};k.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Cu(this)),this.g&&(this.readyState=3,Cu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Z.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xT(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function xT(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}k.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Nu(this):Cu(this),this.readyState==3&&xT(this)}};k.Za=function(t){this.g&&(this.response=this.responseText=t,Nu(this))};k.Ya=function(t){this.g&&(this.response=t,Nu(this))};k.ka=function(){this.g&&Nu(this)};function Nu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Cu(t)}k.setRequestHeader=function(t,e){this.v.append(t,e)};k.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};k.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Cu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Yd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Ej=Z.JSON.parse;function Le(t){rt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=MT,this.L=this.M=!1}it(Le,rt);var MT="",Ij=/^https?$/i,_j=["POST","PUT"];k=Le.prototype;k.Oa=function(t){this.M=t};k.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():dy.g(),this.C=this.u?VC(this.u):VC(dy),this.g.onreadystatechange=gt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){BC(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=Z.FormData&&t instanceof Z.FormData,!(0<=GC(_j,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{NT(this),0<this.B&&((this.L=bj(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gt(this.ua,this)):this.A=xy(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){BC(this,o)}};function bj(t){return fs&&typeof t.timeout=="number"&&t.ontimeout!==void 0}k.ua=function(){typeof vy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,lt(this,"timeout"),this.abort(8))};function BC(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,RT(t),Zd(t)}function RT(t){t.F||(t.F=!0,lt(t,"complete"),lt(t,"error"))}k.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,lt(this,"complete"),lt(this,"abort"),Zd(this))};k.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zd(this,!0)),Le.$.N.call(this)};k.La=function(){this.s||(this.G||this.v||this.l?PT(this):this.kb())};k.kb=function(){PT(this)};function PT(t){if(t.h&&typeof vy<"u"&&(!t.C[1]||$n(t)!=4||t.da()!=2)){if(t.v&&$n(t)==4)xy(t.La,0,t);else if(lt(t,"readystatechange"),$n(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(ET)[1]||null;!i&&Z.self&&Z.self.location&&(i=Z.self.location.protocol.slice(0,-1)),r=!Ij.test(i?i.toLowerCase():"")}n=r}if(n)lt(t,"complete"),lt(t,"success");else{t.m=6;try{var o=2<$n(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",RT(t)}}finally{Zd(t)}}}}function Zd(t,e){if(t.g){NT(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||lt(t,"ready");try{n.onreadystatechange=r}catch{}}}function NT(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Z.clearTimeout(t.A),t.A=null)}k.isActive=function(){return!!this.g};function $n(t){return t.g?t.g.readyState:0}k.da=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}};k.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};k.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Ej(e)}};function $C(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case MT:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Dj(t){let e={};t=(t.g&&2<=$n(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(vu(t[r]))continue;var n=YU(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}GU(e,function(r){return r.join(", ")})}k.Ia=function(){return this.m};k.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function kT(t){let e="";return Iy(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Oy(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=kT(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Se(t,e,n))}function fu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function OT(t){this.Ga=0,this.j=[],this.l=new zd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=fu("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=fu("baseRetryDelayMs",5e3,t),this.hb=fu("retryDelaySeedMs",1e4,t),this.eb=fu("forwardChannelMaxRetries",2,t),this.xa=fu("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new DT(t&&t.concurrentRequestLimit),this.Ja=new yj,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}k=OT.prototype;k.ra=8;k.H=1;function Fy(t){if(FT(t),t.H==3){var e=t.W++,n=dr(t.I);if(Se(n,"SID",t.K),Se(n,"RID",e),Se(n,"TYPE","terminate"),ku(t,n),e=new Mu(t,t.l,e),e.L=2,e.A=Qd(dr(n)),n=!1,Z.navigator&&Z.navigator.sendBeacon)try{n=Z.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Z.Image&&(new Image().src=e.A,n=!0),n||(e.g=zT(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Ru(e)}$T(t)}function Xd(t){t.g&&(Vy(t),t.g.cancel(),t.g=null)}function FT(t){Xd(t),t.u&&(Z.clearTimeout(t.u),t.u=null),Od(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Z.clearTimeout(t.m),t.m=null)}function Jd(t){if(!CT(t.i)&&!t.m){t.m=!0;var e=t.Na;Eu||iT(),Iu||(Eu(),Iu=!0),Ay.add(e,t),t.C=0}}function Cj(t,e){return TT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Su(gt(t.Na,t,e),BT(t,t.C)),t.C++,!0)}k.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Mu(this,this.l,t),o=this.s;if(this.U&&(o?(o=YC(o),ZC(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=LT(this,i,e),n=dr(this.I),Se(n,"RID",t),Se(n,"CVER",22),this.F&&Se(n,"X-HTTP-Session-Id",this.F),ku(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(kT(o)))+"&"+e:this.o&&Oy(n,this.o,o)),Ny(this.i,i),this.bb&&Se(n,"TYPE","init"),this.P?(Se(n,"$req",e),Se(n,"SID","null"),i.aa=!0,fy(i,n,null)):fy(i,n,e),this.H=2}}else this.H==3&&(t?qC(this,t):this.j.length==0||CT(this.i)||qC(this))};function qC(t,e){var n;e?n=e.m:n=t.W++;let r=dr(t.I);Se(r,"SID",t.K),Se(r,"RID",n),Se(r,"AID",t.V),ku(t,r),t.o&&t.s&&Oy(r,t.o,t.s),n=new Mu(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=LT(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Ny(t.i,n),fy(n,r,e)}function ku(t,e){t.na&&Iy(t.na,function(n,r){Se(e,r,n)}),t.h&&wT({},function(n,r){Se(e,r,n)})}function LT(t,e,n){n=Math.min(t.j.length,n);var r=t.h?gt(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<n;u++){let c=i[u].g,h=i[u].map;if(c-=o,0>c)o=Math.max(0,i[u].g-100),a=!1;else try{vj(h,s,"req"+c+"_")}catch{r&&r(h)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function VT(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Eu||iT(),Iu||(Eu(),Iu=!0),Ay.add(e,t),t.A=0}}function Ly(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Su(gt(t.Ma,t),BT(t,t.A)),t.A++,!0)}k.Ma=function(){if(this.u=null,UT(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Su(gt(this.jb,this),t)}};k.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,It(10),Xd(this),UT(this))};function Vy(t){t.B!=null&&(Z.clearTimeout(t.B),t.B=null)}function UT(t){t.g=new Mu(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=dr(t.wa);Se(e,"RID","rpc"),Se(e,"SID",t.K),Se(e,"AID",t.V),Se(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Se(e,"TO",t.qa),Se(e,"TYPE","xmlhttp"),ku(t,e),t.o&&t.s&&Oy(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Qd(dr(e)),n.u=null,n.S=!0,gT(n,t)}k.ib=function(){this.v!=null&&(this.v=null,Xd(this),Ly(this),It(19))};function Od(t){t.v!=null&&(Z.clearTimeout(t.v),t.v=null)}function jT(t,e){var n=null;if(t.g==e){Od(t),Vy(t),t.g=null;var r=2}else if(gy(t.i,e))n=e.F,AT(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Hd(),lt(r,new lT(r,n)),Jd(t)}else VT(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&Cj(t,e)||r==2&&Ly(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Li(t,5);break;case 4:Li(t,10);break;case 3:Li(t,6);break;default:Li(t,2)}}}function BT(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Li(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=gt(t.pb,t);n||(n=new Vi("//www.google.com/images/cleardot.gif"),Z.location&&Z.location.protocol=="http"||Nd(n,"https"),Qd(n)),wj(n.toString(),r)}else It(2);t.H=0,t.h&&t.h.za(e),$T(t),FT(t)}k.pb=function(t){t?(this.l.info("Successfully pinged google.com"),It(2)):(this.l.info("Failed to ping google.com"),It(1))};function $T(t){if(t.H=0,t.ma=[],t.h){let e=ST(t.i);(e.length!=0||t.j.length!=0)&&(kC(t.ma,e),kC(t.ma,t.j),t.i.i.length=0,wy(t.j),t.j.length=0),t.h.ya()}}function qT(t,e,n){var r=n instanceof Vi?dr(n):new Vi(n);if(r.g!="")e&&(r.g=e+"."+r.g),kd(r,r.m);else{var i=Z.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Vi(null);r&&Nd(o,r),e&&(o.g=e),i&&kd(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&Se(r,n,e),Se(r,"VER",t.ra),ku(t,r),r}function zT(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Le(new Pu({ob:n})):new Le(t.va),e.Oa(t.J),e}k.isActive=function(){return!!this.h&&this.h.isActive(this)};function HT(){}k=HT.prototype;k.Ba=function(){};k.Aa=function(){};k.za=function(){};k.ya=function(){};k.isActive=function(){return!0};k.Va=function(){};function Fd(){if(fs&&!(10<=Number($U)))throw Error("Environmental error: no available transport.")}Fd.prototype.g=function(t,e){return new $t(t,e)};function $t(t,e){rt.call(this),this.g=new OT(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!vu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vu(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new gs(this)}it($t,rt);$t.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;It(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=qT(t,null,t.Y),Jd(t)};$t.prototype.close=function(){Fy(this.g)};$t.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ty(t),t=n);e.j.push(new pj(e.fb++,t)),e.H==3&&Jd(e)};$t.prototype.N=function(){this.g.h=null,delete this.j,Fy(this.g),delete this.g,$t.$.N.call(this)};function GT(t){Ry.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}it(GT,Ry);function WT(){Py.call(this),this.status=1}it(WT,Py);function gs(t){this.g=t}it(gs,HT);gs.prototype.Ba=function(){lt(this.g,"a")};gs.prototype.Aa=function(t){lt(this.g,new GT(t))};gs.prototype.za=function(t){lt(this.g,new WT)};gs.prototype.ya=function(){lt(this.g,"b")};function Tj(){this.blockSize=-1}function gn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}it(gn,Tj);gn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function ty(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}gn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)ty(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){ty(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){ty(this,r),i=0;break}}this.h=i,this.i+=e};gn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function _e(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var Aj={};function Uy(t){return-128<=t&&128>t?UU(t,function(e){return new _e([e|0],0>e?-1:0)}):new _e([t|0],0>t?-1:0)}function qn(t){if(isNaN(t)||!isFinite(t))return hs;if(0>t)return ct(qn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=my;return new _e(e,0)}function KT(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return ct(KT(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=qn(Math.pow(e,8)),r=hs,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=qn(Math.pow(e,o)),r=r.R(o).add(qn(s))):(r=r.R(n),r=r.add(qn(s)))}return r}var my=4294967296,hs=Uy(0),yy=Uy(1),zC=Uy(16777216);k=_e.prototype;k.ea=function(){if(Jt(this))return-ct(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:my+r)*e,e*=my}return t};k.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(lr(this))return"0";if(Jt(this))return"-"+ct(this).toString(t);for(var e=qn(Math.pow(t,6)),n=this,r="";;){var i=Vd(n,e).g;n=Ld(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,lr(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};k.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function lr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Jt(t){return t.h==-1}k.X=function(t){return t=Ld(this,t),Jt(t)?-1:lr(t)?0:1};function ct(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new _e(n,~t.h).add(yy)}k.abs=function(){return Jt(this)?ct(this):this};k.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new _e(n,n[n.length-1]&-2147483648?-1:0)};function Ld(t,e){return t.add(ct(e))}k.R=function(t){if(lr(this)||lr(t))return hs;if(Jt(this))return Jt(t)?ct(this).R(ct(t)):ct(ct(this).R(t));if(Jt(t))return ct(this.R(ct(t)));if(0>this.X(zC)&&0>t.X(zC))return qn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,u=t.D(i)&65535;n[2*r+2*i]+=s*u,Pd(n,2*r+2*i),n[2*r+2*i+1]+=o*u,Pd(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Pd(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Pd(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new _e(n,0)};function Pd(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function pu(t,e){this.g=t,this.h=e}function Vd(t,e){if(lr(e))throw Error("division by zero");if(lr(t))return new pu(hs,hs);if(Jt(t))return e=Vd(ct(t),e),new pu(ct(e.g),ct(e.h));if(Jt(e))return e=Vd(t,ct(e)),new pu(ct(e.g),e.h);if(30<t.g.length){if(Jt(t)||Jt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=yy,r=e;0>=r.X(t);)n=HC(n),r=HC(r);var i=ls(n,1),o=ls(r,1);for(r=ls(r,2),n=ls(n,2);!lr(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=ls(r,1),n=ls(n,1)}return e=Ld(t,i.R(e)),new pu(i,e)}for(i=hs;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=qn(n),s=o.R(e);Jt(s)||0<s.X(t);)n-=r,o=qn(n),s=o.R(e);lr(o)&&(o=yy),i=i.add(o),t=Ld(t,s)}return new pu(i,t)}k.gb=function(t){return Vd(this,t).h};k.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new _e(n,this.h&t.h)};k.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new _e(n,this.h|t.h)};k.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new _e(n,this.h^t.h)};function HC(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new _e(n,t.h)}function ls(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new _e(i,t.h)}Fd.prototype.createWebChannel=Fd.prototype.g;$t.prototype.send=$t.prototype.u;$t.prototype.open=$t.prototype.m;$t.prototype.close=$t.prototype.close;Gd.NO_ERROR=0;Gd.TIMEOUT=8;Gd.HTTP_ERROR=6;dT.COMPLETE="complete";hT.EventType=xu;xu.OPEN="a";xu.CLOSE="b";xu.ERROR="c";xu.MESSAGE="d";rt.prototype.listen=rt.prototype.O;Le.prototype.listenOnce=Le.prototype.P;Le.prototype.getLastError=Le.prototype.Sa;Le.prototype.getLastErrorCode=Le.prototype.Ia;Le.prototype.getStatus=Le.prototype.da;Le.prototype.getResponseJson=Le.prototype.Wa;Le.prototype.getResponseText=Le.prototype.ja;Le.prototype.send=Le.prototype.ha;Le.prototype.setWithCredentials=Le.prototype.Oa;gn.prototype.digest=gn.prototype.l;gn.prototype.reset=gn.prototype.reset;gn.prototype.update=gn.prototype.j;_e.prototype.add=_e.prototype.add;_e.prototype.multiply=_e.prototype.R;_e.prototype.modulo=_e.prototype.gb;_e.prototype.compare=_e.prototype.X;_e.prototype.toNumber=_e.prototype.ea;_e.prototype.toString=_e.prototype.toString;_e.prototype.getBits=_e.prototype.D;_e.fromNumber=qn;_e.fromString=KT;var QT=mn.createWebChannelTransport=function(){return new Fd},YT=mn.getStatEventTarget=function(){return Hd()},eh=mn.ErrorCode=Gd,ZT=mn.EventType=dT,XT=mn.Event=Ui,jy=mn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},DG=mn.FetchXmlHttpFactory=Pu,Ou=mn.WebChannel=hT,JT=mn.XhrIo=Le,eA=mn.Md5=gn,ji=mn.Integer=_e;var tA="@firebase/firestore";var Ye=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ye.UNAUTHENTICATED=new Ye(null),Ye.GOOGLE_CREDENTIALS=new Ye("google-credentials-uid"),Ye.FIRST_PARTY=new Ye("first-party-uid"),Ye.MOCK_USER=new Ye("mock-user");var Gs="10.11.0";var Zr=new Lc("@firebase/firestore");function Es(){return Zr.logLevel}function tS(t){Zr.setLogLevel(t)}function S(t,...e){if(Zr.logLevel<=Dn.DEBUG){let n=e.map(qw);Zr.debug(`Firestore (${Gs}): ${t}`,...n)}}function ze(t,...e){if(Zr.logLevel<=Dn.ERROR){let n=e.map(qw);Zr.error(`Firestore (${Gs}): ${t}`,...n)}}function tn(t,...e){if(Zr.logLevel<=Dn.WARN){let n=e.map(qw);Zr.warn(`Firestore (${Gs}): ${t}`,...n)}}function qw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function L(t="Unexpected state"){let e=`FIRESTORE (${Gs}) INTERNAL ASSERTION FAILED: `+t;throw ze(e),new Error(e)}function j(t,e){t||L()}function nS(t,e){t||L()}function N(t,e){return t}var E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},A=class extends $E{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ze=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var dh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Hy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ye.UNAUTHENTICATED))}shutdown(){}},Gy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Wy=class{constructor(e){this.t=e,this.currentUser=Ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Ze;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ze,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{S("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(S("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ze)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(S("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(j(typeof r.accessToken=="string"),new dh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return j(e===null||typeof e=="string"),new Ye(e)}},Ky=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ye.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Qy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Ky(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Yy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Zy=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&S("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,S("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{S("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):S("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(j(typeof n.token=="string"),this.R=n.token,new Yy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Sj(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var hh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Sj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function J(t,e){return t<e?-1:t>e?1:0}function xs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function rS(t){return t+"\0"}var Oe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new A(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new A(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new A(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new A(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var q=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Oe(0,0))}static max(){return new t(new Oe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var fh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&L(),r===void 0?r=e.length-n:r>e.length-n&&L(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},he=class t extends fh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new A(E.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},xj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,He=class t extends fh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return xj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new A(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new A(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new A(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new A(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var P=class t{constructor(e){this.path=e}static fromPath(e){return new t(he.fromString(e))}static fromName(e){return new t(he.fromString(e).popFirst(5))}static empty(){return new t(he.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&he.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return he.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new he(e.slice()))}};var Ms=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function Xy(t){return t.fields.find(e=>e.kind===2)}function $i(t){return t.fields.filter(e=>e.kind!==2)}Ms.UNKNOWN_ID=-1;var Ts=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Wu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,nn.min())}};function iS(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=q.fromTimestamp(r===1e9?new Oe(n+1,0):new Oe(n,r));return new nn(i,P.empty(),e)}function oS(t){return new nn(t.readTime,t.key,-1)}var nn=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(q.min(),P.empty(),-1)}static max(){return new t(q.max(),P.empty(),-1)}};function zw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=P.comparator(t.documentKey,e.documentKey),n!==0?n:J(t.largestBatchId,e.largestBatchId))}var sS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ph=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function si(t){return _(this,null,function*(){if(t.code!==E.FAILED_PRECONDITION||t.message!==sS)throw t;S("LocalStore","Unexpectedly lost primary lease")})}var w=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&L(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let c=u;n(e[c]).next(h=>{s[c]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var gh=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ze,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ki(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Hw(r.target.error);this.V.reject(new Ki(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Ki(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(S("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new ev(n)}},pr=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(la())===12.2&&ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return S("SimpleDb","Removing database:",e),qi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Fc())return!1;if(t.C())return!0;let e=la(),n=t.S(e),r=0<n&&n<10,i=t.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return _(this,null,function*(){return this.db||(S("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new Ki(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new A(E.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new A(E.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Ki(e,s))},i.onupgradeneeded=o=>{S("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{S("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db})}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return _(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=gh.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),w.reject(c))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,c=u.name!=="FirebaseError"&&s<3;if(S("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Jy=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return qi(this.k.delete())}},Ki=class extends A{constructor(e,n){super(E.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ai(t){return t.name==="IndexedDbTransactionError"}var ev=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(S("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(S("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),qi(r)}add(e){return S("SimpleDb","ADD",this.store.name,e,e),qi(this.store.add(e))}get(e){return qi(this.store.get(e)).next(n=>(n===void 0&&(n=null),S("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return S("SimpleDb","DELETE",this.store.name,e),qi(this.store.delete(e))}count(){return S("SimpleDb","COUNT",this.store.name),qi(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new w((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.G(o,(a,u)=>{s.push(u)}).next(()=>s)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new w((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){S("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new w((r,i)=>{n.onerror=o=>{let s=Hw(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){let r=[];return new w((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Jy(a),c=n(a.primaryKey,a.value,u);if(c instanceof w){let h=c.catch(g=>(u.done(),w.reject(g)));r.push(h)}u.isDone?i():u.$===null?a.continue():a.continue(u.$)}}).next(()=>w.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function qi(t){return new w((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Hw(r.target.error);n(i)}})}var nA=!1;function Hw(t){let e=pr.S(la());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new A("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return nA||(nA=!0,setTimeout(()=>{throw r},0)),r}}return t}var tv=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){S("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>_(this,null,function*(){this.task=null;try{S("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){ai(n)?S("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield si(n)}yield this.ee(6e4)}))}},nv=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return _(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,o=!0;return w.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return S("IndexBackfiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(S("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=oS(o);zw(s,r)>0&&(r=s)}),new nn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var qt=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function gc(t){return t==null}function Ku(t){return t===0&&1/t==-1/0}function aS(t){return typeof t=="number"&&Number.isInteger(t)&&!Ku(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function _t(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=rA(e)),e=Mj(t.get(n),e);return rA(e)}function Mj(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function rA(t){return t+""}function zn(t){let e=t.length;if(j(e>=2),e===2)return j(t.charAt(0)===""&&t.charAt(1)===""),he.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&L(),t.charAt(s+1)){case"":let a=t.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:L()}o=s+2}return new he(r)}var iA=["userId","batchId"];function oh(t,e){return[t,_t(e)]}function uS(t,e,n){return[t,_t(e),n]}var Rj={},Pj=["prefixPath","collectionGroup","readTime","documentId"],Nj=["prefixPath","collectionGroup","documentId"],kj=["collectionGroup","readTime","prefixPath","documentId"],Oj=["canonicalId","targetId"],Fj=["targetId","path"],Lj=["path","targetId"],Vj=["collectionId","parent"],Uj=["indexId","uid"],jj=["uid","sequenceNumber"],Bj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$j=["indexId","uid","orderedDocumentKey"],qj=["userId","collectionPath","documentId"],zj=["userId","collectionPath","largestBatchId"],Hj=["userId","collectionGroup","largestBatchId"],cS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Gj=[...cS,"documentOverlays"],lS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dS=lS,hS=[...dS,"indexConfiguration","indexState","indexEntries"],Wj=hS;var Qu=class extends ph{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function st(t,e){let n=N(t);return pr.M(n.ae,e)}function oA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function so(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var xe=class t{constructor(e,n){this.comparator=e,this.root=n||Gn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cs(this.root,e,this.comparator,!0)}},Cs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Gn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw L();let e=this.left.check();if(e!==this.right.check())throw L();return e+(this.isRed()?0:1)}};Gn.EMPTY=null,Gn.RED=!0,Gn.BLACK=!1;Gn.EMPTY=new class{constructor(){this.size=0}get key(){throw L()}get value(){throw L()}get color(){throw L()}get left(){throw L()}get right(){throw L()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ce=class t{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mh(this.data.getIterator())}getIteratorFrom(e){return new mh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},mh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ms(t){return t.hasNext()?t.getNext():void 0}var zt=class t{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ce(He.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xs(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var yh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function pS(){return typeof atob<"u"}var ot=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new yh("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ot.EMPTY_BYTE_STRING=new ot("");var Kj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(t){if(j(!!t),typeof t=="string"){let e=0,n=Kj.exec(t);if(j(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(t.seconds),nanos:Ve(t.nanos)}}function Ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xr(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}function uf(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Gw(t){let e=t.mapValue.fields.__previous_value__;return uf(e)?Gw(e):e}function Yu(t){let e=gr(t.mapValue.fields.__local_write_time__.timestampValue);return new Oe(e.seconds,e.nanos)}var rv=class{constructor(e,n,r,i,o,s,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}},Jr=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Qr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sh={nullValue:"NULL_VALUE"};function Qi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?uf(t)?4:gS(t)?9007199254740991:10:L()}function Qn(t,e){if(t===e)return!0;let n=Qi(t);if(n!==Qi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yu(t).isEqual(Yu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=gr(i.timestampValue),a=gr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Xr(i.bytesValue).isEqual(Xr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ve(i.geoPointValue.latitude)===Ve(o.geoPointValue.latitude)&&Ve(i.geoPointValue.longitude)===Ve(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ve(i.integerValue)===Ve(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ve(i.doubleValue),a=Ve(o.doubleValue);return s===a?Ku(s)===Ku(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return xs(t.arrayValue.values||[],e.arrayValue.values||[],Qn);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(oA(s)!==oA(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Qn(s[u],a[u])))return!1;return!0}(t,e);default:return L()}}function Zu(t,e){return(t.values||[]).find(n=>Qn(n,e))!==void 0}function ei(t,e){if(t===e)return 0;let n=Qi(t),r=Qi(e);if(n!==r)return J(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ve(o.integerValue||o.doubleValue),u=Ve(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return sA(t.timestampValue,e.timestampValue);case 4:return sA(Yu(t),Yu(e));case 5:return J(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Xr(o),u=Xr(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let c=0;c<a.length&&c<u.length;c++){let h=J(a[c],u[c]);if(h!==0)return h}return J(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=J(Ve(o.latitude),Ve(s.latitude));return a!==0?a:J(Ve(o.longitude),Ve(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],u=s.values||[];for(let c=0;c<a.length&&c<u.length;++c){let h=ei(a[c],u[c]);if(h)return h}return J(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Qr.mapValue&&s===Qr.mapValue)return 0;if(o===Qr.mapValue)return 1;if(s===Qr.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),c=s.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){let m=J(u[g],h[g]);if(m!==0)return m;let v=ei(a[u[g]],c[h[g]]);if(v!==0)return v}return J(u.length,h.length)}(t.mapValue,e.mapValue);default:throw L()}}function sA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return J(t,e);let n=gr(t),r=gr(e),i=J(n.seconds,r.seconds);return i!==0?i:J(n.nanos,r.nanos)}function Rs(t){return iv(t)}function iv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=gr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return P.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=iv(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${iv(n.fields[s])}`;return i+"}"}(t.mapValue):L()}function Yi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ov(t){return!!t&&"integerValue"in t}function Xu(t){return!!t&&"arrayValue"in t}function aA(t){return!!t&&"nullValue"in t}function uA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ah(t){return!!t&&"mapValue"in t}function $u(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return so(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=$u(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$u(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function Qj(t){return"nullValue"in t?sh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Yi(Jr.empty(),P.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:L()}function Yj(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Yi(Jr.empty(),P.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Qr:L()}function cA(t,e){let n=ei(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function lA(t,e){let n=ei(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var vt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ah(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$u(n)}setAll(e){let n=He.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=$u(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());ah(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ah(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){so(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t($u(this.value))}};function mS(t){let e=[];return so(t.fields,(n,r)=>{let i=new He([n]);if(ah(r)){let o=mS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new zt(e)}var Xe=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,q.min(),q.min(),q.min(),vt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,q.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,q.min(),q.min(),vt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,q.min(),q.min(),vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Yn=class{constructor(e,n){this.position=e,this.inclusive=n}};function dA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=P.comparator(P.fromName(s.referenceValue),n.key):r=ei(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function hA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qn(t.position[n],e.position[n]))return!1;return!0}var Zi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Zj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var vh=class{},ce=class t extends vh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new uv(e,n,r):n==="array-contains"?new dv(e,r):n==="in"?new wh(e,r):n==="not-in"?new hv(e,r):n==="array-contains-any"?new fv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cv(e,r):new lv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ei(n,this.value)):n!==null&&Qi(this.value)===Qi(n)&&this.matchesComparison(ei(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return L()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},be=class t extends vh{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return Ps(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function Ps(t){return t.op==="and"}function sv(t){return t.op==="or"}function Ww(t){return yS(t)&&Ps(t)}function yS(t){for(let e of t.filters)if(e instanceof be)return!1;return!0}function av(t){if(t instanceof ce)return t.field.canonicalString()+t.op.toString()+Rs(t.value);if(Ww(t))return t.filters.map(e=>av(e)).join(",");{let e=t.filters.map(n=>av(n)).join(",");return`${t.op}(${e})`}}function vS(t,e){return t instanceof ce?function(r,i){return i instanceof ce&&r.op===i.op&&r.field.isEqual(i.field)&&Qn(r.value,i.value)}(t,e):t instanceof be?function(r,i){return i instanceof be&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&vS(s,i.filters[a]),!0):!1}(t,e):void L()}function wS(t,e){let n=t.filters.concat(e);return be.create(n,t.op)}function ES(t){return t instanceof ce?function(n){return`${n.field.canonicalString()} ${n.op} ${Rs(n.value)}`}(t):t instanceof be?function(n){return n.op.toString()+" {"+n.getFilters().map(ES).join(" ,")+"}"}(t):"Filter"}var uv=class extends ce{constructor(e,n,r){super(e,n,r),this.key=P.fromName(r.referenceValue)}matches(e){let n=P.comparator(e.key,this.key);return this.matchesComparison(n)}},cv=class extends ce{constructor(e,n){super(e,"in",n),this.keys=IS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},lv=class extends ce{constructor(e,n){super(e,"not-in",n),this.keys=IS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function IS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>P.fromName(r.referenceValue))}var dv=class extends ce{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Xu(n)&&Zu(n.arrayValue,this.value)}},wh=class extends ce{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Zu(this.value.arrayValue,n)}},hv=class extends ce{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Zu(this.value.arrayValue,n)}},fv=class extends ce{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Xu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zu(this.value.arrayValue,r))}};var pv=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function gv(t,e=null,n=[],r=[],i=null,o=null,s=null){return new pv(t,e,n,r,i,o,s)}function Xi(t){let e=N(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>av(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),gc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Rs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Rs(r)).join(",")),e.ce=n}return e.ce}function mc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Zj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hA(t.startAt,e.startAt)&&hA(t.endAt,e.endAt)}function Eh(t){return P.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ih(t,e){return t.filters.filter(n=>n instanceof ce&&n.field.isEqual(e))}function fA(t,e,n){let r=sh,i=!0;for(let o of Ih(t,e)){let s=sh,a=!0;switch(o.op){case"<":case"<=":s=Qj(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=sh}cA({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];cA({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function pA(t,e,n){let r=Qr,i=!0;for(let o of Ih(t,e)){let s=Qr,a=!0;switch(o.op){case">=":case">":s=Yj(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Qr}lA({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];lA({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var yn=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function _S(t,e,n,r,i,o,s,a){return new yn(t,e,n,r,i,o,s,a)}function Ws(t){return new yn(t)}function gA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Kw(t){return t.collectionGroup!==null}function As(t){let e=N(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ce(He.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new Zi(o,r))}),n.has(He.keyField().canonicalString())||e.le.push(new Zi(He.keyField(),r))}return e.le}function bt(t){let e=N(t);return e.he||(e.he=Xj(e,As(t))),e.he}function Xj(t,e){if(t.limitType==="F")return gv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Zi(i.field,o)});let n=t.endAt?new Yn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yn(t.startAt.position,t.startAt.inclusive):null;return gv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function mv(t,e){let n=t.filters.concat([e]);return new yn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _h(t,e,n){return new yn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yc(t,e){return mc(bt(t),bt(e))&&t.limitType===e.limitType}function bS(t){return`${Xi(bt(t))}|lt:${t.limitType}`}function Is(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ES(i)).join(", ")}]`),gc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Rs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Rs(i)).join(",")),`Target(${r})`}(bt(t))}; limitType=${t.limitType})`}function vc(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):P.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of As(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let c=dA(s,a,u);return s.inclusive?c<=0:c<0}(r.startAt,As(r),i)||r.endAt&&!function(s,a,u){let c=dA(s,a,u);return s.inclusive?c>=0:c>0}(r.endAt,As(r),i))}(t,e)}function DS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CS(t){return(e,n)=>{let r=!1;for(let i of As(t)){let o=Jj(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Jj(t,e,n){let r=t.field.isKeyField()?P.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),c=a.data.field(o);return u!==null&&c!==null?ei(u,c):L()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return L()}}var Zn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){so(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return fS(this.inner)}size(){return this.innerSize}};var eB=new xe(P.comparator);function kt(){return eB}var TS=new xe(P.comparator);function ju(...t){let e=TS;for(let n of t)e=e.insert(n.key,n);return e}function AS(t){let e=TS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hn(){return qu()}function SS(){return qu()}function qu(){return new Zn(t=>t.toString(),(t,e)=>t.isEqual(e))}var tB=new xe(P.comparator),nB=new Ce(P.comparator);function ee(...t){let e=nB;for(let n of t)e=e.add(n);return e}var rB=new Ce(J);function Qw(){return rB}function xS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ku(e)?"-0":e}}function MS(t){return{integerValue:""+t}}function RS(t,e){return aS(e)?MS(e):xS(t,e)}var Ns=class{constructor(){this._=void 0}};function iB(t,e,n){return t instanceof ti?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&uf(o)&&(o=Gw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof mr?NS(t,e):t instanceof yr?kS(t,e):function(i,o){let s=PS(i,o),a=mA(s)+mA(i.Ie);return ov(s)&&ov(i.Ie)?MS(a):xS(i.serializer,a)}(t,e)}function oB(t,e,n){return t instanceof mr?NS(t,e):t instanceof yr?kS(t,e):n}function PS(t,e){return t instanceof ni?function(r){return ov(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ti=class extends Ns{},mr=class extends Ns{constructor(e){super(),this.elements=e}};function NS(t,e){let n=OS(e);for(let r of t.elements)n.some(i=>Qn(i,r))||n.push(r);return{arrayValue:{values:n}}}var yr=class extends Ns{constructor(e){super(),this.elements=e}};function kS(t,e){let n=OS(e);for(let r of t.elements)n=n.filter(i=>!Qn(i,r));return{arrayValue:{values:n}}}var ni=class extends Ns{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function mA(t){return Ve(t.integerValue||t.doubleValue)}function OS(t){return Xu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ji=class{constructor(e,n){this.field=e,this.transform=n}};function sB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof mr&&i instanceof mr||r instanceof yr&&i instanceof yr?xs(r.elements,i.elements,Qn):r instanceof ni&&i instanceof ni?Qn(r.Ie,i.Ie):r instanceof ti&&i instanceof ti}(t.transform,e.transform)}var yv=class{constructor(e,n){this.version=e,this.transformResults=n}},Ue=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function uh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ks=class{};function FS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ii(t.key,Ue.none()):new ri(t.key,t.data,Ue.none());{let n=t.data,r=vt.empty(),i=new Ce(He.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new vn(t.key,r,new zt(i.toArray()),Ue.none())}}function aB(t,e,n){t instanceof ri?function(i,o,s){let a=i.value.clone(),u=vA(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof vn?function(i,o,s){if(!uh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=vA(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(LS(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function zu(t,e,n,r){return t instanceof ri?function(o,s,a,u){if(!uh(o.precondition,s))return a;let c=o.value.clone(),h=wA(o.fieldTransforms,u,s);return c.setAll(h),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof vn?function(o,s,a,u){if(!uh(o.precondition,s))return a;let c=wA(o.fieldTransforms,u,s),h=s.data;return h.setAll(LS(o)),h.setAll(c),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(o,s,a){return uh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function uB(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=PS(r.transform,i||null);o!=null&&(n===null&&(n=vt.empty()),n.set(r.field,o))}return n||null}function yA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&xs(r,i,(o,s)=>sB(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ri=class extends ks{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},vn=class extends ks{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function LS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function vA(t,e,n){let r=new Map;j(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,oB(s,a,n[i]))}return r}function wA(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,iB(o,s,e))}return r}var ii=class extends ks{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ju=class extends ks{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ec=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&aB(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=zu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=zu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=SS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=FS(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(q.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ee())}isEqual(e){return this.batchId===e.batchId&&xs(this.mutations,e.mutations,(n,r)=>yA(n,r))&&xs(this.baseMutations,e.baseMutations,(n,r)=>yA(n,r))}},vv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){j(e.mutations.length===r.length);let i=function(){return tB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var tc=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var wv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ke,de;function VS(t){switch(t){default:return L();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}function US(t){if(t===void 0)return ze("GRPC error has no .code"),E.UNKNOWN;switch(t){case Ke.OK:return E.OK;case Ke.CANCELLED:return E.CANCELLED;case Ke.UNKNOWN:return E.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return E.INTERNAL;case Ke.UNAVAILABLE:return E.UNAVAILABLE;case Ke.UNAUTHENTICATED:return E.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case Ke.NOT_FOUND:return E.NOT_FOUND;case Ke.ALREADY_EXISTS:return E.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return E.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case Ke.ABORTED:return E.ABORTED;case Ke.OUT_OF_RANGE:return E.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return E.UNIMPLEMENTED;case Ke.DATA_LOSS:return E.DATA_LOSS;default:return L()}}(de=Ke||(Ke={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var EA=null;function jS(){return new TextEncoder}var cB=new ji([4294967295,4294967295],0);function IA(t){let e=jS().encode(t),n=new eA;return n.update(e),new Uint8Array(n.digest())}function _A(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ji([n,r],0),new ji([i,o],0)]}var Ev=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wi(`Invalid padding: ${n}`);if(r<0)throw new Wi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wi(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=ji.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(ji.fromNumber(r)));return i.compare(cB)===1&&(i=new ji([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=IA(e),[r,i]=_A(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let n=IA(e),[r,i]=_A(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Wi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var nc=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,rc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(q.min(),i,new xe(J),kt(),ee())}},rc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ee(),ee(),ee())}};var Ss=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},bh=class{constructor(e,n){this.targetId=e,this.fe=n}},Dh=class{constructor(e,n,r=ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Ch=class{constructor(){this.ge=0,this.pe=DA(),this.ye=ot.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ee(),n=ee(),r=ee();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:L()}}),new rc(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=DA()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,j(this.ge>=0)}Le(){this.Se=!0,this.we=!0}},Iv=class{constructor(e){this.Be=e,this.ke=new Map,this.qe=kt(),this.Qe=bA(),this.Ke=new xe(J)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:L()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let o=i.target;if(Eh(o))if(r===0){let s=new P(o.path);this.We(n,s,Xe.newNoDocument(s,q.min()))}else j(r===1);else{let s=this.Ze(n);if(s!==r){let a=this.Xe(e),u=a?this.et(a,e,s):1;if(u!==0){this.He(n);let c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}EA?.tt(function(h,g,m,v,T){var b,I,x,U,M,V;let W={localCacheCount:h,existenceFilterCount:g.count,databaseId:m.database,projectId:m.projectId},K=g.unchangedNames;return K&&(W.bloomFilter={applied:T===0,hashCount:(b=K?.hashCount)!==null&&b!==void 0?b:0,bitmapLength:(U=(x=(I=K?.bits)===null||I===void 0?void 0:I.bitmap)===null||x===void 0?void 0:x.length)!==null&&U!==void 0?U:0,padding:(V=(M=K?.bits)===null||M===void 0?void 0:M.padding)!==null&&V!==void 0?V:0,mightContain:ge=>{var ht;return(ht=v?.mightContain(ge))!==null&&ht!==void 0&&ht}}),W}(s,e.fe,this.Be.nt(),a,u))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Xr(r).toUint8Array()}catch(u){if(u instanceof yh)return tn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Ev(s,i,o)}catch(u){return tn(u instanceof Wi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Be.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Be.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&Eh(a.target)){let u=new P(a.target.path);this.qe.get(u)!==null||this.st(s,u)||this.We(s,u,Xe.newNoDocument(u,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=ee();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let c=this.Ye(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let i=new nc(e,n,this.Ke,this.qe,r);return this.qe=kt(),this.Qe=bA(),this.Ke=new xe(J),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Ch,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ce(J),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||S("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Ch),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}};function bA(){return new xe(P.comparator)}function DA(){return new xe(P.comparator)}var lB={asc:"ASCENDING",desc:"DESCENDING"},dB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hB={and:"AND",or:"OR"},_v=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function bv(t,e){return t.useProto3Json||gc(e)?e:{value:e}}function Os(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fB(t,e){return Os(t,e.toTimestamp())}function Ge(t){return j(!!t),q.fromTimestamp(function(n){let r=gr(n);return new Oe(r.seconds,r.nanos)}(t))}function Yw(t,e){return Dv(t,e).canonicalString()}function Dv(t,e){let n=function(i){return new he(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $S(t){let e=he.fromString(t);return j(XS(e)),e}function ic(t,e){return Yw(t.databaseId,e.path)}function Wn(t,e){let n=$S(e);if(n.get(1)!==t.databaseId.projectId)throw new A(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new A(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new P(HS(n))}function qS(t,e){return Yw(t.databaseId,e)}function zS(t){let e=$S(t);return e.length===4?he.emptyPath():HS(e)}function Cv(t){return new he(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HS(t){return j(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function CA(t,e,n){return{name:ic(t,e),fields:n.value.mapValue.fields}}function GS(t,e,n){let r=Wn(t,e.name),i=Ge(e.updateTime),o=e.createTime?Ge(e.createTime):q.min(),s=new vt({mapValue:{fields:e.fields}}),a=Xe.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function pB(t,e){return"found"in e?function(r,i){j(!!i.found),i.found.name,i.found.updateTime;let o=Wn(r,i.found.name),s=Ge(i.found.updateTime),a=i.found.createTime?Ge(i.found.createTime):q.min(),u=new vt({mapValue:{fields:i.found.fields}});return Xe.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){j(!!i.missing),j(!!i.readTime);let o=Wn(r,i.missing),s=Ge(i.readTime);return Xe.newNoDocument(o,s)}(t,e):L()}function gB(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:L()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,h){return c.useProto3Json?(j(h===void 0||typeof h=="string"),ot.fromBase64String(h||"")):(j(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ot.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){let h=c.code===void 0?E.UNKNOWN:US(c.code);return new A(h,c.message||"")}(s);n=new Dh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Wn(t,r.document.name),o=Ge(r.document.updateTime),s=r.document.createTime?Ge(r.document.createTime):q.min(),a=new vt({mapValue:{fields:r.document.fields}}),u=Xe.newFoundDocument(i,o,s,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Ss(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Wn(t,r.document),o=r.readTime?Ge(r.readTime):q.min(),s=Xe.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Ss([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Wn(t,r.document),o=r.removedTargetIds||[];n=new Ss([],o,i,null)}else{if(!("filter"in e))return L();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new wv(i,o),a=r.targetId;n=new bh(a,s)}}return n}function oc(t,e){let n;if(e instanceof ri)n={update:CA(t,e.key,e.value)};else if(e instanceof ii)n={delete:ic(t,e.key)};else if(e instanceof vn)n={update:CA(t,e.key,e.data),updateMask:IB(e.fieldMask)};else{if(!(e instanceof Ju))return L();n={verify:ic(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof ti)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof mr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ni)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw L()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:fB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:L()}(t,e.precondition)),n}function Tv(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Ue.updateTime(Ge(o.updateTime)):o.exists!==void 0?Ue.exists(o.exists):Ue.none()}(e.currentDocument):Ue.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)j(a.setToServerValue==="REQUEST_TIME"),u=new ti;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new mr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new yr(h)}else"increment"in a?u=new ni(s,a.increment):L();let c=He.fromServerFormat(a.fieldPath);return new Ji(c,u)}(t,i)):[];if(e.update){e.update.name;let i=Wn(t,e.update.name),o=new vt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let c=u.fieldPaths||[];return new zt(c.map(h=>He.fromServerFormat(h)))}(e.updateMask);return new vn(i,o,s,n,r)}return new ri(i,o,n,r)}if(e.delete){let i=Wn(t,e.delete);return new ii(i,n)}if(e.verify){let i=Wn(t,e.verify);return new Ju(i,n)}return L()}function mB(t,e){return t&&t.length>0?(j(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Ge(i.updateTime):Ge(o);return s.isEqual(q.min())&&(s=Ge(o)),new yv(s,i.transformResults||[])}(n,e))):[]}function WS(t,e){return{documents:[qS(t,e.path)]}}function KS(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qS(t,i);let o=function(c){if(c.length!==0)return ZS(be.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:_s(m.field),direction:vB(m.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=bv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i}}function QS(t){let e=zS(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){j(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(g){let m=YS(g);return m instanceof be&&Ww(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(g){return g.map(m=>function(T){return new Zi(bs(T.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(g){let m;return m=typeof g=="object"?g.value:g,gc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){let m=!!g.before,v=g.values||[];return new Yn(v,m)}(n.startAt));let c=null;return n.endAt&&(c=function(g){let m=!g.before,v=g.values||[];return new Yn(v,m)}(n.endAt)),_S(e,i,s,o,a,"F",u,c)}function yB(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return L()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function YS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=bs(n.unaryFilter.field);return ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=bs(n.unaryFilter.field);return ce.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=bs(n.unaryFilter.field);return ce.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=bs(n.unaryFilter.field);return ce.create(s,"!=",{nullValue:"NULL_VALUE"});default:return L()}}(t):t.fieldFilter!==void 0?function(n){return ce.create(bs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return L()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return be.create(n.compositeFilter.filters.map(r=>YS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return L()}}(n.compositeFilter.op))}(t):L()}function vB(t){return lB[t]}function wB(t){return dB[t]}function EB(t){return hB[t]}function _s(t){return{fieldPath:t.canonicalString()}}function bs(t){return He.fromServerFormat(t.fieldPath)}function ZS(t){return t instanceof ce?function(n){if(n.op==="=="){if(uA(n.value))return{unaryFilter:{field:_s(n.field),op:"IS_NAN"}};if(aA(n.value))return{unaryFilter:{field:_s(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(uA(n.value))return{unaryFilter:{field:_s(n.field),op:"IS_NOT_NAN"}};if(aA(n.value))return{unaryFilter:{field:_s(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_s(n.field),op:wB(n.op),value:n.value}}}(t):t instanceof be?function(n){let r=n.getFilters().map(i=>ZS(i));return r.length===1?r[0]:{compositeFilter:{op:EB(n.op),filters:r}}}(t):L()}function IB(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function XS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Fs=class t{constructor(e,n,r,i,o=q.min(),s=q.min(),a=ot.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Th=class{constructor(e){this.ct=e}};function _B(t,e){let n;if(e.document)n=GS(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=P.fromSegments(e.noDocument.path),i=to(e.noDocument.readTime);n=Xe.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return L();{let r=P.fromSegments(e.unknownDocument.path),i=to(e.unknownDocument.version);n=Xe.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new Oe(i[0],i[1]);return q.fromTimestamp(o)}(e.readTime)),n}function TA(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ah(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:ic(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Os(o,s.version.toTimestamp()),createTime:Os(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:eo(e.version)};else{if(!e.isUnknownDocument())return L();r.unknownDocument={path:n.path.toArray(),version:eo(e.version)}}return r}function Ah(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function eo(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function to(t){let e=new Oe(t.seconds,t.nanoseconds);return q.fromTimestamp(e)}function zi(t,e){let n=(e.baseMutations||[]).map(o=>Tv(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Tv(t.ct,o)),i=Oe.fromMillis(e.localWriteTimeMs);return new ec(e.batchId,i,n,r)}function Bu(t){let e=to(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?to(t.lastLimboFreeSnapshotVersion):q.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return j(o.documents.length===1),bt(Ws(zS(o.documents[0])))}(t.query):function(o){return bt(QS(o))}(t.query),new Fs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ot.fromBase64String(t.resumeToken))}function JS(t,e){let n=eo(e.snapshotVersion),r=eo(e.lastLimboFreeSnapshotVersion),i;i=Eh(e.target)?WS(t.ct,e.target):KS(t.ct,e.target).ut;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xi(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Zw(t){let e=QS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_h(e,e.limit,"L"):e}function By(t,e){return new tc(e.largestBatchId,Tv(t.ct,e.overlayMutation))}function AA(t,e){let n=e.path.lastSegment();return[t,_t(e.path.popLast()),n]}function SA(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:eo(r.readTime),documentKey:_t(r.documentKey.path),largestBatchId:r.largestBatchId}}var Av=class{getBundleMetadata(e,n){return xA(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:to(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return xA(e).put(function(i){return{bundleId:i.id,createTime:eo(Ge(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return MA(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:Zw(o.bundledQuery),readTime:to(o.readTime)}}(r)})}saveNamedQuery(e,n){return MA(e).put(function(i){return{name:i.name,readTime:eo(Ge(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function xA(t){return st(t,"bundles")}function MA(t){return st(t,"namedQueries")}var Sh=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Fu(e).get(AA(this.userId,n)).next(r=>r?By(this.serializer,r):null)}getOverlays(e,n){let r=Hn();return w.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new tc(n,s);i.push(this.ht(e,a))}),w.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(_t(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Fu(e).H("collectionPathOverlayIndex",a))}),w.waitFor(o)}getOverlaysForCollection(e,n,r){let i=Hn(),o=_t(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Fu(e).W("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let c=By(this.serializer,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=Hn(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Fu(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,c,h)=>{let g=By(this.serializer,c);o.size()<i||g.largestBatchId===s?(o.set(g.getKey(),g),s=g.largestBatchId):h.done()}).next(()=>o)}ht(e,n){return Fu(e).put(function(i,o,s){let[a,u,c]=AA(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:oc(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function Fu(t){return st(t,"documentOverlays")}var hr=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Ve(e.integerValue));else if("doubleValue"in e){let r=Ve(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Ku(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=gr(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Xr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?gS(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):L()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),P.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};hr.bt=new hr;function bB(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function RA(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=bB(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var Sv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){let n=this.Bt(e),r=RA(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Bt(e),r=RA(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},xv=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},Mv=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Hi=class{constructor(){this.Gt=new Sv,this.zt=new xv(this.Gt),this.jt=new Mv(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Gi=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Hr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=PA(t.arrayValue,e.arrayValue),n!==0?n:(n=PA(t.directionalValue,e.directionalValue),n!==0?n:P.comparator(t.documentKey,e.documentKey)))}function PA(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var xh=class{constructor(e){this.Yt=new Ce((n,r)=>He.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(j(e.collectionGroup===this.collectionId),this.en)return!1;let n=Xy(e);if(n!==void 0&&!this.nn(n))return!1;let r=$i(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.rn(a,u)||!this.sn(this.Zt[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new Ce(He.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Ts(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Ts(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Ts(r.field,r.dir==="asc"?0:1)));return new Ms(Ms.UNKNOWN_ID,this.collectionId,n,Wu.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function ex(t){var e,n;if(j(t instanceof ce||t instanceof be),t instanceof ce){if(t instanceof wh){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>ce.create(t.field,"==",o)))||[];return be.create(i,"or")}return t}let r=t.filters.map(i=>ex(i));return be.create(r,t.op)}function DB(t){if(t.getFilters().length===0)return[];let e=Nv(ex(t));return j(tx(e)),Rv(e)||Pv(e)?[e]:e.getFilters()}function Rv(t){return t instanceof ce}function Pv(t){return t instanceof be&&Ww(t)}function tx(t){return Rv(t)||Pv(t)||function(n){if(n instanceof be&&sv(n)){for(let r of n.getFilters())if(!Rv(r)&&!Pv(r))return!1;return!0}return!1}(t)}function Nv(t){if(j(t instanceof ce||t instanceof be),t instanceof ce)return t;if(t.filters.length===1)return Nv(t.filters[0]);let e=t.filters.map(r=>Nv(r)),n=be.create(e,t.op);return n=Mh(n),tx(n)?n:(j(n instanceof be),j(Ps(n)),j(n.filters.length>1),n.filters.reduce((r,i)=>Xw(r,i)))}function Xw(t,e){let n;return j(t instanceof ce||t instanceof be),j(e instanceof ce||e instanceof be),n=t instanceof ce?e instanceof ce?function(i,o){return be.create([i,o],"and")}(t,e):NA(t,e):e instanceof ce?NA(e,t):function(i,o){if(j(i.filters.length>0&&o.filters.length>0),Ps(i)&&Ps(o))return wS(i,o.getFilters());let s=sv(i)?i:o,a=sv(i)?o:i,u=s.filters.map(c=>Xw(c,a));return be.create(u,"or")}(t,e),Mh(n)}function NA(t,e){if(Ps(e))return wS(e,t.getFilters());{let n=e.filters.map(r=>Xw(t,r));return be.create(n,"or")}}function Mh(t){if(j(t instanceof ce||t instanceof be),t instanceof ce)return t;let e=t.getFilters();if(e.length===1)return Mh(e[0]);if(yS(t))return t;let n=e.map(i=>Mh(i)),r=[];return n.forEach(i=>{i instanceof ce?r.push(i):i instanceof be&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:be.create(r,t.op)}var kv=class{constructor(){this._n=new sc}addToCollectionParentIndex(e,n){return this._n.add(n),w.resolve()}getCollectionParents(e,n){return w.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return w.resolve()}deleteFieldIndex(e,n){return w.resolve()}deleteAllFieldIndexes(e){return w.resolve()}createTargetIndexes(e,n){return w.resolve()}getDocumentsMatchingTarget(e,n){return w.resolve(null)}getIndexType(e,n){return w.resolve(0)}getFieldIndexes(e,n){return w.resolve([])}getNextCollectionGroupToUpdate(e){return w.resolve(null)}getMinOffset(e,n){return w.resolve(nn.min())}getMinOffsetFromCollectionGroup(e,n){return w.resolve(nn.min())}updateCollectionGroup(e,n,r){return w.resolve()}updateIndexEntries(e,n){return w.resolve()}},sc=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ce(he.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ce(he.comparator)).toArray()}};var th=new Uint8Array(0),Ov=class{constructor(e,n){this.databaseId=n,this.an=new sc,this.un=new Zn(r=>Xi(r),(r,i)=>mc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:r,parent:_t(i)};return kA(e).put(o)}return w.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[rS(n),""],!1,!0);return kA(e).W(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(zn(s.parent))}return r})}addFieldIndex(e,n){let r=Lu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=vs(e);return o.next(a=>{s.put(SA(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=Lu(e),i=vs(e),o=ys(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Lu(e),r=ys(e),i=vs(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return w.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new xh(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=ys(e),i=!0,o=new Map;return w.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ee(),a=[];return w.forEach(o,(u,c)=>{S("IndexedDbIndexManager",`Using index ${function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(V=>`${V.fieldPath}:${V.kind}`).join(",")}`}(u)} to execute ${Xi(n)}`);let h=function(M,V){let W=Xy(V);if(W===void 0)return null;for(let K of Ih(M,W.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null}(c,u),g=function(M,V){let W=new Map;for(let K of $i(V))for(let ge of Ih(M,K.fieldPath))switch(ge.op){case"==":case"in":W.set(K.fieldPath.canonicalString(),ge.value);break;case"not-in":case"!=":return W.set(K.fieldPath.canonicalString(),ge.value),Array.from(W.values())}return null}(c,u),m=function(M,V){let W=[],K=!0;for(let ge of $i(V)){let ht=ge.kind===0?fA(M,ge.fieldPath,M.startAt):pA(M,ge.fieldPath,M.startAt);W.push(ht.value),K&&(K=ht.inclusive)}return new Yn(W,K)}(c,u),v=function(M,V){let W=[],K=!0;for(let ge of $i(V)){let ht=ge.kind===0?pA(M,ge.fieldPath,M.endAt):fA(M,ge.fieldPath,M.endAt);W.push(ht.value),K&&(K=ht.inclusive)}return new Yn(W,K)}(c,u),T=this.hn(u,c,m),b=this.hn(u,c,v),I=this.Pn(u,c,g),x=this.In(u.indexId,h,T,m.inclusive,b,v.inclusive,I);return w.forEach(x,U=>r.j(U,n.limit).next(M=>{M.forEach(V=>{let W=P.fromSegments(V.documentKey);s.has(W)||(s=s.add(W),a.push(W))})}))}).next(()=>a)}return w.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=DB(be.create(e.filters,"and")).map(r=>gv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){let u=(n!=null?n.length:1)*Math.max(r.length,o.length),c=u/(n!=null?n.length:1),h=[];for(let g=0;g<u;++g){let m=n?this.Tn(n[g/c]):th,v=this.En(e,m,r[g%c],i),T=this.dn(e,m,o[g%c],s),b=a.map(I=>this.En(e,m,I,!0));h.push(...this.createRange(v,T,b))}return h}En(e,n,r,i){let o=new Gi(e,P.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){let o=new Gi(e,P.empty(),n,r);return i?o.Jt():o}ln(e,n){let r=new xh(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.cn(n);return w.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let c=new Ce(He.comparator),h=!1;for(let g of u.filters)for(let m of g.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:c=c.add(m.field));for(let g of u.orderBy)g.field.isKeyField()||(c=c.add(g.field));return c.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new Hi;for(let i of $i(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);hr.bt.Pt(o,s)}return r.Wt()}Tn(e){let n=new Hi;return hr.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new Hi;return hr.bt.Pt(Yi(this.databaseId,n),r.Ht(function(o){let s=$i(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new Hi);let o=0;for(let s of $i(e)){let a=r[o++];for(let u of i)if(this.Vn(n,s.fieldPath)&&Xu(a))i=this.mn(i,s,a);else{let c=u.Ht(s.kind);hr.bt.Pt(a,c)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Hi;u.seed(a.Wt()),hr.bt.Pt(s,u.Ht(n.kind)),o.push(u)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof ce&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Lu(e),i=vs(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{let s=[];return w.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,g){let m=g?new Wu(g.sequenceNumber,new nn(to(g.readTime),new P(zn(g.documentKey)),g.largestBatchId)):Wu.empty(),v=h.fields.map(([T,b])=>new Ts(He.fromServerFormat(T),b));return new Ms(h.indexId,h.collectionGroup,v,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:J(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Lu(e),o=vs(e);return this.gn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>w.forEach(a,u=>o.put(SA(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return w.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?w.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),w.forEach(a,u=>this.pn(e,i,u).next(c=>{let h=this.yn(o,u);return c.isEqual(h)?w.resolve():this.wn(e,o,u,c,h)}))))})}Sn(e,n,r,i){return ys(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return ys(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=ys(e),o=new Ce(Hr);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new Gi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new Ce(Hr),i=this.An(n,e);if(i==null)return r;let o=Xy(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Xu(s))for(let a of s.arrayValue.values||[])r=r.add(new Gi(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new Gi(n.indexId,e.key,th,i));return r}wn(e,n,r,i,o){S("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(u,c,h,g,m){let v=u.getIterator(),T=c.getIterator(),b=ms(v),I=ms(T);for(;b||I;){let x=!1,U=!1;if(b&&I){let M=h(b,I);M<0?U=!0:M>0&&(x=!0)}else b!=null?U=!0:x=!0;x?(g(I),I=ms(T)):U?(m(b),b=ms(v)):(b=ms(v),I=ms(T))}}(i,o,Hr,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),w.waitFor(s)}gn(e){let n=1;return vs(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>Hr(s,a)).filter((s,a,u)=>!a||Hr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Hr(s,e),u=Hr(s,n);if(a===0)i[0]=e.Jt();else if(a>0&&u<0)i.push(s),i.push(s.Jt());else if(u>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,th,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,th,[]];o.push(IDBKeyRange.bound(a,u))}return o}Dn(e,n){return Hr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(OA)}getMinOffset(e,n){return w.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||L())).next(OA)}};function kA(t){return st(t,"collectionParents")}function ys(t){return st(t,"indexEntries")}function Lu(t){return st(t,"indexConfiguration")}function vs(t){return st(t,"indexState")}function OA(t){j(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;zw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new nn(e.readTime,e.documentKey,n)}var FA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},en=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function nx(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Y({range:s},(h,g,m)=>(a++,m.delete()));o.push(u.next(()=>{j(a===1)}));let c=[];for(let h of n.mutations){let g=uS(e,h.key.path,n.batchId);o.push(i.delete(g)),c.push(h.key)}return w.waitFor(o).next(()=>c)}function Rh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw L();e=t.noDocument}return JSON.stringify(e).length}en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(41943040,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);var Ph=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){j(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gr(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=Ds(e),s=Gr(e);return s.add({}).next(a=>{j(typeof a=="number");let u=new ec(a,n,r,i),c=function(v,T,b){let I=b.baseMutations.map(U=>oc(v.ct,U)),x=b.mutations.map(U=>oc(v.ct,U));return{userId:T,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:I,mutations:x}}(this.serializer,this.userId,u),h=[],g=new Ce((m,v)=>J(m.canonicalString(),v.canonicalString()));for(let m of i){let v=uS(this.userId,m.key.path,a);g=g.add(m.key.path.popLast()),h.push(s.put(c)),h.push(o.put(v,Rj))}return g.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),w.waitFor(h).next(()=>u)})}lookupMutationBatch(e,n){return Gr(e).get(n).next(r=>r?(j(r.userId===this.userId),zi(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?w.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Gr(e).Y({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(j(a.batchId>=r),o=zi(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Gr(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gr(e).W("userMutationsIndex",n).next(r=>r.map(i=>zi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=oh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Ds(e).Y({range:i},(s,a,u)=>{let[c,h,g]=s,m=zn(h);if(c===this.userId&&n.path.isEqual(m))return Gr(e).get(g).next(v=>{if(!v)throw L();j(v.userId===this.userId),o.push(zi(this.serializer,v))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ce(J),i=[];return n.forEach(o=>{let s=oh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Ds(e).Y({range:a},(c,h,g)=>{let[m,v,T]=c,b=zn(v);m===this.userId&&o.path.isEqual(b)?r=r.add(T):g.done()});i.push(u)}),w.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=oh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ce(J);return Ds(e).Y({range:s},(u,c,h)=>{let[g,m,v]=u,T=zn(m);g===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(v)):h.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(Gr(e).get(o).next(s=>{if(s===null)throw L();j(s.userId===this.userId),r.push(zi(this.serializer,s))}))}),w.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return nx(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),w.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return w.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Ds(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=zn(o[1]);i.push(u)}else a.done()}).next(()=>{j(i.length===0)})})}containsKey(e,n){return rx(e,this.userId,n)}xn(e){return ix(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function rx(t,e,n){let r=oh(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ds(t).Y({range:o,J:!0},(a,u,c)=>{let[h,g,m]=a;h===e&&g===i&&(s=!0),c.done()}).next(()=>s)}function Gr(t){return st(t,"mutations")}function Ds(t){return st(t,"documentMutations")}function ix(t){return st(t,"mutationQueues")}var Ls=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Fv=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let r=new Ls(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>q.fromTimestamp(new Oe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ws(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(j(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return ws(e).Y((s,a)=>{let u=Bu(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>w.waitFor(o)).next(()=>i)}forEachTarget(e,n){return ws(e).Y((r,i)=>{let o=Bu(i);n(o)})}Bn(e){return LA(e).get("targetGlobalKey").next(n=>(j(n!==null),n))}kn(e,n){return LA(e).put("targetGlobalKey",n)}qn(e,n){return ws(e).put(JS(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Xi(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ws(e).Y({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let c=Bu(a);mc(n,c.target)&&(o=c,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=Wr(e);return n.forEach(s=>{let a=_t(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),w.waitFor(i)}removeMatchingKeys(e,n,r){let i=Wr(e);return w.forEach(n,o=>{let s=_t(o.path);return w.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=Wr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Wr(e),o=ee();return i.Y({range:r,J:!0},(s,a,u)=>{let c=zn(s[1]),h=new P(c);o=o.add(h)}).next(()=>o)}containsKey(e,n){let r=_t(n.path),i=IDBKeyRange.bound([r],[rS(r)],!1,!0),o=0;return Wr(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],u,c)=>{s!==0&&(o++,c.done())}).next(()=>o>0)}_t(e,n){return ws(e).get(n).next(r=>r?Bu(r):null)}};function ws(t){return st(t,"targets")}function LA(t){return st(t,"targetGlobal")}function Wr(t){return st(t,"targetDocuments")}function VA([t,e],[n,r]){let i=J(t,n);return i===0?J(e,r):i}var Lv=class{constructor(e){this.Kn=e,this.buffer=new Ce(VA),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();VA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Vv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){S("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ai(n)?S("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield si(n)}yield this.zn(3e5)}))}},Uv=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return w.resolve(qt._e);let r=new Lv(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(S("LruGarbageCollector","Garbage collection skipped; disabled"),w.resolve(FA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(S("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FA):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,u,c,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(S("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(o=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(c=Date.now(),Es()<=Dn.DEBUG&&S("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${g} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),w.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}};function CB(t,e){return new Uv(t,e)}var jv=class{constructor(e,n){this.db=e,this.garbageCollector=CB(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return nh(e,r)}removeReference(e,n,r){return nh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return nh(e,n)}er(e,n){return function(i,o){let s=!1;return ix(i).Z(a=>rx(i,a,o).next(u=>(u&&(s=!0),w.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let u=this.er(e,s).next(c=>{if(!c)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,q.min()),Wr(e).delete(function(g){return[0,_t(g.path)]}(s))))});i.push(u)}}).next(()=>w.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return nh(e,n)}Xn(e,n){let r=Wr(e),i,o=qt._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:c})=>{s===0?(o!==qt._e&&n(new P(zn(i)),o),o=c,i=u):o=qt._e}).next(()=>{o!==qt._e&&n(new P(zn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function nh(t,e){return Wr(t).put(function(r,i){return{targetId:0,path:_t(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var Nh=class{constructor(){this.changes=new Zn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?w.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Bv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Bi(e).put(r)}removeEntry(e,n,r){return Bi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ah(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Xe.newInvalidDocument(n);return Bi(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Vu(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:Xe.newInvalidDocument(n)};return Bi(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Vu(n))},(i,o)=>{r={document:this.nr(n,o),size:Rh(o)}}).next(()=>r)}getEntries(e,n){let r=kt();return this.ir(e,n,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=kt(),i=new xe(P.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,Rh(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return w.resolve();let i=new Ce(BA);n.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(Vu(i.first()),Vu(i.last())),s=i.getIterator(),a=s.getNext();return Bi(e).Y({index:"documentKeyIndex",range:o},(u,c,h)=>{let g=P.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&BA(a,g)<0;)r(a,null),a=s.getNext();a&&a.isEqual(g)&&(r(a,c),a=s.hasNext()?s.getNext():null),a?h.U(Vu(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Ah(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bi(e).W(IDBKeyRange.bound(a,u,!0)).next(c=>{o?.incrementDocumentReadCount(c.length);let h=kt();for(let g of c){let m=this.nr(P.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&(vc(n,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,r,i){let o=kt(),s=jA(n,r),a=jA(n,nn.max());return Bi(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,c,h)=>{let g=this.nr(P.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o=o.insert(g.key,g),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new $v(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return UA(e).get("remoteDocumentGlobalKey").next(n=>(j(!!n),n))}tr(e,n){return UA(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=_B(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(q.min())))return r}return Xe.newInvalidDocument(e)}};function ox(t){return new Bv(t)}var $v=class extends Nh{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Zn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Ce((o,s)=>J(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=TA(this.ar.serializer,s);i=i.add(o.path.popLast());let c=Rh(u);r+=c-a.size,n.push(this.ar.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=TA(this.ar.serializer,s.convertToNoDocument(q.min()));n.push(this.ar.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),w.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function UA(t){return st(t,"remoteDocumentGlobal")}function Bi(t){return st(t,"remoteDocumentsV14")}function Vu(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jA(t,e){let n=e.documentKey.path.toArray();return[t,Ah(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function BA(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=J(n[o],r[o]),i)return i;return i=J(n.length,r.length),i||(i=J(n[n.length-2],r[r.length-2]),i||J(n[n.length-1],r[r.length-1]))}var qv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var kh=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&zu(r.mutation,i,zt.empty(),Oe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ee()){let i=Hn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ju();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Hn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ee()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=kt(),s=qu(),a=function(){return qu()}();return n.forEach((u,c)=>{let h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof vn)?o=o.insert(c.key,c):h!==void 0?(s.set(c.key,h.mutation.getFieldMask()),zu(h.mutation,c,h.mutation.getFieldMask(),Oe.now())):s.set(c.key,zt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,h)=>s.set(c,h)),n.forEach((c,h)=>{var g;return a.set(c,new qv(h,(g=s.get(c))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,n){let r=qu(),i=new xe((s,a)=>s-a),o=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let c=n.get(u);if(c===null)return;let h=r.get(u)||zt.empty();h=a.applyToLocalView(c,h),r.set(u,h);let g=(i.get(a.batchId)||ee()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),c=u.key,h=u.value,g=SS();h.forEach(m=>{if(!o.has(m)){let v=FS(n.get(m),r.get(m));v!==null&&g.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,g))}return w.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return P.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Kw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):w.resolve(Hn()),a=-1,u=o;return s.next(c=>w.forEach(c,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(h)?w.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,ee())).next(h=>({batchId:a,changes:AS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new P(n)).next(r=>{let i=ju();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=ju();return this.indexManager.getCollectionParents(e,o).next(a=>w.forEach(a,u=>{let c=function(g,m){return new yn(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((g,m)=>{s=s.insert(g,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,c)=>{let h=c.getKey();s.get(h)===null&&(s=s.insert(h,Xe.newInvalidDocument(h)))});let a=ju();return s.forEach((u,c)=>{let h=o.get(u);h!==void 0&&zu(h.mutation,c,zt.empty(),Oe.now()),vc(n,c)&&(a=a.insert(u,c))}),a})}};var zv=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return w.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ge(i.createTime)}}(n)),w.resolve()}getNamedQuery(e,n){return w.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Zw(i.bundledQuery),readTime:Ge(i.readTime)}}(n)),w.resolve()}};var Hv=class{constructor(){this.overlays=new xe(P.comparator),this.hr=new Map}getOverlay(e,n){return w.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Hn();return w.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),w.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),w.resolve()}getOverlaysForCollection(e,n,r){let i=Hn(),o=n.length+1,s=new P(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return w.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new xe((c,h)=>c-h),s=this.overlays.getIterator();for(;s.hasNext();){let c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=o.get(c.largestBatchId);h===null&&(h=Hn(),o=o.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}let a=Hn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return w.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new tc(n,r));let o=this.hr.get(n);o===void 0&&(o=ee(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var ac=class{constructor(){this.Pr=new Ce(Qe.Ir),this.Tr=new Ce(Qe.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Qe(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Qe(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new P(new he([])),r=new Qe(n,e),i=new Qe(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new P(new he([])),r=new Qe(n,e),i=new Qe(n,e+1),o=ee();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Qe(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Qe=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return P.comparator(e.key,n.key)||J(e.pr,n.pr)}static Er(e,n){return J(e.pr,n.pr)||P.comparator(e.key,n.key)}};var Gv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ce(Qe.Ir)}checkEmpty(e){return w.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new ec(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new Qe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return w.resolve(s)}lookupMutationBatch(e,n){return w.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return w.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return w.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return w.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Qe(n,0),i=new Qe(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),w.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ce(J);return n.forEach(i=>{let o=new Qe(i,0),s=new Qe(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),w.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;P.isDocumentKey(o)||(o=o.child(""));let s=new Qe(new P(o),0),a=new Ce(J);return this.wr.forEachWhile(u=>{let c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.pr)),!0)},s),w.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){j(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return w.forEach(n.mutations,i=>{let o=new Qe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Qe(n,0),i=this.wr.firstAfterOrEqual(r);return w.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,w.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Wv=class{constructor(e){this.vr=e,this.docs=function(){return new xe(P.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return w.resolve(r?r.document.mutableCopy():Xe.newInvalidDocument(n))}getEntries(e,n){let r=kt();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Xe.newInvalidDocument(i))}),w.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=kt(),s=n.path,a=new P(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:c,value:{document:h}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||zw(oS(h),r)<=0||(i.has(h.key)||vc(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return w.resolve(o)}getAllFromCollectionGroup(e,n,r,i){L()}Fr(e,n){return w.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Kv(this)}getSize(e){return w.resolve(this.size)}},Kv=class extends Nh{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),w.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Qv=class{constructor(e){this.persistence=e,this.Mr=new Zn(n=>Xi(n),mc),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ac,this.targetCount=0,this.Lr=Ls.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),w.resolve()}getLastRemoteSnapshotVersion(e){return w.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return w.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),w.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),w.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Ls(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,w.resolve()}updateTargetData(e,n){return this.qn(n),w.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,w.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),w.waitFor(o).next(()=>i)}getTargetCount(e){return w.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return w.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),w.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),w.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),w.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return w.resolve(r)}containsKey(e,n){return w.resolve(this.Nr.containsKey(n))}};var Oh=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new qt(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Qv(this),this.indexManager=new kv,this.remoteDocumentCache=function(i){return new Wv(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Th(n),this.$r=new zv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Hv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new Gv(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){S("MemoryPersistence","Starting transaction:",e);let i=new Yv(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return w.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},Yv=class extends ph{constructor(e){super(),this.currentSequenceNumber=e}},Fh=class t{constructor(e){this.persistence=e,this.zr=new ac,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw L()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),w.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),w.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),w.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return w.forEach(this.Jr,r=>{let i=P.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,q.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return w.or([()=>w.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Zv=class{constructor(e){this.serializer=e}N(e,n,r,i){let o=new gh("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iA,{unique:!0}),u.createObjectStore("documentMutations")}(e),$A(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=w.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),$A(e)),s=s.next(()=>function(u){let c=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:q.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,c){return c.store("mutations").W().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iA,{unique:!0});let g=c.store("mutations"),m=h.map(v=>g.put(v));return w.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let c=u.createObjectStore("documentOverlays",{keyPath:qj});c.createIndex("collectionPathOverlayIndex",zj,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",Hj,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let c=u.createObjectStore("remoteDocumentsV14",{keyPath:Pj});c.createIndex("documentKeyIndex",Nj),c.createIndex("collectionGroupIndex",kj)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:Uj}).createIndex("sequenceNumberIndex",jj,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:Bj}).createIndex("documentKeyIndex",$j,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),s}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Rh(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>w.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>w.forEach(a,u=>{j(u.userId===o.userId);let c=zi(this.serializer,u);return nx(e,o.userId,c).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.Y((s,a)=>{let u=new he(s),c=function(g){return[0,_t(g)]}(u);o.push(n.get(c).next(h=>h?w.resolve():(g=>n.put({targetId:0,path:_t(g),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>w.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:Vj});let r=n.store("collectionParents"),i=new sc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:_t(u)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{let u=new he(s);return o(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,u],c)=>{let h=zn(a);return o(h.popLast())}))}ri(e){let n=e.store("targets");return n.Y((r,i)=>{let o=Bu(i),s=JS(this.serializer,o);return n.put(s)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{let a=n.store("remoteDocumentsV14"),u=function(g){return g.document?new P(he.fromString(g.document.name).popFirst(5)):g.noDocument?P.fromSegments(g.noDocument.path):g.unknownDocument?P.fromSegments(g.unknownDocument.path):L()}(s).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(c))}).next(()=>w.waitFor(i))}si(e,n){let r=n.store("mutations"),i=ox(this.serializer),o=new Oh(Fh.Hr,this.serializer.ct);return r.W().next(s=>{let a=new Map;return s.forEach(u=>{var c;let h=(c=a.get(u.userId))!==null&&c!==void 0?c:ee();zi(this.serializer,u).keys().forEach(g=>h=h.add(g)),a.set(u.userId,h)}),w.forEach(a,(u,c)=>{let h=new Ye(c),g=Sh.lt(this.serializer,h),m=o.getIndexManager(h),v=Ph.lt(h,this.serializer,m,o.referenceDelegate);return new kh(i,v,g,m).recalculateAndSaveOverlaysForDocumentKeys(new Qu(n,qt._e),u).next()})})}};function $A(t){t.createObjectStore("targetDocuments",{keyPath:Fj}).createIndex("documentTargetsIndex",Lj,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Oj,{unique:!0}),t.createObjectStore("targetGlobal")}var $y="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Xv=class t{constructor(e,n,r,i,o,s,a,u,c,h,g=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=c,this.ai=h,this.ui=g,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=m=>Promise.resolve(),!t.D())throw new A(E.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jv(this,i),this.Ti=n+"main",this.serializer=new Th(u),this.Ei=new pr(this.Ti,this.ui,new Zv(this.serializer)),this.Qr=new Fv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ox(this.serializer),this.$r=new Av,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,h===!1&&ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new A(E.FAILED_PRECONDITION,$y);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new qt(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>_(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B(n=>_(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>_(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(ai(e))return S("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return S("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Uu(e).get("owner").next(n=>w.resolve(this.Si(n)))}bi(e){return rh(e).delete(this.clientId)}Di(){return _(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=st(n,"clientMetadata");return r.W().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return w.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?w.resolve(!0):Uu(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new A(E.FAILED_PRECONDITION,$y);return!1}}return!(!this.networkEnabled||!this.inForeground)||rh(e).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&S("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return _(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Qu(e,qt._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>rh(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Ph.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ov(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Sh.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){S("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(u){return u===16?Wj:u===15?hS:u===14?dS:u===13?lS:u===12?Gj:u===11?cS:void L()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new Qu(a,this.kr?this.kr.next():qt._e),n==="readwrite-primary"?this.gi(s).next(u=>!!u||this.pi(s)).next(u=>{if(!u)throw ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new A(E.FAILED_PRECONDITION,sS);return r(s)}).next(u=>this.wi(s).next(()=>u)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return Uu(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new A(E.FAILED_PRECONDITION,$y)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Uu(e).put("owner",n)}static D(){return pr.D()}yi(e){let n=Uu(e);return n.get("owner").next(r=>this.Si(r)?(S("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):w.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(ze(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;qf()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return S("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ze("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){ze("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Uu(t){return st(t,"owner")}function rh(t){return st(t,"clientMetadata")}function Jw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Jv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=ee(),i=ee();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var ew=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Lh=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return qf()?8:pr.v(la())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new ew;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Es()<=Dn.DEBUG&&S("QueryEngine","SDK will not create cache indexes for query:",Is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),w.resolve()):(Es()<=Dn.DEBUG&&S("QueryEngine","Query:",Is(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Es()<=Dn.DEBUG&&S("QueryEngine","The SDK decides to create cache indexes for query:",Is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bt(n))):w.resolve())}ji(e,n){if(gA(n))return w.resolve(null);let r=bt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=_h(n,null,"F"),r=bt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ee(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let c=this.Zi(n,a);return this.Xi(n,c,s,u.readTime)?this.ji(e,_h(n,null,"F")):this.es(e,c,n,u)}))})))}Hi(e,n,r,i){return gA(n)||i.isEqual(q.min())?w.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?w.resolve(null):(Es()<=Dn.DEBUG&&S("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Is(n)),this.es(e,s,n,iS(i,-1)).next(a=>a))})}Zi(e,n){let r=new Ce(CS(e));return n.forEach((i,o)=>{vc(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return Es()<=Dn.DEBUG&&S("QueryEngine","Using full collection scan to execute query:",Is(n)),this.zi.getDocumentsMatchingQuery(e,n,nn.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var tw=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new xe(J),this.rs=new Zn(o=>Xi(o),mc),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kh(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function sx(t,e,n,r){return new tw(t,e,n,r)}function ax(t,e){return _(this,null,function*(){let n=N(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ee();for(let c of i){s.push(c.batchId);for(let h of c.mutations)u=u.add(h.key)}for(let c of o){a.push(c.batchId);for(let h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({us:c,removedBatchIds:s,addedBatchIds:a}))})})})}function TB(t,e){let n=N(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){let g=c.batch,m=g.keys(),v=w.resolve();return m.forEach(T=>{v=v.next(()=>h.getEntry(u,T)).next(b=>{let I=c.docVersions.get(T);j(I!==null),b.version.compareTo(I)<0&&(g.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),h.addEntry(b)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ee();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function ux(t){let e=N(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function AB(t,e){let n=N(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((h,g)=>{let m=i.get(g);if(!m)return;a.push(n.Qr.removeMatchingKeys(o,h.removedDocuments,g).next(()=>n.Qr.addMatchingKeys(o,h.addedDocuments,g)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?v=v.withResumeToken(ot.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(g,v),function(b,I,x){return b.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,v,h)&&a.push(n.Qr.updateTargetData(o,v))});let u=kt(),c=ee();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(cx(o,s,e.documentUpdates).next(h=>{u=h.cs,c=h.ls})),!r.isEqual(q.min())){let h=n.Qr.getLastRemoteSnapshotVersion(o).next(g=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return w.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(n.ns=i,o))}function cx(t,e,n){let r=ee(),i=ee();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=kt();return n.forEach((a,u)=>{let c=o.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(q.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):S("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{cs:s,ls:i}})}function SB(t,e){let n=N(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Vs(t,e){let n=N(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,w.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new Fs(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function Us(t,e,n){return _(this,null,function*(){let r=N(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ai(s))throw s;S("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function Vh(t,e,n){let r=N(t),i=q.min(),o=ee();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,h){let g=N(u),m=g.rs.get(h);return m!==void 0?w.resolve(g.ns.get(m)):g.Qr.getTargetData(c,h)}(r,s,bt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:q.min(),n?o:ee())).next(a=>(hx(r,DS(e),a),{documents:a,hs:o})))}function lx(t,e){let n=N(t),r=N(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function dx(t,e){let n=N(t),r=n.ss.get(e)||q.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,iS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(hx(n,e,i),i))}function hx(t,e,n){let r=t.ss.get(e)||q.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function xB(t,e,n,r){return _(this,null,function*(){let i=N(t),o=ee(),s=kt();for(let c of n){let h=e.Ps(c.metadata.name);c.document&&(o=o.add(h));let g=e.Is(c);g.setReadTime(e.Ts(c.metadata.readTime)),s=s.insert(h,g)}let a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield Vs(i,function(h){return bt(Ws(he.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>cx(c,a,s).next(h=>(a.apply(c),h)).next(h=>i.Qr.removeMatchingKeysForTargetId(c,u.targetId).next(()=>i.Qr.addMatchingKeys(c,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,h.cs,h.ls)).next(()=>h.cs)))})}function MB(r,i){return _(this,arguments,function*(t,e,n=ee()){let o=yield Vs(t,bt(Zw(e.bundledQuery))),s=N(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Ge(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.$r.saveNamedQuery(a,e);let c=o.withResumeToken(ot.EMPTY_BYTE_STRING,u);return s.ns=s.ns.insert(c.targetId,c),s.Qr.updateTargetData(a,c).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function qA(t,e){return`firestore_clients_${t}_${e}`}function zA(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function qy(t,e){return`firestore_targets_${t}_${e}`}var Uh=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new A(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(ze("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Hu=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new A(r.error.code,r.error.message))),o?new t(e,r.state,i):(ze("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},jh=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Qw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=aS(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(ze("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},nw=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(ze("SharedClientState",`Failed to parse online state: ${e}`),null)}},uc=class{constructor(){this.activeTargetIds=Qw()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Gu=class{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new xe(J),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=qA(this.persistenceKey,this.Vs),this.Ss=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new uc),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return _(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(qA(this.persistenceKey,r));if(i){let o=jh.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(qy(this.persistenceKey,e));if(r){let i=Hu.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qy(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return S("SharedClientState","READ",e,n),n}setItem(e,n){S("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){S("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(S("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>_(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(o){let s=qt._e;if(o!=null)try{let a=JSON.parse(o);j(typeof a=="number"),s=a}catch(a){ze("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==qt._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){let i=new Uh(this.currentUser,e,n,r),o=zA(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){let n=zA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=qy(this.persistenceKey,e),o=new Hu(e,n,r);this.setItem(i,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return jh.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Uh.Es(new Ye(o),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return Hu.Es(i,n)}xs(e){return nw.Es(e)}Js(e){return JSON.parse(e)}zs(e){return _(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);S("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=Qw();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},Bh=class{constructor(){this.no=new uc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new uc,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var rw=class{io(e){}shutdown(){}};var $h=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){S("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){S("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ih=null;function zy(){return ih===null?ih=function(){return 268435456+Math.round(2147483648*Math.random())}():ih++,"0x"+ih.toString(16)}var RB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var iw=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var yt="WebChannelConnection",ow=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){let a=zy(),u=this.bo(n,r.toUriEncodedString());S("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,o,s),this.Co(n,u,c,i).then(h=>(S("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw tn("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){let i=RB[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let o=zy();return new Promise((s,a)=>{let u=new JT;u.setWithCredentials(!0),u.listenOnce(ZT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case eh.NO_ERROR:let h=u.getResponseJson();S(yt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case eh.TIMEOUT:S(yt,`RPC '${e}' ${o} timed out`),a(new A(E.DEADLINE_EXCEEDED,"Request time out"));break;case eh.HTTP_ERROR:let g=u.getStatus();if(S(yt,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let T=function(I){let x=I.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(x)>=0?x:E.UNKNOWN}(v.status);a(new A(T,v.message))}else a(new A(E.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new A(E.UNAVAILABLE,"Connection failed."));break;default:L()}}finally{S(yt,`RPC '${e}' ${o} completed.`)}});let c=JSON.stringify(i);S(yt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}Fo(e,n,r){let i=zy(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=QT(),a=YT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");S(yt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let g=s.createWebChannel(h,u),m=!1,v=!1,T=new iw({lo:I=>{v?S(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(m||(S(yt,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),S(yt,`RPC '${e}' stream ${i} sending:`,I),g.send(I))},ho:()=>g.close()}),b=(I,x,U)=>{I.listen(x,M=>{try{U(M)}catch(V){setTimeout(()=>{throw V},0)}})};return b(g,Ou.EventType.OPEN,()=>{v||S(yt,`RPC '${e}' stream ${i} transport opened.`)}),b(g,Ou.EventType.CLOSE,()=>{v||(v=!0,S(yt,`RPC '${e}' stream ${i} transport closed`),T.Vo())}),b(g,Ou.EventType.ERROR,I=>{v||(v=!0,tn(yt,`RPC '${e}' stream ${i} transport errored:`,I),T.Vo(new A(E.UNAVAILABLE,"The operation could not be completed")))}),b(g,Ou.EventType.MESSAGE,I=>{var x;if(!v){let U=I.data[0];j(!!U);let M=U,V=M.error||((x=M[0])===null||x===void 0?void 0:x.error);if(V){S(yt,`RPC '${e}' stream ${i} received error:`,V);let W=V.status,K=function(po){let _r=Ke[po];if(_r!==void 0)return US(_r)}(W),ge=V.message;K===void 0&&(K=E.INTERNAL,ge="Unknown error status: "+W+" with message "+V.message),v=!0,T.Vo(new A(K,ge)),g.close()}else S(yt,`RPC '${e}' stream ${i} received:`,U),T.mo(U)}}),b(a,XT.STAT_EVENT,I=>{I.stat===jy.PROXY?S(yt,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===jy.NOPROXY&&S(yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.Ro()},0),T}};function fx(){return typeof window<"u"?window:null}function ch(){return typeof document<"u"?document:null}function wc(t){return new _v(t,!0)}var cc=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&S("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var qh=class{constructor(e,n,r,i,o,s,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new cc(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return _(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return _(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return _(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===E.RESOURCE_EXHAUSTED?(ze(n.toString()),ze("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===E.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new A(E.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>_(this,null,function*(){this.state=0,this.start()}))}__(e){return S("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(S("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},sw=class extends qh{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=gB(this.serializer,e),r=function(o){if(!("targetChange"in o))return q.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?q.min():s.readTime?Ge(s.readTime):q.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=Cv(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=Eh(u)?{documents:WS(o,u)}:{query:KS(o,u).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=BS(o,s.resumeToken);let c=bv(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(q.min())>0){a.readTime=Os(o,s.snapshotVersion.toTimestamp());let c=bv(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let r=yB(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=Cv(this.serializer),n.removeTarget=e,this.t_(n)}},aw=class extends qh{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(j(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=mB(e.writeResults,e.commitTime),r=Ge(e.commitTime);return this.listener.T_(r,n)}return j(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=Cv(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>oc(this.serializer,r))};this.t_(n)}};var uw=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new A(E.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,Dv(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new A(E.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,Dv(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new A(E.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var cw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(ze(n),this.g_=!1):S("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var lw=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{r.enqueueAndForget(()=>_(this,null,function*(){ui(this)&&(S("RemoteStore","Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let c=N(u);c.v_.add(4),yield Ks(c),c.x_.set("Unknown"),c.v_.delete(4),yield Ec(c)})}(this))}))}),this.x_=new cw(r,i)}};function Ec(t){return _(this,null,function*(){if(ui(t))for(let e of t.F_)yield e(!0)})}function Ks(t){return _(this,null,function*(){for(let e of t.F_)yield e(!1)})}function cf(t,e){let n=N(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),n0(n)?t0(n):Ys(n).Jo()&&e0(n,e))}function js(t,e){let n=N(t),r=Ys(n);n.C_.delete(e),r.Jo()&&px(n,e),n.C_.size===0&&(r.Jo()?r.Xo():ui(n)&&n.x_.set("Unknown"))}function e0(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(q.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ys(t).c_(e)}function px(t,e){t.O_.Oe(e),Ys(t).l_(e)}function t0(t){t.O_=new Iv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Ys(t).start(),t.x_.p_()}function n0(t){return ui(t)&&!Ys(t).Ho()&&t.C_.size>0}function ui(t){return N(t).v_.size===0}function gx(t){t.O_=void 0}function PB(t){return _(this,null,function*(){t.C_.forEach((e,n)=>{e0(t,e)})})}function NB(t,e){return _(this,null,function*(){gx(t),n0(t)?(t.x_.S_(e),t0(t)):t.x_.set("Unknown")})}function kB(t,e,n){return _(this,null,function*(){if(t.x_.set("Online"),e instanceof Dh&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){S("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield zh(t,r)}else if(e instanceof Ss?t.O_.$e(e):e instanceof bh?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(q.min()))try{let r=yield ux(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.O_.it(s);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.C_.get(c);h&&o.C_.set(c,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,c)=>{let h=o.C_.get(u);if(!h)return;o.C_.set(u,h.withResumeToken(ot.EMPTY_BYTE_STRING,h.snapshotVersion)),px(o,u);let g=new Fs(h.target,u,c,h.sequenceNumber);e0(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){S("RemoteStore","Failed to raise snapshot:",r),yield zh(t,r)}})}function zh(t,e,n){return _(this,null,function*(){if(!ai(e))throw e;t.v_.add(1),yield Ks(t),t.x_.set("Offline"),n||(n=()=>ux(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){S("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Ec(t)}))})}function mx(t,e){return e().catch(n=>zh(t,n,e))}function Qs(t){return _(this,null,function*(){let e=N(t),n=oi(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;OB(e);)try{let i=yield SB(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,FB(e,i)}catch(i){yield zh(e,i)}yx(e)&&vx(e)})}function OB(t){return ui(t)&&t.D_.length<10}function FB(t,e){t.D_.push(e);let n=oi(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function yx(t){return ui(t)&&!oi(t).Ho()&&t.D_.length>0}function vx(t){oi(t).start()}function LB(t){return _(this,null,function*(){oi(t).d_()})}function VB(t){return _(this,null,function*(){let e=oi(t);for(let n of t.D_)e.I_(n.mutations)})}function UB(t,e,n){return _(this,null,function*(){let r=t.D_.shift(),i=vv.from(r,e,n);yield mx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Qs(t)})}function jB(t,e){return _(this,null,function*(){e&&oi(t).P_&&(yield function(r,i){return _(this,null,function*(){if(function(s){return VS(s)&&s!==E.ABORTED}(i.code)){let o=r.D_.shift();oi(r).Zo(),yield mx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Qs(r)}})}(t,e)),yx(t)&&vx(t)})}function HA(t,e){return _(this,null,function*(){let n=N(t);n.asyncQueue.verifyOperationInProgress(),S("RemoteStore","RemoteStore received new credentials");let r=ui(n);n.v_.add(3),yield Ks(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Ec(n)})}function dw(t,e){return _(this,null,function*(){let n=N(t);e?(n.v_.delete(2),yield Ec(n)):e||(n.v_.add(2),yield Ks(n),n.x_.set("Unknown"))})}function Ys(t){return t.N_||(t.N_=function(n,r,i){let o=N(n);return o.R_(),new sw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:PB.bind(null,t),To:NB.bind(null,t),u_:kB.bind(null,t)}),t.F_.push(e=>_(this,null,function*(){e?(t.N_.Zo(),n0(t)?t0(t):t.x_.set("Unknown")):(yield t.N_.stop(),gx(t))}))),t.N_}function oi(t){return t.L_||(t.L_=function(n,r,i){let o=N(n);return o.R_(),new aw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:LB.bind(null,t),To:jB.bind(null,t),E_:VB.bind(null,t),T_:UB.bind(null,t)}),t.F_.push(e=>_(this,null,function*(){e?(t.L_.Zo(),yield Qs(t)):(yield t.L_.stop(),t.D_.length>0&&(S("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.L_}var hw=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ze,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new A(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Zs(t,e){if(ze("AsyncQueue",`${e}: ${t}`),ai(t))return new A(E.UNAVAILABLE,`${e}: ${t}`);throw t}var Hh=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||P.comparator(n.key,r.key):(n,r)=>P.comparator(n.key,r.key),this.keyedMap=ju(),this.sortedSet=new xe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Gh=class{constructor(){this.B_=new xe(P.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):L():this.B_=this.B_.insert(n,e)}k_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},Bs=class t{constructor(e,n,r,i,o,s,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Hh.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var fw=class{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}},pw=class{constructor(){this.queries=new Zn(e=>bS(e),yc),this.onlineState="Unknown",this.W_=new Set}};function r0(t,e){return _(this,null,function*(){let n=N(t),r=3,i=e.query,o=n.queries.get(i);o?!o.K_()&&e.U_()&&(r=2):(o=new fw,r=e.U_()?0:1);try{switch(r){case 0:o.q_=yield n.onListen(i,!0);break;case 1:o.q_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=Zs(s,`Initialization of query '${Is(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Q_.push(e),e.G_(n.onlineState),o.q_&&e.z_(o.q_)&&o0(n)})}function i0(t,e){return _(this,null,function*(){let n=N(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),o.Q_.length===0?i=e.U_()?0:1:!o.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function BB(t,e){let n=N(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Q_)a.z_(i)&&(r=!0);s.q_=i}}r&&o0(n)}function $B(t,e,n){let r=N(t),i=r.queries.get(e);if(i)for(let o of i.Q_)o.onError(n);r.queries.delete(e)}function o0(t){t.W_.forEach(e=>{e.next()})}var gw,GA;(GA=gw||(gw={})).j_="default",GA.Cache="cache";var lc=class{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;let r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;let n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=Bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==gw.Cache}};var mw=class{constructor(e,n){this.na=e,this.byteLength=n}ra(){return"metadata"in this.na}};var Wh=class{constructor(e){this.serializer=e}Ps(e){return Wn(this.serializer,e)}Is(e){return e.metadata.exists?GS(this.serializer,e.document,!1):Xe.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Ge(e)}},yw=class{constructor(e,n,r){this.ia=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wx(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++n;let r=he.fromString(e.na.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}oa(e){let n=new Map,r=new Wh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||ee()).add(o);n.set(s,a)}}return n}complete(){return _(this,null,function*(){let e=yield xB(this.localStore,new Wh(this.serializer),this.documents,this.ia.id),n=this.oa(this.documents);for(let r of this.queries)yield MB(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:e}})}};function wx(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Kh=class{constructor(e){this.key=e}},Qh=class{constructor(e){this.key=e}},Yh=class{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=ee(),this.mutatedKeys=ee(),this.ha=CS(e),this.Pa=new Hh(this.ha)}get Ia(){return this.ua}Ta(e,n){let r=n?n.Ea:new Gh,i=n?n.Pa:this.Pa,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let m=i.get(h),v=vc(this.query,g)?g:null,T=!!m&&this.mutatedKeys.has(m.key),b=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),I=!1;m&&v?m.data.isEqual(v.data)?T!==b&&(r.track({type:3,doc:v}),I=!0):this.da(m,v)||(r.track({type:2,doc:v}),I=!0,(u&&this.ha(v,u)>0||c&&this.ha(v,c)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),I=!0):m&&!v&&(r.track({type:1,doc:m}),I=!0,(u||c)&&(a=!0)),I&&(v?(s=s.add(v),o=b?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Pa:s,Ea:r,Xi:a,mutatedKeys:o}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;let s=e.Ea.k_();s.sort((h,g)=>function(v,T){let b=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return L()}};return b(v)-b(T)}(h.type,g.type)||this.ha(h.doc,g.doc)),this.Aa(r),i=i!=null&&i;let a=n&&!i?this.Ra():[],u=this.la.size===0&&this.current&&!i?1:0,c=u!==this.ca;return this.ca=u,s.length!==0||c?{snapshot:new Bs(this.query,e.Pa,o,s,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Gh,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];let e=this.la;this.la=ee(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});let n=[];return e.forEach(r=>{this.la.has(r)||n.push(new Qh(r))}),this.la.forEach(r=>{e.has(r)||n.push(new Kh(r))}),n}fa(e){this.ua=e.hs,this.la=ee();let n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Bs.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}},vw=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},ww=class{constructor(e){this.key=e,this.pa=!1}},Ew=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new Zn(a=>bS(a),yc),this.Sa=new Map,this.ba=new Set,this.Da=new xe(P.comparator),this.Ca=new Map,this.va=new ac,this.Fa={},this.Ma=new Map,this.xa=Ls.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}};function qB(t,e,n=!0){return _(this,null,function*(){let r=lf(t),i,o=r.wa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ga()):i=yield Ex(r,e,n,!0),i})}function zB(t,e){return _(this,null,function*(){let n=lf(t);yield Ex(n,e,!0,!1)})}function Ex(t,e,n,r){return _(this,null,function*(){let i=yield Vs(t.localStore,bt(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield s0(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&cf(t.remoteStore,i),a})}function s0(t,e,n,r,i){return _(this,null,function*(){t.Na=(g,m,v)=>function(b,I,x,U){return _(this,null,function*(){let M=I.view.Ta(x);M.Xi&&(M=yield Vh(b.localStore,I.query,!1).then(({documents:ge})=>I.view.Ta(ge,M)));let V=U&&U.targetChanges.get(I.targetId),W=U&&U.targetMismatches.get(I.targetId)!=null,K=I.view.applyChanges(M,b.isPrimaryClient,V,W);return Iw(b,I.targetId,K.Va),K.snapshot})}(t,g,m,v);let o=yield Vh(t.localStore,e,!0),s=new Yh(e,o.hs),a=s.Ta(o.documents),u=rc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,u);Iw(t,n,c.Va);let h=new vw(e,n,s);return t.wa.set(e,h),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot})}function HB(t,e,n){return _(this,null,function*(){let r=N(t),i=r.wa.get(e),o=r.Sa.get(i.targetId);if(o.length>1)return r.Sa.set(i.targetId,o.filter(s=>!yc(s,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Us(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&js(r.remoteStore,i.targetId),$s(r,i.targetId)}).catch(si))):($s(r,i.targetId),yield Us(r.localStore,i.targetId,!0))})}function GB(t,e){return _(this,null,function*(){let n=N(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),js(n.remoteStore,r.targetId))})}function WB(t,e,n){return _(this,null,function*(){let r=l0(t);try{let i=yield function(s,a){let u=N(s),c=Oe.now(),h=a.reduce((v,T)=>v.add(T.key),ee()),g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let T=kt(),b=ee();return u.os.getEntries(v,h).next(I=>{T=I,T.forEach((x,U)=>{U.isValidDocument()||(b=b.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,T)).next(I=>{g=I;let x=[];for(let U of a){let M=uB(U,g.get(U.key).overlayedDocument);M!=null&&x.push(new vn(U.key,M,mS(M.value.mapValue),Ue.exists(!0)))}return u.mutationQueue.addMutationBatch(v,c,x,a)}).next(I=>{m=I;let x=I.applyToLocalDocumentSet(g,b);return u.documentOverlayCache.saveOverlays(v,I.batchId,x)})}).then(()=>({batchId:m.batchId,changes:AS(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let c=s.Fa[s.currentUser.toKey()];c||(c=new xe(J)),c=c.insert(a,u),s.Fa[s.currentUser.toKey()]=c}(r,i.batchId,n),yield Er(r,i.changes),yield Qs(r.remoteStore)}catch(i){let o=Zs(i,"Failed to persist write");n.reject(o)}})}function Ix(t,e){return _(this,null,function*(){let n=N(t);try{let r=yield AB(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Ca.get(o);s&&(j(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.pa=!0:i.modifiedDocuments.size>0?j(s.pa):i.removedDocuments.size>0&&(j(s.pa),s.pa=!1))}),yield Er(n,r,e)}catch(r){yield si(r)}})}function WA(t,e,n){let r=N(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.wa.forEach((o,s)=>{let a=s.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=N(s);u.onlineState=a;let c=!1;u.queries.forEach((h,g)=>{for(let m of g.Q_)m.G_(a)&&(c=!0)}),c&&o0(u)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function KB(t,e,n){return _(this,null,function*(){let r=N(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Ca.get(e),o=i&&i.key;if(o){let s=new xe(P.comparator);s=s.insert(o,Xe.newNoDocument(o,q.min()));let a=ee().add(o),u=new nc(q.min(),new Map,new xe(J),s,a);yield Ix(r,u),r.Da=r.Da.remove(o),r.Ca.delete(e),c0(r)}else yield Us(r.localStore,e,!1).then(()=>$s(r,e,n)).catch(si)})}function QB(t,e){return _(this,null,function*(){let n=N(t),r=e.batch.batchId;try{let i=yield TB(n.localStore,e);u0(n,r,null),a0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Er(n,i)}catch(i){yield si(i)}})}function YB(t,e,n){return _(this,null,function*(){let r=N(t);try{let i=yield function(s,a){let u=N(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(g=>(j(g!==null),h=g.keys(),u.mutationQueue.removeMutationBatch(c,g))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);u0(r,e,n),a0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Er(r,i)}catch(i){yield si(i)}})}function ZB(t,e){return _(this,null,function*(){let n=N(t);ui(n.remoteStore)||S("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=N(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Ma.get(r)||[];i.push(e),n.Ma.set(r,i)}catch(r){let i=Zs(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function a0(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function u0(t,e,n){let r=N(t),i=r.Fa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function $s(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||_x(t,r)})}function _x(t,e){t.ba.delete(e.path.canonicalString());let n=t.Da.get(e);n!==null&&(js(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),c0(t))}function Iw(t,e,n){for(let r of n)r instanceof Kh?(t.va.addReference(r.key,e),XB(t,r)):r instanceof Qh?(S("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||_x(t,r.key)):L()}function XB(t,e){let n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(S("SyncEngine","New document in limbo: "+n),t.ba.add(r),c0(t))}function c0(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){let e=t.ba.values().next().value;t.ba.delete(e);let n=new P(he.fromString(e)),r=t.xa.next();t.Ca.set(r,new ww(n)),t.Da=t.Da.insert(n,r),cf(t.remoteStore,new Fs(bt(Ws(n.path)),r,"TargetPurposeLimboResolution",qt._e))}}function Er(t,e,n){return _(this,null,function*(){let r=N(t),i=[],o=[],s=[];r.wa.isEmpty()||(r.wa.forEach((a,u)=>{s.push(r.Na(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);let h=Jv.Ki(u.targetId,c);o.push(h)}}))}),yield Promise.all(s),r.ya.u_(i),yield function(u,c){return _(this,null,function*(){let h=N(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>w.forEach(c,m=>w.forEach(m.qi,v=>h.persistence.referenceDelegate.addReference(g,m.targetId,v)).next(()=>w.forEach(m.Qi,v=>h.persistence.referenceDelegate.removeReference(g,m.targetId,v)))))}catch(g){if(!ai(g))throw g;S("LocalStore","Failed to update sequence numbers: "+g)}for(let g of c){let m=g.targetId;if(!g.fromCache){let v=h.ns.get(m),T=v.snapshotVersion,b=v.withLastLimboFreeSnapshotVersion(T);h.ns=h.ns.insert(m,b)}}})}(r.localStore,o))})}function JB(t,e){return _(this,null,function*(){let n=N(t);if(!n.currentUser.isEqual(e)){S("SyncEngine","User change. New user:",e.toKey());let r=yield ax(n.localStore,e);n.currentUser=e,function(o,s){o.Ma.forEach(a=>{a.forEach(u=>{u.reject(new A(E.CANCELLED,s))})}),o.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Er(n,r.us)}})}function e$(t,e){let n=N(t),r=n.Ca.get(e);if(r&&r.pa)return ee().add(r.key);{let i=ee(),o=n.Sa.get(e);if(!o)return i;for(let s of o){let a=n.wa.get(s);i=i.unionWith(a.view.Ia)}return i}}function t$(t,e){return _(this,null,function*(){let n=N(t),r=yield Vh(n.localStore,e.query,!0),i=e.view.fa(r);return n.isPrimaryClient&&Iw(n,e.targetId,i.Va),i})}function n$(t,e){return _(this,null,function*(){let n=N(t);return dx(n.localStore,e).then(r=>Er(n,r))})}function r$(t,e,n,r){return _(this,null,function*(){let i=N(t),o=yield function(a,u){let c=N(a),h=N(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.vn(g,u).next(m=>m?c.localDocuments.getDocuments(g,m):w.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield Qs(i.remoteStore):n==="acknowledged"||n==="rejected"?(u0(i,e,r||null),a0(i,e),function(a,u){N(N(a).mutationQueue).Mn(u)}(i.localStore,e)):L(),yield Er(i,o)):S("SyncEngine","Cannot apply mutation batch with id: "+e)})}function i$(t,e){return _(this,null,function*(){let n=N(t);if(lf(n),l0(n),e===!0&&n.Oa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield KA(n,r.toArray());n.Oa=!0,yield dw(n.remoteStore,!0);for(let o of i)cf(n.remoteStore,o)}else if(e===!1&&n.Oa!==!1){let r=[],i=Promise.resolve();n.Sa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>($s(n,s),Us(n.localStore,s,!0))),js(n.remoteStore,s)}),yield i,yield KA(n,r),function(s){let a=N(s);a.Ca.forEach((u,c)=>{js(a.remoteStore,c)}),a.va.mr(),a.Ca=new Map,a.Da=new xe(P.comparator)}(n),n.Oa=!1,yield dw(n.remoteStore,!1)}})}function KA(t,e,n){return _(this,null,function*(){let r=N(t),i=[],o=[];for(let s of e){let a,u=r.Sa.get(s);if(u&&u.length!==0){a=yield Vs(r.localStore,bt(u[0]));for(let c of u){let h=r.wa.get(c),g=yield t$(r,h);g.snapshot&&o.push(g.snapshot)}}else{let c=yield lx(r.localStore,s);a=yield Vs(r.localStore,c),yield s0(r,bx(c),s,!1,a.resumeToken)}i.push(a)}return r.ya.u_(o),i})}function bx(t){return _S(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function o$(t){return function(n){return N(N(n).persistence).Bi()}(N(t).localStore)}function s$(t,e,n,r){return _(this,null,function*(){let i=N(t);if(i.Oa)return void S("SyncEngine","Ignoring unexpected query state notification.");let o=i.Sa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield dx(i.localStore,DS(o[0])),a=nc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ot.EMPTY_BYTE_STRING);yield Er(i,s,a);break}case"rejected":yield Us(i.localStore,e,!0),$s(i,e,r);break;default:L()}})}function a$(t,e,n){return _(this,null,function*(){let r=lf(t);if(r.Oa){for(let i of e){if(r.Sa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){S("SyncEngine","Adding an already active target "+i);continue}let o=yield lx(r.localStore,i),s=yield Vs(r.localStore,o);yield s0(r,bx(o),s.targetId,!1,s.resumeToken),cf(r.remoteStore,s)}for(let i of n)r.Sa.has(i)&&(yield Us(r.localStore,i,!1).then(()=>{js(r.remoteStore,i),$s(r,i)}).catch(si))}})}function lf(t){let e=N(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ix.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=e$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KB.bind(null,e),e.ya.u_=BB.bind(null,e.eventManager),e.ya.La=$B.bind(null,e.eventManager),e}function l0(t){let e=N(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YB.bind(null,e),e}function u$(t,e,n){let r=N(t);(function(o,s,a){return _(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(v,T){let b=N(v),I=Ge(T.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",x=>b.$r.getBundleMetadata(x,T.id)).then(x=>!!x&&x.createTime.compareTo(I)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(wx(u));let c=new yw(u,o.localStore,s.serializer),h=yield s.Ba();for(;h;){let m=yield c.sa(h);m&&a._updateProgress(m),h=yield s.Ba()}let g=yield c.complete();return yield Er(o,g.aa,void 0),yield function(v,T){let b=N(v);return b.persistence.runTransaction("Save bundle","readwrite",I=>b.$r.saveBundleMetadata(I,T))}(o.localStore,u),a._completeWith(g.progress),Promise.resolve(g._a)}catch(u){return tn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var dc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){this.serializer=wc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return sx(this.persistence,new Lh,e.initialUser,this.serializer)}createPersistence(e){return new Oh(Fh.Hr,this.serializer)}createSharedClientState(e){return new Bh}terminate(){return _(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Zh=class t extends dc{constructor(e,n,r){super(),this.ka=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){yield Bf(t.prototype,this,"initialize").call(this,e),yield this.ka.initialize(this,e),yield l0(this.ka.syncEngine),yield Qs(this.ka.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return sx(this.persistence,new Lh,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new Vv(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new nv(n,this.persistence);return new tv(e.asyncQueue,r)}createPersistence(e){let n=Jw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new Xv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,fx(),ch(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Bh}},_w=class t extends Zh{constructor(e,n){super(e,n,!1),this.ka=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return _(this,null,function*(){yield Bf(t.prototype,this,"initialize").call(this,e);let n=this.ka.syncEngine;this.sharedClientState instanceof Gu&&(this.sharedClientState.syncEngine={Zs:r$.bind(null,n),Xs:s$.bind(null,n),eo:a$.bind(null,n),Bi:o$.bind(null,n),Ys:n$.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>_(this,null,function*(){yield i$(this.ka.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=fx();if(!Gu.D(n))throw new A(E.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Jw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Gu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},hc=class{initialize(e,n){return _(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>WA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=JB.bind(null,this.syncEngine),yield dw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new pw}()}createDatastore(e){let n=wc(e.databaseInfo.databaseId),r=function(o){return new ow(o)}(e.databaseInfo);return function(o,s,a,u){return new uw(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new lw(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>WA(this.syncEngine,n,0),function(){return $h.D()?new $h:new rw}())}createSyncEngine(e,n){return function(i,o,s,a,u,c,h){let g=new Ew(i,o,s,a,u,c);return h&&(g.Oa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return _(this,null,function*(){var e;yield function(r){return _(this,null,function*(){let i=N(r);S("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield Ks(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function QA(t,e=10240){let n=0;return{read(){return _(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return _(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var qs=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):ze("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var bw=class{constructor(e,n){this.Ka=e,this.serializer=n,this.metadata=new Ze,this.buffer=new Uint8Array,this.$a=function(){return new TextDecoder("utf-8")}(),this.Ua().then(r=>{r&&r.ra()?this.metadata.resolve(r.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.na)}`))},r=>this.metadata.reject(r))}close(){return this.Ka.cancel()}getMetadata(){return _(this,null,function*(){return this.metadata.promise})}Ba(){return _(this,null,function*(){return yield this.getMetadata(),this.Ua()})}Ua(){return _(this,null,function*(){let e=yield this.Wa();if(e===null)return null;let n=this.$a.decode(e),r=Number(n);isNaN(r)&&this.Ga(`length string (${n}) is not valid number`);let i=yield this.za(r);return new mw(JSON.parse(i),e.length+r)})}ja(){return this.buffer.findIndex(e=>e===123)}Wa(){return _(this,null,function*(){for(;this.ja()<0&&!(yield this.Ha()););if(this.buffer.length===0)return null;let e=this.ja();e<0&&this.Ga("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}za(e){return _(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ha())&&this.Ga("Reached the end of bundle when more is expected.");let n=this.$a.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Ga(e){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ha(){return _(this,null,function*(){let e=yield this.Ka.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var Dw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return _(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new A(E.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return _(this,null,function*(){let s=N(i),a={documents:o.map(g=>ic(s.serializer,g))},u=yield s.vo("BatchGetDocuments",s.serializer.databaseId,he.emptyPath(),a,o.length),c=new Map;u.forEach(g=>{let m=pB(s.serializer,g);c.set(m.key.toString(),m)});let h=[];return o.forEach(g=>{let m=c.get(g.toString());j(!!m),h.push(m)}),h})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ii(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return _(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=P.fromPath(r);this.mutations.push(new Ju(i,this.precondition(i)))}),yield function(r,i){return _(this,null,function*(){let o=N(r),s={writes:i.map(a=>oc(o.serializer,a))};yield o.So("Commit",o.serializer.databaseId,he.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw L();n=q.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new A(E.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(q.min())?Ue.exists(!1):Ue.updateTime(n):Ue.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(q.min()))throw new A(E.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ue.updateTime(n)}return Ue.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Cw=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Ja=r.maxAttempts,this.jo=new cc(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo(()=>_(this,null,function*(){let e=new Dw(this.datastore),n=this.Xa(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.eu(i)}))}).catch(r=>{this.eu(r)})}))}Xa(e){try{let n=this.updateFunction(e);return!gc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(e)}tu(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!VS(n)}return!1}};var Tw=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ye.UNAUTHENTICATED,this.clientId=hh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>_(this,null,function*(){S("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(S("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new A(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ze;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Zs(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function lh(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),S("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield ax(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Aw(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield d0(t);S("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>HA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>HA(e.remoteStore,i)),t._onlineComponents=e})}function Dx(t){return t.name==="FirebaseError"?t.code===E.FAILED_PRECONDITION||t.code===E.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function d0(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){S("FirestoreClient","Using user provided OfflineComponentProvider");try{yield lh(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!Dx(n))throw n;tn("Error using user provided cache. Falling back to memory cache: "+n),yield lh(t,new dc)}}else S("FirestoreClient","Using default OfflineComponentProvider"),yield lh(t,new dc);return t._offlineComponents})}function df(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(S("FirestoreClient","Using user provided OnlineComponentProvider"),yield Aw(t,t._uninitializedComponentsProvider._online)):(S("FirestoreClient","Using default OnlineComponentProvider"),yield Aw(t,new hc))),t._onlineComponents})}function Cx(t){return d0(t).then(e=>e.persistence)}function h0(t){return d0(t).then(e=>e.localStore)}function Tx(t){return df(t).then(e=>e.remoteStore)}function f0(t){return df(t).then(e=>e.syncEngine)}function c$(t){return df(t).then(e=>e.datastore)}function zs(t){return _(this,null,function*(){let e=yield df(t),n=e.eventManager;return n.onListen=qB.bind(null,e.syncEngine),n.onUnlisten=HB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=GB.bind(null,e.syncEngine),n})}function l$(t){return t.asyncQueue.enqueue(()=>_(this,null,function*(){let e=yield Cx(t),n=yield Tx(t);return e.setNetworkEnabled(!0),function(i){let o=N(i);return o.v_.delete(0),Ec(o)}(n)}))}function d$(t){return t.asyncQueue.enqueue(()=>_(this,null,function*(){let e=yield Cx(t),n=yield Tx(t);return e.setNetworkEnabled(!1),function(i){return _(this,null,function*(){let o=N(i);o.v_.add(0),yield Ks(o),o.x_.set("Offline")})}(n)}))}function h$(t,e){let n=new Ze;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(i,o,s){return _(this,null,function*(){try{let a=yield function(c,h){let g=N(c);return g.persistence.runTransaction("read document","readonly",m=>g.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new A(E.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Zs(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield h0(t),e,n)})),n.promise}function Ax(t,e,n={}){let r=new Ze;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(o,s,a,u,c){let h=new qs({next:m=>{s.enqueueAndForget(()=>i0(o,g));let v=m.docs.has(a);!v&&m.fromCache?c.reject(new A(E.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?c.reject(new A(E.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),g=new lc(Ws(a.path),h,{includeMetadataChanges:!0,ta:!0});return r0(o,g)}(yield zs(t),t.asyncQueue,e,n,r)})),r.promise}function f$(t,e){let n=new Ze;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(i,o,s){return _(this,null,function*(){try{let a=yield Vh(i,o,!0),u=new Yh(o,a.hs),c=u.Ta(a.documents),h=u.applyChanges(c,!1);s.resolve(h.snapshot)}catch(a){let u=Zs(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield h0(t),e,n)})),n.promise}function Sx(t,e,n={}){let r=new Ze;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(o,s,a,u,c){let h=new qs({next:m=>{s.enqueueAndForget(()=>i0(o,g)),m.fromCache&&u.source==="server"?c.reject(new A(E.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),g=new lc(a,h,{includeMetadataChanges:!0,ta:!0});return r0(o,g)}(yield zs(t),t.asyncQueue,e,n,r)})),r.promise}function p$(t,e){let n=new qs(e);return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(i,o){N(i).W_.add(o),o.next()}(yield zs(t),n)})),()=>{n.Qa(),t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(i,o){N(i).W_.delete(o)}(yield zs(t),n)}))}}function g$(t,e,n,r){let i=function(s,a){let u;return u=typeof s=="string"?jS().encode(s):s,function(h,g){return new bw(h,g)}(function(h,g){if(h instanceof Uint8Array)return QA(h,g);if(h instanceof ArrayBuffer)return QA(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,wc(e));t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){u$(yield f0(t),i,r)}))}function m$(t,e){return t.asyncQueue.enqueue(()=>_(this,null,function*(){return function(r,i){let o=N(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield h0(t),e)}))}function xx(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var YA=new Map;function p0(t,e,n){if(!n)throw new A(E.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function g0(t,e,n,r){if(e===!0&&r===!0)throw new A(E.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ZA(t){if(!P.isDocumentKey(t))throw new A(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function XA(t){if(P.isDocumentKey(t))throw new A(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":L()}function fe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new A(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=hf(t);throw new A(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Mx(t,e){if(e<=0)throw new A(E.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Xh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new A(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new A(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}g0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new A(E.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new A(E.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new A(E.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},no=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new A(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new A(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Hy;switch(r.type){case"firstParty":return new Qy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new A(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=YA.get(n);r&&(S("ComponentProvider","Removing Datastore"),YA.delete(n),r.terminate())}(this),Promise.resolve()}};function Rx(t,e,n,r={}){var i;let o=(t=fe(t,no))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&tn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ye.MOCK_USER;else{a=BE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new A(E.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ye(c)}t._authCredentials=new Gy(new dh(a,u))}}var dt=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ae=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Kn=class t extends dt{constructor(e,n,r){super(e,n,Ws(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ae(this.firestore,null,new P(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function m0(t,e,...n){if(t=Pe(t),p0("collection","path",e),t instanceof no){let r=he.fromString(e,...n);return XA(r),new Kn(t,null,r)}{if(!(t instanceof Ae||t instanceof Kn))throw new A(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(he.fromString(e,...n));return XA(r),new Kn(t.firestore,null,r)}}function Px(t,e){if(t=fe(t,no),p0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new A(E.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new dt(t,null,function(r){return new yn(he.emptyPath(),r)}(e))}function Ic(t,e,...n){if(t=Pe(t),arguments.length===1&&(e=hh.newId()),p0("doc","path",e),t instanceof no){let r=he.fromString(e,...n);return ZA(r),new Ae(t,null,new P(r))}{if(!(t instanceof Ae||t instanceof Kn))throw new A(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(he.fromString(e,...n));return ZA(r),new Ae(t.firestore,t instanceof Kn?t.converter:null,new P(r))}}function y0(t,e){return t=Pe(t),e=Pe(e),(t instanceof Ae||t instanceof Kn)&&(e instanceof Ae||e instanceof Kn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function v0(t,e){return t=Pe(t),e=Pe(e),t instanceof dt&&e instanceof dt&&t.firestore===e.firestore&&yc(t._query,e._query)&&t.converter===e.converter}var Sw=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new cc(this,"async_queue_retry"),this.cu=()=>{let n=ch();n&&S("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=ch();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;let n=ch();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});let n=new Ze;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){return _(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!ai(e))throw e;S("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(e){let n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw ze("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);let i=hw.createAndSchedule(this,e,n,r,o=>this.Iu(o));return this.su.push(i),i}lu(){this.ou&&L()}verifyOperationInProgress(){}Tu(){return _(this,null,function*(){let e;do e=this.nu,yield e;while(e!==this.nu)})}Eu(e){for(let n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){let n=this.su.indexOf(e);this.su.splice(n,1)}};function xw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var Mw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ze,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var Nx=-1,Me=class extends no{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Sw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||kx(this),this._firestoreClient.terminate()}};function et(t){return t._firestoreClient||kx(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function kx(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,c,h){return new rv(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,xx(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Tw(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Ox(t,e){zx(t=fe(t,Me));let n=et(t);if(n._uninitializedComponentsProvider)throw new A(E.FAILED_PRECONDITION,"SDK cache is already specified.");tn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new hc;return Lx(n,i,new Zh(i,r.cacheSizeBytes,e?.forceOwnership))}function Fx(t){zx(t=fe(t,Me));let e=et(t);if(e._uninitializedComponentsProvider)throw new A(E.FAILED_PRECONDITION,"SDK cache is already specified.");tn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new hc;return Lx(e,r,new _w(r,n.cacheSizeBytes))}function Lx(t,e,n){let r=new Ze;return t.asyncQueue.enqueue(()=>_(this,null,function*(){try{yield lh(t,n),yield Aw(t,e),r.resolve()}catch(i){let o=i;if(!Dx(o))throw o;tn("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function Vx(t){if(t._initialized&&!t._terminated)throw new A(E.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Ze;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{yield function(r){return _(this,null,function*(){if(!pr.D())return Promise.resolve();let i=r+"main";yield pr.delete(i)})}(Jw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function Ux(t){return function(n){let r=new Ze;return n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return ZB(yield f0(n),r)})),r.promise}(et(t=fe(t,Me)))}function jx(t){return l$(et(t=fe(t,Me)))}function Bx(t){return d$(et(t=fe(t,Me)))}function $x(t,e){let n=et(t=fe(t,Me)),r=new Mw;return g$(n,t._databaseId,e,r),r}function qx(t,e){return m$(et(t=fe(t,Me)),e).then(n=>n?new dt(t,null,n.query):null)}function zx(t){if(t._initialized||t._terminated)throw new A(E.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Xn=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ot.fromBase64String(e))}catch(n){throw new A(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var wn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new A(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var vr=class{constructor(e){this._methodName=e}};var ro=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new A(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new A(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}};var y$=/^__.*__$/,Rw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new vn(e,this.data,this.fieldMask,n,this.fieldTransforms):new ri(e,this.data,n,this.fieldTransforms)}},Jh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new vn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function Hx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw L()}}var ef=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ru(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return tf(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(Hx(this.Vu)&&y$.test(e))throw this.Su('Document fields cannot begin and end with "__"')}},Pw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wc(e)}Cu(e,n,r,i=!1){return new ef({Vu:e,methodName:n,Du:r,path:He.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ao(t){let e=t._freezeSettings(),n=wc(t._databaseId);return new Pw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ff(t,e,n,r,i,o={}){let s=t.Cu(o.merge||o.mergeFields?2:0,e,n,i);I0("Data must be an object, but it was:",s,r);let a=Kx(r,s),u,c;if(o.merge)u=new zt(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let g of o.mergeFields){let m=Lw(e,g,n);if(!s.contains(m))throw new A(E.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Yx(h,m)||h.push(m)}u=new zt(h),c=s.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,c=s.fieldTransforms;return new Rw(new vt(a),u,c)}var fc=class t extends vr{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function Gx(t,e,n){return new ef({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Nw=class t extends vr{_toFieldTransform(e){return new Ji(e.path,new ti)}isEqual(e){return e instanceof t}},kw=class t extends vr{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){let n=Gx(this,e,!0),r=this.vu.map(o=>uo(o,n)),i=new mr(r);return new Ji(e.path,i)}isEqual(e){return e instanceof t&&zf(this.vu,e.vu)}},Ow=class t extends vr{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){let n=Gx(this,e,!0),r=this.vu.map(o=>uo(o,n)),i=new yr(r);return new Ji(e.path,i)}isEqual(e){return e instanceof t&&zf(this.vu,e.vu)}},Fw=class t extends vr{constructor(e,n){super(e),this.Fu=n}_toFieldTransform(e){let n=new ni(e.serializer,RS(e.serializer,this.Fu));return new Ji(e.path,n)}isEqual(e){return e instanceof t&&this.Fu===e.Fu}};function w0(t,e,n,r){let i=t.Cu(1,e,n);I0("Data must be an object, but it was:",i,r);let o=[],s=vt.empty();so(r,(u,c)=>{let h=_0(e,u,n);c=Pe(c);let g=i.yu(h);if(c instanceof fc)o.push(h);else{let m=uo(c,g);m!=null&&(o.push(h),s.set(h,m))}});let a=new zt(o);return new Jh(s,a,i.fieldTransforms)}function E0(t,e,n,r,i,o){let s=t.Cu(1,e,n),a=[Lw(e,r,n)],u=[i];if(o.length%2!=0)throw new A(E.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Lw(e,o[m])),u.push(o[m+1]);let c=[],h=vt.empty();for(let m=a.length-1;m>=0;--m)if(!Yx(c,a[m])){let v=a[m],T=u[m];T=Pe(T);let b=s.yu(v);if(T instanceof fc)c.push(v);else{let I=uo(T,b);I!=null&&(c.push(v),h.set(v,I))}}let g=new zt(c);return new Jh(h,g,s.fieldTransforms)}function Wx(t,e,n,r=!1){return uo(n,t.Cu(r?4:3,e))}function uo(t,e){if(Qx(t=Pe(t)))return I0("Unsupported field value:",e,t),Kx(t,e);if(t instanceof vr)return function(r,i){if(!Hx(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=uo(a,i.wu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Pe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return RS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Oe.fromDate(r);return{timestampValue:Os(i.serializer,o)}}if(r instanceof Oe){let o=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Os(i.serializer,o)}}if(r instanceof ro)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xn)return{bytesValue:BS(i.serializer,r._byteString)};if(r instanceof Ae){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Su(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Yw(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${hf(r)}`)}(t,e)}function Kx(t,e){let n={};return fS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):so(t,(r,i)=>{let o=uo(i,e.fu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function Qx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Oe||t instanceof ro||t instanceof Xn||t instanceof Ae||t instanceof vr)}function I0(t,e,n){if(!Qx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=hf(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function Lw(t,e,n){if((e=Pe(e))instanceof wn)return e._internalPath;if(typeof e=="string")return _0(t,e);throw tf("Field path arguments must be of type string or ",t,!1,void 0,n)}var v$=new RegExp("[~\\*/\\[\\]]");function _0(t,e,n){if(e.search(v$)>=0)throw tf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wn(...e.split("."))._internalPath}catch{throw tf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new A(E.INVALID_ARGUMENT,a+t+u)}function Yx(t,e){return t.some(n=>n.isEqual(e))}var io=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ae(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Vw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(pf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Vw=class extends io{data(){return super.data()}};function pf(t,e){return typeof e=="string"?_0(t,e):e instanceof wn?e._internalPath:e._delegate._internalPath}function Zx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new A(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pc=class{},oo=class extends pc{};function Ir(t,e,...n){let r=[];e instanceof pc&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof Uw).length,a=o.filter(u=>u instanceof nf).length;if(s>1||s>0&&a>0)throw new A(E.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var nf=class t extends oo{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return aM(e._query,n),new dt(e.firestore,e.converter,mv(e._query,n))}_parse(e){let n=ao(e.firestore);return function(o,s,a,u,c,h,g){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new A(E.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){eS(g,h);let v=[];for(let T of g)v.push(JA(u,o,T));m={arrayValue:{values:v}}}else m=JA(u,o,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||eS(g,h),m=Wx(a,s,g,h==="in"||h==="not-in");return ce.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function Xx(t,e,n){let r=e,i=pf("where",t);return nf._create(i,r,n)}var Uw=class t extends pc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:be.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)aM(s,u),s=mv(s,u)}(e._query,n),new dt(e.firestore,e.converter,mv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var jw=class t extends oo{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new A(E.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new A(E.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zi(o,s)}(e._query,this._field,this._direction);return new dt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new yn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function Jx(t,e="asc"){let n=e,r=pf("orderBy",t);return jw._create(r,n)}var rf=class t extends oo{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new dt(e.firestore,e.converter,_h(e._query,this._limit,this._limitType))}};function eM(t){return Mx("limit",t),rf._create("limit",t,"F")}function tM(t){return Mx("limitToLast",t),rf._create("limitToLast",t,"L")}var of=class t extends oo{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=sM(e,this.type,this._docOrFields,this._inclusive);return new dt(e.firestore,e.converter,function(i,o){return new yn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function nM(...t){return of._create("startAt",t,!0)}function rM(...t){return of._create("startAfter",t,!1)}var sf=class t extends oo{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=sM(e,this.type,this._docOrFields,this._inclusive);return new dt(e.firestore,e.converter,function(i,o){return new yn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function iM(...t){return sf._create("endBefore",t,!1)}function oM(...t){return sf._create("endAt",t,!0)}function sM(t,e,n,r){if(n[0]=Pe(n[0]),n[0]instanceof io)return function(o,s,a,u,c){if(!u)throw new A(E.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let g of As(o))if(g.field.isKeyField())h.push(Yi(s,u.key));else{let m=u.data.field(g.field);if(uf(m))throw new A(E.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=g.field.canonicalString();throw new A(E.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new Yn(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=ao(t.firestore);return function(s,a,u,c,h,g){let m=s.explicitOrderBy;if(h.length>m.length)throw new A(E.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let T=0;T<h.length;T++){let b=h[T];if(m[T].field.isKeyField()){if(typeof b!="string")throw new A(E.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof b}`);if(!Kw(s)&&b.indexOf("/")!==-1)throw new A(E.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${b}' contains a slash.`);let I=s.path.child(he.fromString(b));if(!P.isDocumentKey(I))throw new A(E.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);let x=new P(I);v.push(Yi(a,x))}else{let I=Wx(u,c,b);v.push(I)}}return new Yn(v,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function JA(t,e,n){if(typeof(n=Pe(n))=="string"){if(n==="")throw new A(E.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kw(e)&&n.indexOf("/")!==-1)throw new A(E.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(he.fromString(n));if(!P.isDocumentKey(r))throw new A(E.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yi(t,new P(r))}if(n instanceof Ae)return Yi(t,n._key);throw new A(E.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hf(n)}.`)}function eS(t,e){if(!Array.isArray(t)||t.length===0)throw new A(E.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aM(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new A(E.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new A(E.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Hs=class{convertValue(e,n="none"){switch(Qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw L()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return so(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new ro(Ve(e.latitude),Ve(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Gw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yu(e));default:return null}}convertTimestamp(e){let n=gr(e);return new Oe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=he.fromString(e);j(XS(r));let i=new Jr(r.get(1),r.get(3)),o=new P(r.popFirst(5));return i.isEqual(n)||ze(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function gf(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Bw=class extends Hs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ae(this.firestore,null,n)}};var fr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},rn=class extends io{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Yr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(pf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Yr=class extends rn{data(e={}){return super.data(e)}},En=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new fr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yr(this._firestore,this._userDataWriter,r.key,r,new fr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new A(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Yr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Yr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),c=-1,h=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:w$(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function w$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return L()}}function b0(t,e){return t instanceof rn&&e instanceof rn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof En&&e instanceof En&&t._firestore===e._firestore&&v0(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function uM(t){t=fe(t,Ae);let e=fe(t.firestore,Me);return Ax(et(e),t._key).then(n=>A0(e,t,n))}var wr=class extends Hs{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ae(this.firestore,null,n)}};function cM(t){t=fe(t,Ae);let e=fe(t.firestore,Me),n=et(e),r=new wr(e);return h$(n,t._key).then(i=>new rn(e,r,t._key,i,new fr(i!==null&&i.hasLocalMutations,!0),t.converter))}function lM(t){t=fe(t,Ae);let e=fe(t.firestore,Me);return Ax(et(e),t._key,{source:"server"}).then(n=>A0(e,t,n))}function dM(t){t=fe(t,dt);let e=fe(t.firestore,Me),n=et(e),r=new wr(e);return Zx(t._query),Sx(n,t._query).then(i=>new En(e,r,t,i))}function hM(t){t=fe(t,dt);let e=fe(t.firestore,Me),n=et(e),r=new wr(e);return f$(n,t._query).then(i=>new En(e,r,t,i))}function fM(t){t=fe(t,dt);let e=fe(t.firestore,Me),n=et(e),r=new wr(e);return Sx(n,t._query,{source:"server"}).then(i=>new En(e,r,t,i))}function D0(t,e,n){t=fe(t,Ae);let r=fe(t.firestore,Me),i=gf(t.converter,e,n);return Xs(r,[ff(ao(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ue.none())])}function C0(t,e,n,...r){t=fe(t,Ae);let i=fe(t.firestore,Me),o=ao(i),s;return s=typeof(e=Pe(e))=="string"||e instanceof wn?E0(o,"updateDoc",t._key,e,n,r):w0(o,"updateDoc",t._key,e),Xs(i,[s.toMutation(t._key,Ue.exists(!0))])}function pM(t){return Xs(fe(t.firestore,Me),[new ii(t._key,Ue.none())])}function gM(t,e){let n=fe(t.firestore,Me),r=Ic(t),i=gf(t.converter,e);return Xs(n,[ff(ao(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ue.exists(!1))]).then(()=>r)}function T0(t,...e){var n,r,i;t=Pe(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||xw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(xw(e[s])){let g=e[s];e[s]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[s+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[s+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let u,c,h;if(t instanceof Ae)c=fe(t.firestore,Me),h=Ws(t._key.path),u={next:g=>{e[s]&&e[s](A0(c,t,g))},error:e[s+1],complete:e[s+2]};else{let g=fe(t,dt);c=fe(g.firestore,Me),h=g._query;let m=new wr(c);u={next:v=>{e[s]&&e[s](new En(c,m,g,v))},error:e[s+1],complete:e[s+2]},Zx(t._query)}return function(m,v,T,b){let I=new qs(b),x=new lc(v,I,T);return m.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return r0(yield zs(m),x)})),()=>{I.Qa(),m.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return i0(yield zs(m),x)}))}}(et(c),h,a,u)}function mM(t,e){return p$(et(t=fe(t,Me)),xw(e)?e:{next:e})}function Xs(t,e){return function(r,i){let o=new Ze;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return WB(yield f0(r),i,o)})),o.promise}(et(t),e)}function A0(t,e,n){let r=n.docs.get(e._key),i=new wr(t);return new rn(t,i,e._key,r,new fr(n.hasPendingWrites,n.fromCache),e.converter)}var E$={maxAttempts:5};var af=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ao(e)}set(e,n,r){this._verifyNotCommitted();let i=Kr(e,this._firestore),o=gf(i.converter,n,r),s=ff(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ue.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=Kr(e,this._firestore),s;return s=typeof(n=Pe(n))=="string"||n instanceof wn?E0(this._dataReader,"WriteBatch.update",o._key,n,r,i):w0(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Ue.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Kr(e,this._firestore);return this._mutations=this._mutations.concat(new ii(n._key,Ue.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new A(E.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Kr(t,e){if((t=Pe(t)).firestore!==e)throw new A(E.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var $w=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=ao(n)}get(n){let r=Kr(n,this._firestore),i=new Bw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return L();let s=o[0];if(s.isFoundDocument())return new io(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new io(this._firestore,i,r._key,null,r.converter);throw L()})}set(n,r,i){let o=Kr(n,this._firestore),s=gf(o.converter,r,i),a=ff(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=Kr(n,this._firestore),a;return a=typeof(r=Pe(r))=="string"||r instanceof wn?E0(this._dataReader,"Transaction.update",s._key,r,i,o):w0(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=Kr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Kr(e,this._firestore),r=new wr(this._firestore);return super.get(e).then(i=>new rn(this._firestore,r,n._key,i._document,new fr(!1,!1),n.converter))}};function yM(t,e,n){t=fe(t,Me);let r=Object.assign(Object.assign({},E$),n);return function(o){if(o.maxAttempts<1)throw new A(E.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new Ze;return o.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){let c=yield c$(o);new Cw(o.asyncQueue,c,a,s,u).Ya()})),u.promise}(et(t),i=>e(new $w(t,i)),r)}function vM(){return new fc("deleteField")}function wM(){return new Nw("serverTimestamp")}function EM(...t){return new kw("arrayUnion",t)}function IM(...t){return new Ow("arrayRemove",t)}function _M(t){return new Fw("increment",t)}(function(e,n=!0){(function(i){Gs=i})(zE),da(new gi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Me(new Wy(r.getProvider("auth-internal")),new Zy(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new A(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jr(c.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Cr(tA,"4.6.0",e),Cr(tA,"4.6.0","esm2017")})();var I$="@firebase/firestore-compat",_$="0.3.29";function N0(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new A("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function bM(){if(typeof Uint8Array>"u")throw new A("unimplemented","Uint8Arrays are not available in this environment.")}function DM(){if(!pS())throw new A("unimplemented","Blobs are unavailable in Firestore in this environment.")}var mf=class t{constructor(e){this._delegate=e}static fromBase64String(e){return DM(),new t(Xn.fromBase64String(e))}static fromUint8Array(e){return bM(),new t(Xn.fromUint8Array(e))}toBase64(){return DM(),this._delegate.toBase64()}toUint8Array(){return bM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function S0(t){return b$(t,["next","error","complete"])}function b$(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var x0=class{enableIndexedDbPersistence(e,n){return Ox(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Fx(e._delegate)}clearIndexedDbPersistence(e){return Vx(e._delegate)}},yf=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Jr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&tn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){Rx(this._delegate,e,n,r)}enableNetwork(){return jx(this._delegate)}disableNetwork(){return Bx(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,g0("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Ux(this._delegate)}onSnapshotsInSync(e){return mM(this._delegate,e)}get app(){if(!this._appCompat)throw new A("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ta(this,m0(this._delegate,e))}catch(n){throw Dt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Jn(this,Ic(this._delegate,e))}catch(n){throw Dt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fo(this,Px(this._delegate,e))}catch(n){throw Dt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return yM(this._delegate,n=>e(new vf(this,n)))}batch(){return et(this._delegate),new wf(new af(this._delegate,e=>Xs(this._delegate,e)))}loadBundle(e){return $x(this._delegate,e)}namedQuery(e){return qx(this._delegate,e).then(n=>n?new fo(this,n):null)}},Js=class extends Hs{constructor(e){super(),this.firestore=e}convertBytes(e){return new mf(new Xn(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Jn.forKey(n,this.firestore,null)}};function D$(t){tS(t)}var vf=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Js(e)}get(e){let n=co(e);return this._delegate.get(n).then(r=>new lo(this._firestore,new rn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=co(e);return r?(N0("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=co(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=co(e);return this._delegate.delete(n),this}},wf=class{constructor(e){this._delegate=e}set(e,n,r){let i=co(e);return r?(N0("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=co(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=co(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},ea=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Yr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ho(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new Js(e),n),i.set(n,o)),o}};ea.INSTANCES=new WeakMap;var Jn=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Js(e)}static forPath(e,n,r){if(e.length%2!==0)throw new A("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Ae(n._delegate,r,new P(e)))}static forKey(e,n,r){return new t(n,new Ae(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ta(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ta(this.firestore,m0(this._delegate,e))}catch(n){throw Dt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Pe(e),e instanceof Ae?y0(this._delegate,e):!1}set(e,n){n=N0("DocumentReference.set",n);try{return n?D0(this._delegate,e,n):D0(this._delegate,e)}catch(r){throw Dt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?C0(this._delegate,e):C0(this._delegate,e,n,...r)}catch(i){throw Dt(i,"updateDoc()","DocumentReference.update()")}}delete(){return pM(this._delegate)}onSnapshot(...e){let n=CM(e),r=TM(e,i=>new lo(this.firestore,new rn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return T0(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=cM(this._delegate):e?.source==="server"?n=lM(this._delegate):n=uM(this._delegate),n.then(r=>new lo(this.firestore,new rn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(ea.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Dt(t,e,n){return t.message=t.message.replace(e,n),t}function CM(t){for(let e of t)if(typeof e=="object"&&!S0(e))return e;return{}}function TM(t,e){var n,r;let i;return S0(t[0])?i=t[0]:S0(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var lo=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Jn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return b0(this._delegate,e._delegate)}},ho=class extends lo{data(e){let n=this._delegate.data(e);return this._delegate._converter||nS(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},fo=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Js(e)}where(e,n,r){try{return new t(this.firestore,Ir(this._delegate,Xx(e,n,r)))}catch(i){throw Dt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,Ir(this._delegate,Jx(e,n)))}catch(r){throw Dt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,Ir(this._delegate,eM(e)))}catch(n){throw Dt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,Ir(this._delegate,tM(e)))}catch(n){throw Dt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,Ir(this._delegate,nM(...e)))}catch(n){throw Dt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,Ir(this._delegate,rM(...e)))}catch(n){throw Dt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,Ir(this._delegate,iM(...e)))}catch(n){throw Dt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,Ir(this._delegate,oM(...e)))}catch(n){throw Dt(n,"endAt()","Query.endAt()")}}isEqual(e){return v0(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=hM(this._delegate):e?.source==="server"?n=fM(this._delegate):n=dM(this._delegate),n.then(r=>new _c(this.firestore,new En(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=CM(e),r=TM(e,i=>new _c(this.firestore,new En(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return T0(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(ea.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},M0=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ho(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},_c=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new fo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ho(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new M0(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new ho(this._firestore,r))})}isEqual(e){return b0(this._delegate,e._delegate)}},ta=class t extends fo{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Jn(this.firestore,e):null}doc(e){try{return e===void 0?new Jn(this.firestore,Ic(this._delegate)):new Jn(this.firestore,Ic(this._delegate,e))}catch(n){throw Dt(n,"doc()","CollectionReference.doc()")}}add(e){return gM(this._delegate,e).then(n=>new Jn(this.firestore,n))}isEqual(e){return y0(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(ea.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function co(t){return fe(t,Ae)}var R0=class t{constructor(...e){this._delegate=new wn(...e)}static documentId(){return new t(He.keyField().canonicalString())}isEqual(e){return e=Pe(e),e instanceof wn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var P0=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=wM();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=vM();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=EM(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=IM(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=_M(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var C$={Firestore:yf,GeoPoint:ro,Timestamp:Oe,Blob:mf,Transaction:vf,WriteBatch:wf,DocumentReference:Jn,DocumentSnapshot:lo,Query:fo,QueryDocumentSnapshot:ho,QuerySnapshot:_c,CollectionReference:ta,FieldPath:R0,FieldValue:P0,setLogLevel:D$,CACHE_SIZE_UNLIMITED:Nx};function T$(t,e){t.INTERNAL.registerComponent(new gi("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},C$)))}function A$(t){T$(t,(e,n)=>new yf(e,n,new x0)),t.registerVersion(I$,_$)}A$(At);function S$(t,e=ga){return new ue(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function AM(t,e){return S$(t,e)}function x$(t,e){return AM(t,e).pipe(Ei(void 0),ya(),z(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function F0(t,e){return AM(t,e).pipe(z(n=>({payload:n,type:"query"})))}var Ef=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=PM(r,n);return new _f(i,o,this.afs)}snapshotChanges(){return x$(this.ref,this.afs.schedulers.outsideAngular).pipe(Nt)}valueChanges(e={}){return this.snapshotChanges().pipe(z(({payload:n})=>e.idField?Re(B({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return me(this.ref.get(e)).pipe(Nt)}};function If(t,e){return F0(t,e).pipe(Ei(void 0),ya(),z(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let c=o.find(g=>g.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function SM(t,e,n){return If(t,n).pipe(wi((r,i)=>M$(r,i.map(o=>o.payload),e),[]),cp(),z(r=>r.map(i=>({type:i.type,payload:i}))))}function M$(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=R$(t,r))}),t}function k0(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function R$(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return k0(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return k0(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return k0(t,e.oldIndex,1);break}return t}function xM(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var _f=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=If(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(z(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Ei(void 0),ya(),nt(([r,i])=>i.length>0||!r),z(([,r])=>r),Nt)}auditTrail(e){return this.stateChanges(e).pipe(wi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=xM(e);return SM(this.query,n,this.afs.schedulers.outsideAngular).pipe(Nt)}valueChanges(e={}){return F0(this.query,this.afs.schedulers.outsideAngular).pipe(z(n=>n.payload.docs.map(r=>e.idField?Re(B({},r.data()),{[e.idField]:r.id}):r.data())),Nt)}get(e){return me(this.query.get(e)).pipe(Nt)}add(e){return this.ref.add(e)}doc(e){return new Ef(this.ref.doc(e),this.afs)}},O0=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?If(this.query,this.afs.schedulers.outsideAngular).pipe(Nt):If(this.query,this.afs.schedulers.outsideAngular).pipe(z(n=>n.filter(r=>e.indexOf(r.type)>-1)),nt(n=>n.length>0),Nt)}auditTrail(e){return this.stateChanges(e).pipe(wi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=xM(e);return SM(this.query,n,this.afs.schedulers.outsideAngular).pipe(Nt)}valueChanges(e={}){return F0(this.query,this.afs.schedulers.outsideAngular).pipe(z(r=>r.payload.docs.map(i=>e.idField?B({[e.idField]:i.id},i.data()):i.data())),Nt)}get(e){return me(this.query.get(e)).pipe(Nt)}},MM=new $("angularfire2.enableFirestorePersistence"),RM=new $("angularfire2.firestore.persistenceSettings"),P$=new $("angularfire2.firestore.settings"),N$=new $("angularfire2.firestore.use-emulator");function PM(t,e=n=>n){return{query:e(t),ref:t}}var k$=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,c,h,g,m,v,T,b,I,x,U){this.schedulers=u;let M=hu(n,a,r),V=h;g&&Ym(M,a,m,T,b,I,v,x),[this.firestore,this.persistenceEnabled$]=Dd(`${M.name}.firestore`,"AngularFirestore",M.name,()=>{let W=a.runOutsideAngular(()=>M.firestore());if(o&&W.settings(o),V&&W.useEmulator(...V),i&&!Lr(s)){let K=()=>{try{return me(W.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(ge){return typeof console<"u"&&console.warn(ge),H(!1)}};return[W,a.runOutsideAngular(K)]}else return[W,H(!1)]},[o,V,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=PM(i,r),a=this.schedulers.ngZone.run(()=>o);return new _f(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new O0(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Ef(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(R(us),R(cs,8),R(MM,8),R(P$,8),R(Mt),R(Ie),R(Id),R(RM,8),R(N$,8),R(Cd,8),R(zm,8),R(Hm,8),R(Gm,8),R(Wm,8),R(Km,8),R(Qm,8),R(Oi,8))};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),NM=(()=>{class t{constructor(){At.registerVersion("angularfire",as.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:MM,useValue:!0},{provide:RM,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=On({type:t});static \u0275inj=Nn({providers:[k$]})}return t})();var kM={apiKey:"AIzaSyBDXtfXekA4i5SpMumFDWTA9vEmJdEHrDI",authDomain:"tp-01-58b6f.firebaseapp.com",projectId:"tp-01-58b6f",storageBucket:"tp-01-58b6f.appspot.com",messagingSenderId:"598126968796",appId:"1:598126968796:web:9853fd29169a3d31499919",measurementId:"G-524JSGGLNX"};HE(kM);var OM={providers:[lC(NC),sg(ID,SC.initializeApp(kM),NM)]};var FM=(()=>{let e=class e{constructor(){this.title="saladejuegos"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=kn({type:e,selectors:[["app-root"]],standalone:!0,features:[Fr],decls:1,vars:0,template:function(i,o){i&1&&fn(0,"router-outlet")},dependencies:[uu]});let t=e;return t})();xD(FM,OM).catch(t=>console.error(t));
